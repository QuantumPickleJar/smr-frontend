import{S as pt,i as gt,s as mt,d as V,v as dt,F as K,G as X,$ as ht,a0 as $t,a as z,al as ot,am as lt,an as ct,e as y,g as k,h as L,j as d,O as x,m as E,n as T,p as vt,t as N,q as bt,r as O,y as C,I as _,V as H,K as G,b as M,J as Y,N as J,k as Q,M as Z,R as j,Q as tt,aa as Tt,U as q,T as et,f as nt,u as st,W as wt,X as xt}from"./vendor.883dd93b.js";import{a as at}from"./graphql.fef59309.js";const S="src/lib/components/utils/TagList.svelte";function it(o,e,t){const s=o.slice();return s[18]=e[t],s}function rt(o){let e,t,s,u,a,r,p,l,i,c,g,m,w,I;function A(h){o[10](h)}function v(h){o[11](h)}let D={name:"tags",chips:"variant-filled-primary"};o[3]!==void 0&&(D.input=o[3]),o[2]!==void 0&&(D.value=o[2]),a=new lt({props:D,$$inline:!0}),C.push(()=>_(a,"input",A)),C.push(()=>_(a,"value",v)),a.$on("remove",o[12]);function P(h){o[14](h)}let R={options:o[4].filter(o[13])};o[3]!==void 0&&(R.input=o[3]),c=new ot({props:R,$$inline:!0}),C.push(()=>_(c,"input",P)),c.$on("selection",o[15]);const B={c:function(){e=y("div"),t=G("Tags"),s=M(),u=y("div"),Y(a.$$.fragment),l=M(),i=y("div"),Y(c.$$.fragment),this.h()},l:function(f){e=k(f,"DIV",{class:!0});var $=L(e);t=J($,"Tags"),$.forEach(d),s=Q(f),u=k(f,"DIV",{});var n=L(u);Z(a.$$.fragment,n),n.forEach(d),l=Q(f),i=k(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var b=L(i);Z(c.$$.fragment,b),b.forEach(d),this.h()},h:function(){x(e,"class","mb-2"),E(e,S,55,4,1452),E(u,S,57,4,1486),x(i,"class","card w-full max-w-sm max-h-48 p-4 overflow-y-auto"),x(i,"tabindex","-1"),x(i,"data-popup","popupAutocomplete"),E(i,S,66,4,1729)},m:function(f,$){T(f,e,$),j(e,t),T(f,s,$),T(f,u,$),tt(a,u,null),T(f,l,$),T(f,i,$),tt(c,i,null),m=!0,w||(I=Tt(ct.call(null,u,o[6])),w=!0)},p:function(f,$){const n={};!r&&$&8&&(r=!0,n.input=f[3],q(()=>r=!1)),!p&&$&4&&(p=!0,n.value=f[2],q(()=>p=!1)),a.$set(n);const b={};$&20&&(b.options=f[4].filter(f[13])),!g&&$&8&&(g=!0,b.input=f[3],q(()=>g=!1)),c.$set(b)},i:function(f){m||(O(a.$$.fragment,f),O(c.$$.fragment,f),m=!0)},o:function(f){N(a.$$.fragment,f),N(c.$$.fragment,f),m=!1},d:function(f){f&&d(e),f&&d(s),f&&d(u),et(a),f&&d(l),f&&d(i),et(c),w=!1,I()}};return V("SvelteRegisterBlock",{block:B,id:rt.name,type:"else",source:"(55:2) {:else}",ctx:o}),B}function ut(o){let e,t=o[0].length>0&&U(o);const s={c:function(){t&&t.c(),e=nt()},l:function(a){t&&t.l(a),e=nt()},m:function(a,r){t&&t.m(a,r),T(a,e,r)},p:function(a,r){a[0].length>0?t?t.p(a,r):(t=U(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:st,o:st,d:function(a){t&&t.d(a),a&&d(e)}};return V("SvelteRegisterBlock",{block:s,id:ut.name,type:"if",source:"(45:2) {#if !editable}",ctx:o}),s}function U(o){let e,t=o[0];H(t);let s=[];for(let a=0;a<t.length;a+=1)s[a]=W(it(o,t,a));const u={c:function(){e=y("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){e=k(r,"DIV",{class:!0});var p=L(e);for(let l=0;l<s.length;l+=1)s[l].l(p);p.forEach(d),this.h()},h:function(){x(e,"class","flex flex-row flex-wrap text-sm gap-1"),E(e,S,46,6,1190)},m:function(r,p){T(r,e,p);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p:function(r,p){if(p&1){t=r[0],H(t);let l;for(l=0;l<t.length;l+=1){const i=it(r,t,l);s[l]?s[l].p(i,p):(s[l]=W(i),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d:function(r){r&&d(e),wt(s,r)}};return V("SvelteRegisterBlock",{block:u,id:U.name,type:"if",source:"(46:4) {#if tags.length > 0}",ctx:o}),u}function W(o){let e,t,s,u=o[18].name+"",a,r;const p={c:function(){e=y("div"),t=y("span"),s=G("#"),a=G(u),r=M(),this.h()},l:function(i){e=k(i,"DIV",{class:!0});var c=L(e);t=k(c,"SPAN",{class:!0});var g=L(t);s=J(g,"#"),g.forEach(d),a=J(c,u),r=Q(c),c.forEach(d),this.h()},h:function(){x(t,"class","text-orange-500"),E(t,S,49,12,1333),x(e,"class","text-neutral-300 lowercase"),E(e,S,48,10,1280)},m:function(i,c){T(i,e,c),j(e,t),j(t,s),j(e,a),j(e,r)},p:function(i,c){c&1&&u!==(u=i[18].name+"")&&xt(a,u)},d:function(i){i&&d(e)}};return V("SvelteRegisterBlock",{block:p,id:W.name,type:"each",source:"(48:8) {#each tags as tag}",ctx:o}),p}function F(o){let e,t,s,u;const a=[ut,rt],r=[];function p(i,c){return i[1]?1:0}t=p(o),s=r[t]=a[t](o);const l={c:function(){e=y("div"),s.c(),this.h()},l:function(c){e=k(c,"DIV",{class:!0});var g=L(e);s.l(g),g.forEach(d),this.h()},h:function(){x(e,"class","tags"),E(e,S,43,0,1121)},m:function(c,g){T(c,e,g),r[t].m(e,null),u=!0},p:function(c,[g]){let m=t;t=p(c),t===m?r[t].p(c,g):(vt(),N(r[m],1,1,()=>{r[m]=null}),bt(),s=r[t],s?s.p(c,g):(s=r[t]=a[t](c),s.c()),O(s,1),s.m(e,null))},i:function(c){u||(O(s),u=!0)},o:function(c){N(s),u=!1},d:function(c){c&&d(e),r[t].d()}};return V("SvelteRegisterBlock",{block:l,id:F.name,type:"component",source:"",ctx:o}),l}function yt(o,e,t){let s,u,{$$slots:a={},$$scope:r}=e;dt("TagList",a,[]);const p=K(),l=X({query:at,client:p,variables:{}});ht(l,"getAllTags"),$t(o,l,n=>t(9,u=n));let{tags:i=[]}=e,{editable:c=!1}=e;const g={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let m=[];const w=()=>t(2,m=i.map(n=>n.name));z(w);const I=n=>{t(0,i=[...i,{id:n.value,name:n.label}]),w()},A=n=>{const b=i.findIndex(ft=>ft.name===n);t(0,i=[...i.slice(0,b),...i.slice(b+1)]),w()};let v="";const D=["tags","editable"];Object.keys(e).forEach(n=>{!~D.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<TagList> was created with unknown prop '${n}'`)});function P(n){v=n,t(3,v)}function R(n){m=n,t(2,m)}const B=n=>A(n.detail.chipValue),h=n=>m.indexOf(n.label)<0;function f(n){v=n,t(3,v)}const $=n=>I(n.detail);return o.$$set=n=>{"tags"in n&&t(0,i=n.tags),"editable"in n&&t(1,c=n.editable)},o.$capture_state=()=>({GetTagsDocument:at,queryStore:X,getContextClient:K,Autocomplete:ot,InputChip:lt,popup:ct,onMount:z,client:p,getAllTags:l,tags:i,editable:c,popupSettings:g,tagList:m,loadTagList:w,addTag:I,removeTag:A,inputTag:v,allTags:s,$getAllTags:u}),o.$inject_state=n=>{"tags"in n&&t(0,i=n.tags),"editable"in n&&t(1,c=n.editable),"tagList"in n&&t(2,m=n.tagList),"inputTag"in n&&t(3,v=n.inputTag),"allTags"in n&&t(4,s=n.allTags)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&512&&t(4,s=u.data?.getTags?.map(n=>({label:n.name,value:n.id}))||[])},[i,c,m,v,s,l,g,I,A,u,P,R,B,h,f,$]}class Et extends pt{constructor(e){super(e),gt(this,e,yt,F,mt,{tags:0,editable:1}),V("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:F.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Et as T};
//# sourceMappingURL=TagList.2170985b.js.map
