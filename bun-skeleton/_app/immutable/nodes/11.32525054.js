import{G as Ke,S as we,i as be,s as ye,d as O,v as Ee,an as ce,$ as le,e as v,K as V,b as L,g as w,h as y,N as A,j as h,k as q,O as S,m as b,n as M,R as d,X as K,u as I,x as Be,H as Z,a0 as Ie,F as De,aA as Se,Z as ue,_ as Qe,f as oe,L as Xe,r as J,t as X,q as _e,J as ie,M as re,Q as se,T as ae,a6 as Pe,y as We,I as Ye,p as Te,a7 as Ze,U as et,Y as je,a5 as tt}from"../chunks/vendor.d31bcabb.js";import{n as nt,z as Re}from"../chunks/graphql.fef59309.js";import{l as ot}from"../chunks/gql.ff9241aa.js";import{p as de}from"../chunks/formatting.6f84ef8f.js";import{u as fe}from"../chunks/user.8942984b.js";import{T as Ve}from"../chunks/Toast.d55ff960.js";import{m as he}from"../chunks/markdown.9c8d9357.js";import{M as Ae}from"../chunks/MetaDescriptors.7fcda58c.js";const it=async({params:t,parent:e})=>({...t,...await ot({guide:Ke({query:nt,client:(await e()).client,variables:{guide:t.guideId}})})}),mt=Object.freeze(Object.defineProperty({__proto__:null,load:it},Symbol.toStringTag,{value:"Module"})),Y="src/lib/components/guides/GuideInfo.svelte";function pe(t){let e,i,o,n,r=t[2]("entry.info")+"",a,l,u,s,p=t[2]("entry.created-at")+"",c,m,f,$=de(t[0].created_at)+"",k,T;const C={c:function(){e=v("div"),i=v("section"),o=v("div"),n=v("h3"),a=V(r),l=L(),u=v("span"),s=v("strong"),c=V(p),m=V(":"),f=L(),k=V($),T=v("br"),this.h()},l:function(_){e=w(_,"DIV",{class:!0});var x=y(e);i=w(x,"SECTION",{});var g=y(i);o=w(g,"DIV",{class:!0});var N=y(o);n=w(N,"H3",{class:!0});var G=y(n);a=A(G,r),G.forEach(h),l=q(N),u=w(N,"SPAN",{});var E=y(u);s=w(E,"STRONG",{});var R=y(s);c=A(R,p),m=A(R,":"),R.forEach(h),f=q(E),k=A(E,$),E.forEach(h),T=w(N,"BR",{}),N.forEach(h),g.forEach(h),x.forEach(h),this.h()},h:function(){S(n,"class","text-2xl my-4 font-bold"),b(n,Y,9,6,250),b(s,Y,10,12,322),b(u,Y,10,6,316),b(T,Y,10,92,402),S(o,"class","text-lg"),b(o,Y,8,4,222),b(i,Y,7,2,208),S(e,"class","card p-4"),b(e,Y,6,0,183)},m:function(_,x){M(_,e,x),d(e,i),d(i,o),d(o,n),d(n,a),d(o,l),d(o,u),d(u,s),d(s,c),d(s,m),d(u,f),d(u,k),d(o,T)},p:function(_,[x]){x&4&&r!==(r=_[2]("entry.info")+"")&&K(a,r),x&4&&p!==(p=_[2]("entry.created-at")+"")&&K(c,p),x&1&&$!==($=de(_[0].created_at)+"")&&K(k,$)},i:I,o:I,d:function(_){_&&h(e)}};return O("SvelteRegisterBlock",{block:C,id:pe.name,type:"component",source:"",ctx:t}),C}function rt(t,e,i){let o,n=I,r=()=>(n(),n=Be(s,c=>i(2,o=c)),s);t.$$.on_destroy.push(()=>n());let{$$slots:a={},$$scope:l}=e;Ee("GuideInfo",a,[]);let{guide:u}=e;const{t:s}=ce();le(s,"t"),r(),t.$$.on_mount.push(function(){u===void 0&&!("guide"in e||t.$$.bound[t.$$.props.guide])&&console.warn("<GuideInfo> was created without expected prop 'guide'")});const p=["guide"];return Object.keys(e).forEach(c=>{!~p.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<GuideInfo> was created with unknown prop '${c}'`)}),t.$$set=c=>{"guide"in c&&i(0,u=c.guide)},t.$capture_state=()=>({prettyDate:de,getTranslate:ce,guide:u,t:s,$t:o}),t.$inject_state=c=>{"guide"in c&&i(0,u=c.guide)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[u,s,o]}class Ne extends we{constructor(e){super(e),be(this,e,rt,pe,ye,{guide:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideInfo",options:e,id:pe.name})}get guide(){throw new Error("<GuideInfo>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set guide(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const z="src/lib/components/guides/GuideAuthor.svelte";function ge(t){let e,i,o,n,r=t[2]("author")+"",a,l,u,s,p,c,m,f,$,k=t[0].username+"",T,C,j,_,x=t[2]("role.writer")+"",g;const N={c:function(){e=v("div"),i=v("section"),o=v("div"),n=v("h3"),a=V(r),l=L(),u=v("div"),s=v("div"),p=v("div"),m=L(),f=v("div"),$=v("a"),T=V(k),j=L(),_=v("div"),g=V(x),this.h()},l:function(E){e=w(E,"DIV",{class:!0});var R=y(e);i=w(R,"SECTION",{});var ee=y(i);o=w(ee,"DIV",{class:!0});var W=y(o);n=w(W,"H3",{class:!0});var U=y(n);a=A(U,r),U.forEach(h),l=q(W),u=w(W,"DIV",{class:!0});var D=y(u);s=w(D,"DIV",{class:!0});var P=y(s);p=w(P,"DIV",{class:!0,style:!0}),y(p).forEach(h),m=q(P),f=w(P,"DIV",{class:!0});var H=y(f);$=w(H,"A",{href:!0,class:!0});var Q=y($);T=A(Q,k),Q.forEach(h),j=q(H),_=w(H,"DIV",{});var F=y(_);g=A(F,x),F.forEach(h),H.forEach(h),P.forEach(h),D.forEach(h),W.forEach(h),ee.forEach(h),R.forEach(h),this.h()},h:function(){S(n,"class","text-2xl my-4 font-bold"),b(n,z,9,6,253),S(p,"class","rounded-full bg-cover w-14 h-14"),S(p,"style",c=`background-image: url("${t[0].avatar}")`),b(p,z,13,10,438),S($,"href",C=Z+"/user/"+t[0].id+"/"),S($,"class","text-yellow-500 underline"),b($,z,15,12,593),b(_,z,16,12,696),S(f,"class","grid grid-flow-row"),b(f,z,14,10,548),S(s,"class","grid grid-flow-col auto-cols-min gap-x-4"),b(s,z,12,8,373),S(u,"class","grid auto-rows-min text-lg gap-y-4"),b(u,z,11,6,316),S(o,"class","grid grid-flow-row gap-y-2"),b(o,z,8,4,206),b(i,z,7,2,192),S(e,"class","card p-4"),b(e,z,6,0,167)},m:function(E,R){M(E,e,R),d(e,i),d(i,o),d(o,n),d(n,a),d(o,l),d(o,u),d(u,s),d(s,p),d(s,m),d(s,f),d(f,$),d($,T),d(f,j),d(f,_),d(_,g)},p:function(E,[R]){R&4&&r!==(r=E[2]("author")+"")&&K(a,r),R&1&&c!==(c=`background-image: url("${E[0].avatar}")`)&&S(p,"style",c),R&1&&k!==(k=E[0].username+"")&&K(T,k),R&1&&C!==(C=Z+"/user/"+E[0].id+"/")&&S($,"href",C),R&4&&x!==(x=E[2]("role.writer")+"")&&K(g,x)},i:I,o:I,d:function(E){E&&h(e)}};return O("SvelteRegisterBlock",{block:N,id:ge.name,type:"component",source:"",ctx:t}),N}function st(t,e,i){let o,n=I,r=()=>(n(),n=Be(s,c=>i(2,o=c)),s);t.$$.on_destroy.push(()=>n());let{$$slots:a={},$$scope:l}=e;Ee("GuideAuthor",a,[]);let{author:u}=e;const{t:s}=ce();le(s,"t"),r(),t.$$.on_mount.push(function(){u===void 0&&!("author"in e||t.$$.bound[t.$$.props.author])&&console.warn("<GuideAuthor> was created without expected prop 'author'")});const p=["author"];return Object.keys(e).forEach(c=>{!~p.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<GuideAuthor> was created with unknown prop '${c}'`)}),t.$$set=c=>{"author"in c&&i(0,u=c.author)},t.$capture_state=()=>({base:Z,getTranslate:ce,author:u,t:s,$t:o}),t.$inject_state=c=>{"author"in c&&i(0,u=c.author)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[u,s,o]}class Me extends we{constructor(e){super(e),be(this,e,st,ge,ye,{author:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideAuthor",options:e,id:ge.name})}get author(){throw new Error("<GuideAuthor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set author(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Oe}=Qe,B="src/routes/guide/[guideId]/+page.svelte";function me(t){let e,i;e=new Ae({props:{description:t[1].data.getGuide.short_description,title:t[1].data.getGuide.name},$$inline:!0});const o={c:function(){ie(e.$$.fragment)},l:function(r){re(e.$$.fragment,r)},m:function(r,a){se(e,r,a),i=!0},p:function(r,a){const l={};a&2&&(l.description=r[1].data.getGuide.short_description),a&2&&(l.title=r[1].data.getGuide.name),e.$set(l)},i:function(r){i||(J(e.$$.fragment,r),i=!0)},o:function(r){X(e.$$.fragment,r),i=!1},d:function(r){ae(e,r)}};return O("SvelteRegisterBlock",{block:o,id:me.name,type:"if",source:"(51:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:t}),o}function Ce(t){let e;const i={c:function(){e=V("404")},l:function(n){e=A(n,"404")},m:function(n,r){M(n,e,r)},p:I,i:I,o:I,d:function(n){n&&h(e)}};return O("SvelteRegisterBlock",{block:i,id:Ce.name,type:"else",source:"(93:0) {:else}",ctx:t}),i}function Ue(t){let e,i,o,n=t[1].data.getGuide.name+"",r,a,l,u,s,p,c,m,f,$,k,T,C,j,_,x,g,N,G=t[3]&&$e(t),E={ctx:t,current:null,token:null,hasCatch:!1,pending:Fe,then:ze,catch:qe,value:15};Pe(f=he(t[1].data.getGuide.guide),E),T=new Ne({props:{guide:t[1].data.getGuide},$$inline:!0}),j=new Me({props:{author:t[1].data.getGuide.user},$$inline:!0});function R(U){t[12](U)}let ee={$$slots:{default:[Je]},$$scope:{ctx:t}};t[0]!==void 0&&(ee.running=t[0]),x=new Ve({props:ee,$$inline:!0}),We.push(()=>Ye(x,"running",R));const W={c:function(){e=v("div"),i=v("div"),o=v("h1"),r=V(n),a=L(),l=v("div"),G&&G.c(),u=L(),s=v("div"),p=v("div"),c=v("section"),m=v("div"),E.block.c(),$=L(),k=v("div"),ie(T.$$.fragment),C=L(),ie(j.$$.fragment),_=L(),ie(x.$$.fragment),this.h()},l:function(D){e=w(D,"DIV",{class:!0});var P=y(e);i=w(P,"DIV",{class:!0});var H=y(i);o=w(H,"H1",{class:!0});var Q=y(o);r=A(Q,n),Q.forEach(h),a=q(H),l=w(H,"DIV",{});var F=y(l);G&&G.l(F),F.forEach(h),H.forEach(h),u=q(P),s=w(P,"DIV",{class:!0});var te=y(s);p=w(te,"DIV",{class:!0});var ke=y(p);c=w(ke,"SECTION",{});var xe=y(c);m=w(xe,"DIV",{class:!0});var Ge=y(m);E.block.l(Ge),Ge.forEach(h),xe.forEach(h),ke.forEach(h),$=q(te),k=w(te,"DIV",{class:!0});var ne=y(k);re(T.$$.fragment,ne),C=q(ne),re(j.$$.fragment,ne),ne.forEach(h),te.forEach(h),P.forEach(h),_=q(D),re(x.$$.fragment,D),this.h()},h:function(){S(o,"class","text-4xl font-bold"),b(o,B,62,6,2064),b(l,B,64,6,2135),S(i,"class","flex flex-wrap h-auto justify-between items-center"),b(i,B,61,4,1993),S(m,"class","markdown-content break-words"),b(m,B,75,10,2580),b(c,B,74,8,2560),S(p,"class","card p-4 h-fit"),b(p,B,73,6,2523),S(k,"class","grid grid-cols-1 auto-rows-min gap-8"),b(k,B,82,6,2819),S(s,"class","grid grid-auto-max auto-cols-fr gap-4"),b(s,B,72,4,2465),S(e,"class","grid gap-6 xlx:grid-flow-row"),b(e,B,60,2,1946)},m:function(D,P){M(D,e,P),d(e,i),d(i,o),d(o,r),d(i,a),d(i,l),G&&G.m(l,null),d(e,u),d(e,s),d(s,p),d(p,c),d(c,m),E.block.m(m,E.anchor=null),E.mount=()=>m,E.anchor=null,d(s,$),d(s,k),se(T,k,null),d(k,C),se(j,k,null),M(D,_,P),se(x,D,P),N=!0},p:function(D,P){t=D,(!N||P&2)&&n!==(n=t[1].data.getGuide.name+"")&&K(r,n),t[3]?G?G.p(t,P):(G=$e(t),G.c(),G.m(l,null)):G&&(G.d(1),G=null),E.ctx=t,P&2&&f!==(f=he(t[1].data.getGuide.guide))&&Pe(f,E)||Ze(E,t,P);const H={};P&2&&(H.guide=t[1].data.getGuide),T.$set(H);const Q={};P&2&&(Q.author=t[1].data.getGuide.user),j.$set(Q);const F={};P&65540&&(F.$$scope={dirty:P,ctx:t}),!g&&P&1&&(g=!0,F.running=t[0],et(()=>g=!1)),x.$set(F)},i:function(D){N||(J(T.$$.fragment,D),J(j.$$.fragment,D),J(x.$$.fragment,D),N=!0)},o:function(D){X(T.$$.fragment,D),X(j.$$.fragment,D),X(x.$$.fragment,D),N=!1},d:function(D){D&&h(e),G&&G.d(),E.block.d(),E.token=null,E=null,ae(T),ae(j),D&&h(_),ae(x,D)}};return O("SvelteRegisterBlock",{block:W,id:Ue.name,type:"if",source:"(60:31) ",ctx:t}),W}function He(t){let e,i,o=t[1].error.message+"",n;const r={c:function(){e=v("p"),i=V("Oh no... "),n=V(o),this.h()},l:function(l){e=w(l,"P",{});var u=y(e);i=A(u,"Oh no... "),n=A(u,o),u.forEach(h),this.h()},h:function(){b(e,B,58,2,1873)},m:function(l,u){M(l,e,u),d(e,i),d(e,n)},p:function(l,u){u&2&&o!==(o=l[1].error.message+"")&&K(n,o)},i:I,o:I,d:function(l){l&&h(e)}};return O("SvelteRegisterBlock",{block:r,id:He.name,type:"if",source:"(58:23) ",ctx:t}),r}function Le(t){let e,i;const o={c:function(){e=v("p"),i=V("Loading..."),this.h()},l:function(r){e=w(r,"P",{});var a=y(e);i=A(a,"Loading..."),a.forEach(h),this.h()},h:function(){b(e,B,56,2,1829)},m:function(r,a){M(r,e,a),d(e,i)},p:I,i:I,o:I,d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:o,id:Le.name,type:"if",source:"(56:0) {#if $guide.fetching}",ctx:t}),o}function $e(t){let e,i,o,n,r,a,l;const u={c:function(){e=v("button"),i=V("Edit"),o=L(),n=v("button"),r=V("Delete"),this.h()},l:function(p){e=w(p,"BUTTON",{class:!0});var c=y(e);i=A(c,"Edit"),c.forEach(h),o=q(p),n=w(p,"BUTTON",{class:!0});var m=y(n);r=A(m,"Delete"),m.forEach(h),this.h()},h:function(){S(e,"class","btn variant-ghost-primary"),b(e,B,66,10,2177),S(n,"class","btn variant-ghost-primary"),b(n,B,68,10,2316)},m:function(p,c){M(p,e,c),d(e,i),M(p,o,c),M(p,n,c),d(n,r),a||(l=[je(e,"click",t[10],!1,!1,!1,!1),je(n,"click",t[11],!1,!1,!1,!1)],a=!0)},p:I,d:function(p){p&&h(e),p&&h(o),p&&h(n),a=!1,tt(l)}};return O("SvelteRegisterBlock",{block:u,id:$e.name,type:"if",source:"(66:8) {#if canUserEdit}",ctx:t}),u}function qe(t){const e={c:I,l:I,m:I,p:I,d:I};return O("SvelteRegisterBlock",{block:e,id:qe.name,type:"catch",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function ze(t){let e,i=t[15]+"";const o={c:function(){e=v("p"),this.h()},l:function(r){e=w(r,"P",{});var a=y(e);a.forEach(h),this.h()},h:function(){b(e,B,77,14,2714)},m:function(r,a){M(r,e,a),e.innerHTML=i},p:function(r,a){a&2&&i!==(i=r[15]+"")&&(e.innerHTML=i)},d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:o,id:ze.name,type:"then",source:"(77:76)                <p>{@html guideRendered}",ctx:t}),o}function Fe(t){const e={c:I,l:I,m:I,p:I,d:I};return O("SvelteRegisterBlock",{block:e,id:Fe.name,type:"pending",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function Je(t){let e,i;const o={c:function(){e=v("span"),i=V(t[2]),this.h()},l:function(r){e=w(r,"SPAN",{});var a=y(e);i=A(a,t[2]),a.forEach(h),this.h()},h:function(){b(e,B,90,4,3054)},m:function(r,a){M(r,e,a),d(e,i)},p:function(r,a){a&4&&K(i,r[2])},d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:o,id:Je.name,type:"slot",source:"(90:2) <Toast bind:running={errorToast}>",ctx:t}),o}function ve(t){let e,i,o,n,r,a,l=!t[1].fetching&&!t[1].error&&t[1].data.getGuide&&me(t);const u=[Le,He,Ue,Ce],s=[];function p(m,f){return m[1].fetching?0:m[1].error?1:m[1].data.getGuide?2:3}o=p(t),n=s[o]=u[o](t);const c={c:function(){l&&l.c(),e=oe(),i=L(),n.c(),r=oe()},l:function(f){const $=Xe("svelte-bhfvpi",document.head);l&&l.l($),e=oe(),$.forEach(h),i=q(f),n.l(f),r=oe()},m:function(f,$){l&&l.m(document.head,null),d(document.head,e),M(f,i,$),s[o].m(f,$),M(f,r,$),a=!0},p:function(f,[$]){!f[1].fetching&&!f[1].error&&f[1].data.getGuide?l?(l.p(f,$),$&2&&J(l,1)):(l=me(f),l.c(),J(l,1),l.m(e.parentNode,e)):l&&(Te(),X(l,1,1,()=>{l=null}),_e());let k=o;o=p(f),o===k?s[o].p(f,$):(Te(),X(s[k],1,1,()=>{s[k]=null}),_e(),n=s[o],n?n.p(f,$):(n=s[o]=u[o](f),n.c()),J(n,1),n.m(r.parentNode,r))},i:function(f){a||(J(l),J(n),a=!0)},o:function(f){X(l),X(n),a=!1},d:function(f){l&&l.d(f),h(e),f&&h(i),s[o].d(f),f&&h(r)}};return O("SvelteRegisterBlock",{block:c,id:ve.name,type:"component",source:"",ctx:t}),c}function at(t,e,i){let o,n,r;le(fe,"user"),Ie(t,fe,g=>i(9,r=g));let{$$slots:a={},$$scope:l}=e;Ee("Page",a,[]);let{data:u}=e;const{guideId:s,guide:p}=u;le(p,"guide"),Ie(t,p,g=>i(1,n=g));const c=De();let m="",f=!1;const $=()=>{c.mutation(Re,{guideId:s}).toPromise().then(g=>{g.error?(console.error(g.error.message),i(2,m="Error deleting guide: "+g.error.message),i(0,f=!0)):ue(Z+"/guides")})},k={type:"confirm",title:"Delete Guide?",body:"Are you sure you wish to delete this guide?",response:g=>{g&&$()}},T=Se();t.$$.on_mount.push(function(){u===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&Oe.warn("<Page> was created without expected prop 'data'")});const C=["data"];Object.keys(e).forEach(g=>{!~C.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Oe.warn(`<Page> was created with unknown prop '${g}'`)});const j=()=>ue(Z+"/guide/"+s+"/edit"),_=()=>T.trigger(k);function x(g){f=g,i(0,f)}return t.$$set=g=>{"data"in g&&i(8,u=g.data)},t.$capture_state=()=>({DeleteGuideDocument:Re,GuideInfo:Ne,GuideAuthor:Me,user:fe,goto:ue,Toast:Ve,markdown:he,base:Z,MetaDescriptors:Ae,getContextClient:De,getModalStore:Se,data:u,guideId:s,guide:p,client:c,errorMessage:m,errorToast:f,deleteGuideFn:$,deleteModal:k,modalStore:T,canUserEdit:o,$guide:n,$user:r}),t.$inject_state=g=>{"data"in g&&i(8,u=g.data),"errorMessage"in g&&i(2,m=g.errorMessage),"errorToast"in g&&i(0,f=g.errorToast),"canUserEdit"in g&&i(3,o=g.canUserEdit)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&514&&i(3,o=r?.roles?.deleteContent||r?.id===n?.data?.getGuide?.user?.id),t.$$.dirty&1&&(f||i(2,m=""))},[f,n,m,o,s,p,k,T,u,r,j,_,x]}class $t extends we{constructor(e){super(e),be(this,e,at,ve,ye,{data:8}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ve.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{$t as component,mt as universal};
//# sourceMappingURL=11.32525054.js.map
