import{G as Qe,S as be,i as ye,s as xe,d as O,v as Ee,ar as ce,a0 as le,e as v,W as H,b as q,g as w,h as E,X as z,j as p,k as U,N as D,m as b,n as V,Q as h,Y as K,u as I,x as Ce,H as Z,a1 as De,F as Se,aE as _e,_ as ue,$ as We,f as oe,K as Xe,r as J,t as W,q as Pe,J as ie,L as re,O as se,R as ae,a7 as je,y as Ye,I as Ze,p as Re,a8 as et,T as tt,M as de,Z as Te,a6 as nt,a9 as ot,aa as it}from"../chunks/vendor.d4382513.js";import{n as rt,z as Oe}from"../chunks/graphql.fef59309.js";import{l as st}from"../chunks/gql.ff9241aa.js";import{p as he}from"../chunks/formatting.6f84ef8f.js";import{u as fe}from"../chunks/user.03a96bbf.js";import{T as Ve}from"../chunks/Toast.82ab98ce.js";import{m as pe}from"../chunks/markdown.b94312d7.js";import{M as Ne}from"../chunks/MetaDescriptors.df899d1d.js";const at=async({params:t,parent:e})=>({...t,...await st({guide:Qe({query:rt,client:(await e()).client,variables:{guide:t.guideId}})})}),wt=Object.freeze(Object.defineProperty({__proto__:null,load:at},Symbol.toStringTag,{value:"Module"})),Y="src/lib/components/guides/GuideInfo.svelte";function ge(t){let e,i,o,n,r=t[2]("entry.info")+"",c,s,l,a,d=t[2]("entry.created-at")+"",u,$,f,m=he(t[0].created_at)+"",x,j;const N={c:function(){e=v("div"),i=v("section"),o=v("div"),n=v("h3"),c=H(r),s=q(),l=v("span"),a=v("strong"),u=H(d),$=H(":"),f=q(),x=H(m),j=v("br"),this.h()},l:function(S){e=w(S,"DIV",{class:!0});var k=E(e);i=w(k,"SECTION",{});var g=E(i);o=w(g,"DIV",{class:!0});var C=E(o);n=w(C,"H3",{class:!0});var G=E(n);c=z(G,r),G.forEach(p),s=U(C),l=w(C,"SPAN",{});var y=E(l);a=w(y,"STRONG",{});var T=E(a);u=z(T,d),$=z(T,":"),T.forEach(p),f=U(y),x=z(y,m),y.forEach(p),j=w(C,"BR",{}),C.forEach(p),g.forEach(p),k.forEach(p),this.h()},h:function(){D(n,"class","text-2xl my-4 font-bold"),b(n,Y,13,6,250),b(a,Y,14,12,322),b(l,Y,14,6,316),b(j,Y,14,92,402),D(o,"class","text-lg"),b(o,Y,12,4,222),b(i,Y,11,2,208),D(e,"class","card p-4"),b(e,Y,10,0,183)},m:function(S,k){V(S,e,k),h(e,i),h(i,o),h(o,n),h(n,c),h(o,s),h(o,l),h(l,a),h(a,u),h(a,$),h(l,f),h(l,x),h(o,j)},p:function(S,[k]){k&4&&r!==(r=S[2]("entry.info")+"")&&K(c,r),k&4&&d!==(d=S[2]("entry.created-at")+"")&&K(u,d),k&1&&m!==(m=he(S[0].created_at)+"")&&K(x,m)},i:I,o:I,d:function(S){S&&p(e)}};return O("SvelteRegisterBlock",{block:N,id:ge.name,type:"component",source:"",ctx:t}),N}function ct(t,e,i){let o,n=I,r=()=>(n(),n=Ce(a,u=>i(2,o=u)),a);t.$$.on_destroy.push(()=>n());let{$$slots:c={},$$scope:s}=e;Ee("GuideInfo",c,[]);let{guide:l}=e;const{t:a}=ce();le(a,"t"),r(),t.$$.on_mount.push(function(){l===void 0&&!("guide"in e||t.$$.bound[t.$$.props.guide])&&console.warn("<GuideInfo> was created without expected prop 'guide'")});const d=["guide"];return Object.keys(e).forEach(u=>{!~d.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<GuideInfo> was created with unknown prop '${u}'`)}),t.$$set=u=>{"guide"in u&&i(0,l=u.guide)},t.$capture_state=()=>({prettyDate:he,getTranslate:ce,guide:l,t:a,$t:o}),t.$inject_state=u=>{"guide"in u&&i(0,l=u.guide)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[l,a,o]}class Ae extends be{constructor(e){super(e),ye(this,e,ct,ge,xe,{guide:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideInfo",options:e,id:ge.name})}get guide(){throw new Error("<GuideInfo>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set guide(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const F="src/lib/components/guides/GuideAuthor.svelte";function me(t){let e,i,o,n,r=t[2]("author")+"",c,s,l,a,d,u,$,f,m,x=t[0].username+"",j,N,R,S,k=t[2]("role.writer")+"",g;const C={c:function(){e=v("div"),i=v("section"),o=v("div"),n=v("h3"),c=H(r),s=q(),l=v("div"),a=v("div"),d=v("div"),$=q(),f=v("div"),m=v("a"),j=H(x),R=q(),S=v("div"),g=H(k),this.h()},l:function(y){e=w(y,"DIV",{class:!0});var T=E(e);i=w(T,"SECTION",{});var ee=E(i);o=w(ee,"DIV",{class:!0});var X=E(o);n=w(X,"H3",{class:!0});var A=E(n);c=z(A,r),A.forEach(p),s=U(X),l=w(X,"DIV",{class:!0});var _=E(l);a=w(_,"DIV",{class:!0});var P=E(a);d=w(P,"DIV",{class:!0,style:!0}),E(d).forEach(p),$=U(P),f=w(P,"DIV",{class:!0});var M=E(f);m=w(M,"A",{href:!0,class:!0});var Q=E(m);j=z(Q,x),Q.forEach(p),R=U(M),S=w(M,"DIV",{});var L=E(S);g=z(L,k),L.forEach(p),M.forEach(p),P.forEach(p),_.forEach(p),X.forEach(p),ee.forEach(p),T.forEach(p),this.h()},h:function(){D(n,"class","text-2xl my-4 font-bold"),b(n,F,13,6,253),D(d,"class","rounded-full bg-cover w-14 h-14"),D(d,"style",u=`background-image: url("${t[0].avatar}")`),b(d,F,17,10,438),D(m,"href",N=Z+"/user/"+t[0].id+"/"),D(m,"class","text-yellow-500 underline"),b(m,F,19,12,593),b(S,F,20,12,696),D(f,"class","grid grid-flow-row"),b(f,F,18,10,548),D(a,"class","grid grid-flow-col auto-cols-min gap-x-4"),b(a,F,16,8,373),D(l,"class","grid auto-rows-min text-lg gap-y-4"),b(l,F,15,6,316),D(o,"class","grid grid-flow-row gap-y-2"),b(o,F,12,4,206),b(i,F,11,2,192),D(e,"class","card p-4"),b(e,F,10,0,167)},m:function(y,T){V(y,e,T),h(e,i),h(i,o),h(o,n),h(n,c),h(o,s),h(o,l),h(l,a),h(a,d),h(a,$),h(a,f),h(f,m),h(m,j),h(f,R),h(f,S),h(S,g)},p:function(y,[T]){T&4&&r!==(r=y[2]("author")+"")&&K(c,r),T&1&&u!==(u=`background-image: url("${y[0].avatar}")`)&&D(d,"style",u),T&1&&x!==(x=y[0].username+"")&&K(j,x),T&1&&N!==(N=Z+"/user/"+y[0].id+"/")&&D(m,"href",N),T&4&&k!==(k=y[2]("role.writer")+"")&&K(g,k)},i:I,o:I,d:function(y){y&&p(e)}};return O("SvelteRegisterBlock",{block:C,id:me.name,type:"component",source:"",ctx:t}),C}function lt(t,e,i){let o,n=I,r=()=>(n(),n=Ce(a,u=>i(2,o=u)),a);t.$$.on_destroy.push(()=>n());let{$$slots:c={},$$scope:s}=e;Ee("GuideAuthor",c,[]);let{author:l}=e;const{t:a}=ce();le(a,"t"),r(),t.$$.on_mount.push(function(){l===void 0&&!("author"in e||t.$$.bound[t.$$.props.author])&&console.warn("<GuideAuthor> was created without expected prop 'author'")});const d=["author"];return Object.keys(e).forEach(u=>{!~d.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<GuideAuthor> was created with unknown prop '${u}'`)}),t.$$set=u=>{"author"in u&&i(0,l=u.author)},t.$capture_state=()=>({base:Z,getTranslate:ce,author:l,t:a,$t:o}),t.$inject_state=u=>{"author"in u&&i(0,l=u.author)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[l,a,o]}class Me extends be{constructor(e){super(e),ye(this,e,lt,me,xe,{author:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideAuthor",options:e,id:me.name})}get author(){throw new Error("<GuideAuthor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set author(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Be}=We,B="src/routes/guide/[guideId]/+page.svelte";function $e(t){let e,i;e=new Ne({props:{description:t[1].data.getGuide.short_description,title:t[1].data.getGuide.name},$$inline:!0});const o={c:function(){ie(e.$$.fragment)},l:function(r){re(e.$$.fragment,r)},m:function(r,c){se(e,r,c),i=!0},p:function(r,c){const s={};c&2&&(s.description=r[1].data.getGuide.short_description),c&2&&(s.title=r[1].data.getGuide.name),e.$set(s)},i:function(r){i||(J(e.$$.fragment,r),i=!0)},o:function(r){W(e.$$.fragment,r),i=!1},d:function(r){ae(e,r)}};return O("SvelteRegisterBlock",{block:o,id:$e.name,type:"if",source:"(51:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:t}),o}function qe(t){let e;const i={c:function(){e=H("404")},l:function(n){e=z(n,"404")},m:function(n,r){V(n,e,r)},p:I,i:I,o:I,d:function(n){n&&p(e)}};return O("SvelteRegisterBlock",{block:i,id:qe.name,type:"else",source:"(94:0) {:else}",ctx:t}),i}function Ue(t){let e,i,o,n=t[1].data.getGuide.name+"",r,c,s,l,a,d,u,$,f,m,x,j,N,R,S,k,g,C,G=t[3]&&ve(t),y={ctx:t,current:null,token:null,hasCatch:!1,pending:Je,then:Le,catch:Fe,value:15};je(f=pe(t[1].data.getGuide.guide),y),j=new Ae({props:{guide:t[1].data.getGuide},$$inline:!0}),R=new Me({props:{author:t[1].data.getGuide.user},$$inline:!0});function T(A){t[12](A)}let ee={$$slots:{default:[Ke]},$$scope:{ctx:t}};t[0]!==void 0&&(ee.running=t[0]),k=new Ve({props:ee,$$inline:!0}),Ye.push(()=>Ze(k,"running",T));const X={c:function(){e=v("div"),i=v("div"),o=v("h1"),r=H(n),c=q(),s=v("div"),G&&G.c(),l=q(),a=v("div"),d=v("div"),u=v("section"),$=v("div"),y.block.c(),m=q(),x=v("div"),ie(j.$$.fragment),N=q(),ie(R.$$.fragment),S=q(),ie(k.$$.fragment),this.h()},l:function(_){e=w(_,"DIV",{class:!0});var P=E(e);i=w(P,"DIV",{class:!0});var M=E(i);o=w(M,"H1",{class:!0});var Q=E(o);r=z(Q,n),Q.forEach(p),c=U(M),s=w(M,"DIV",{});var L=E(s);G&&G.l(L),L.forEach(p),M.forEach(p),l=U(P),a=w(P,"DIV",{class:!0});var te=E(a);d=w(te,"DIV",{class:!0});var ke=E(d);u=w(ke,"SECTION",{});var Ge=E(u);$=w(Ge,"DIV",{class:!0});var Ie=E($);y.block.l(Ie),Ie.forEach(p),Ge.forEach(p),ke.forEach(p),m=U(te),x=w(te,"DIV",{class:!0});var ne=E(x);re(j.$$.fragment,ne),N=U(ne),re(R.$$.fragment,ne),ne.forEach(p),te.forEach(p),P.forEach(p),S=U(_),re(k.$$.fragment,_),this.h()},h:function(){D(o,"class","text-4xl font-bold"),b(o,B,72,6,2064),b(s,B,74,6,2135),D(i,"class","flex flex-wrap h-auto justify-between items-center"),b(i,B,71,4,1993),D($,"class","markdown-content break-words"),b($,B,85,10,2580),b(u,B,84,8,2560),D(d,"class","card p-4 h-fit"),b(d,B,83,6,2523),D(x,"class","grid grid-cols-1 auto-rows-min gap-8"),b(x,B,93,6,2857),D(a,"class","grid grid-auto-max auto-cols-fr gap-4"),b(a,B,82,4,2465),D(e,"class","grid gap-6 xlx:grid-flow-row"),b(e,B,70,2,1946)},m:function(_,P){V(_,e,P),h(e,i),h(i,o),h(o,r),h(i,c),h(i,s),G&&G.m(s,null),h(e,l),h(e,a),h(a,d),h(d,u),h(u,$),y.block.m($,y.anchor=null),y.mount=()=>$,y.anchor=null,h(a,m),h(a,x),se(j,x,null),h(x,N),se(R,x,null),V(_,S,P),se(k,_,P),C=!0},p:function(_,P){t=_,(!C||P&2)&&n!==(n=t[1].data.getGuide.name+"")&&K(r,n),t[3]?G?G.p(t,P):(G=ve(t),G.c(),G.m(s,null)):G&&(G.d(1),G=null),y.ctx=t,P&2&&f!==(f=pe(t[1].data.getGuide.guide))&&je(f,y)||et(y,t,P);const M={};P&2&&(M.guide=t[1].data.getGuide),j.$set(M);const Q={};P&2&&(Q.author=t[1].data.getGuide.user),R.$set(Q);const L={};P&65540&&(L.$$scope={dirty:P,ctx:t}),!g&&P&1&&(g=!0,L.running=t[0],tt(()=>g=!1)),k.$set(L)},i:function(_){C||(J(j.$$.fragment,_),J(R.$$.fragment,_),J(k.$$.fragment,_),C=!0)},o:function(_){W(j.$$.fragment,_),W(R.$$.fragment,_),W(k.$$.fragment,_),C=!1},d:function(_){_&&(p(e),p(S)),G&&G.d(),y.block.d(),y.token=null,y=null,ae(j),ae(R),ae(k,_)}};return O("SvelteRegisterBlock",{block:X,id:Ue.name,type:"if",source:"(60:31) ",ctx:t}),X}function He(t){let e,i,o=t[1].error.message+"",n;const r={c:function(){e=v("p"),i=H("Oh no... "),n=H(o),this.h()},l:function(s){e=w(s,"P",{});var l=E(e);i=z(l,"Oh no... "),n=z(l,o),l.forEach(p),this.h()},h:function(){b(e,B,68,2,1873)},m:function(s,l){V(s,e,l),h(e,i),h(e,n)},p:function(s,l){l&2&&o!==(o=s[1].error.message+"")&&K(n,o)},i:I,o:I,d:function(s){s&&p(e)}};return O("SvelteRegisterBlock",{block:r,id:He.name,type:"if",source:"(58:23) ",ctx:t}),r}function ze(t){let e,i="Loading...";const o={c:function(){e=v("p"),e.textContent=i,this.h()},l:function(r){e=w(r,"P",{"data-svelte-h":!0}),de(e)!=="svelte-qdsr2u"&&(e.textContent=i),this.h()},h:function(){b(e,B,66,2,1829)},m:function(r,c){V(r,e,c)},p:I,i:I,o:I,d:function(r){r&&p(e)}};return O("SvelteRegisterBlock",{block:o,id:ze.name,type:"if",source:"(56:0) {#if $guide.fetching}",ctx:t}),o}function ve(t){let e,i="Edit",o,n,r="Delete",c,s;const l={c:function(){e=v("button"),e.textContent=i,o=q(),n=v("button"),n.textContent=r,this.h()},l:function(d){e=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1oidlq5"&&(e.textContent=i),o=U(d),n=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),de(n)!=="svelte-tfawqf"&&(n.textContent=r),this.h()},h:function(){D(e,"class","btn variant-ghost-primary"),b(e,B,76,10,2177),D(n,"class","btn variant-ghost-primary"),b(n,B,78,10,2316)},m:function(d,u){V(d,e,u),V(d,o,u),V(d,n,u),c||(s=[Te(e,"click",t[10],!1,!1,!1,!1),Te(n,"click",t[11],!1,!1,!1,!1)],c=!0)},p:I,d:function(d){d&&(p(e),p(o),p(n)),c=!1,nt(s)}};return O("SvelteRegisterBlock",{block:l,id:ve.name,type:"if",source:"(66:8) {#if canUserEdit}",ctx:t}),l}function Fe(t){const e={c:I,l:I,m:I,p:I,d:I};return O("SvelteRegisterBlock",{block:e,id:Fe.name,type:"catch",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function Le(t){let e,i,o=t[15]+"";const n={c:function(){e=v("p"),i=new ot(!1),this.h()},l:function(c){e=w(c,"P",{});var s=E(e);i=it(s,!1),s.forEach(p),this.h()},h:function(){i.a=null,b(e,B,88,14,2752)},m:function(c,s){V(c,e,s),i.m(o,e)},p:function(c,s){s&2&&o!==(o=c[15]+"")&&i.p(o)},d:function(c){c&&p(e)}};return O("SvelteRegisterBlock",{block:n,id:Le.name,type:"then",source:"(77:76)                <!-- eslint-disable -->               <p>{@html guideRendered}",ctx:t}),n}function Je(t){const e={c:I,l:I,m:I,p:I,d:I};return O("SvelteRegisterBlock",{block:e,id:Je.name,type:"pending",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function Ke(t){let e,i;const o={c:function(){e=v("span"),i=H(t[2]),this.h()},l:function(r){e=w(r,"SPAN",{});var c=E(e);i=z(c,t[2]),c.forEach(p),this.h()},h:function(){b(e,B,101,4,3092)},m:function(r,c){V(r,e,c),h(e,i)},p:function(r,c){c&4&&K(i,r[2])},d:function(r){r&&p(e)}};return O("SvelteRegisterBlock",{block:o,id:Ke.name,type:"slot",source:"(91:2) <Toast bind:running={errorToast}>",ctx:t}),o}function we(t){let e,i,o,n,r,c,s=!t[1].fetching&&!t[1].error&&t[1].data.getGuide&&$e(t);const l=[ze,He,Ue,qe],a=[];function d($,f){return $[1].fetching?0:$[1].error?1:$[1].data.getGuide?2:3}o=d(t),n=a[o]=l[o](t);const u={c:function(){s&&s.c(),e=oe(),i=q(),n.c(),r=oe()},l:function(f){const m=Xe("svelte-bhfvpi",document.head);s&&s.l(m),e=oe(),m.forEach(p),i=U(f),n.l(f),r=oe()},m:function(f,m){s&&s.m(document.head,null),h(document.head,e),V(f,i,m),a[o].m(f,m),V(f,r,m),c=!0},p:function(f,[m]){!f[1].fetching&&!f[1].error&&f[1].data.getGuide?s?(s.p(f,m),m&2&&J(s,1)):(s=$e(f),s.c(),J(s,1),s.m(e.parentNode,e)):s&&(Re(),W(s,1,1,()=>{s=null}),Pe());let x=o;o=d(f),o===x?a[o].p(f,m):(Re(),W(a[x],1,1,()=>{a[x]=null}),Pe(),n=a[o],n?n.p(f,m):(n=a[o]=l[o](f),n.c()),J(n,1),n.m(r.parentNode,r))},i:function(f){c||(J(s),J(n),c=!0)},o:function(f){W(s),W(n),c=!1},d:function(f){f&&(p(i),p(r)),s&&s.d(f),p(e),a[o].d(f)}};return O("SvelteRegisterBlock",{block:u,id:we.name,type:"component",source:"",ctx:t}),u}function ut(t,e,i){let o,n,r;le(fe,"user"),De(t,fe,g=>i(9,r=g));let{$$slots:c={},$$scope:s}=e;Ee("Page",c,[]);let{data:l}=e;const{guideId:a,guide:d}=l;le(d,"guide"),De(t,d,g=>i(1,n=g));const u=Se();let $="",f=!1;const m=()=>{u.mutation(Oe,{guideId:a}).toPromise().then(g=>{g.error?(console.error(g.error.message),i(2,$="Error deleting guide: "+g.error.message),i(0,f=!0)):ue(Z+"/guides")})},x={type:"confirm",title:"Delete Guide?",body:"Are you sure you wish to delete this guide?",response:g=>{g&&m()}},j=_e();t.$$.on_mount.push(function(){l===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&Be.warn("<Page> was created without expected prop 'data'")});const N=["data"];Object.keys(e).forEach(g=>{!~N.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Be.warn(`<Page> was created with unknown prop '${g}'`)});const R=()=>ue(Z+"/guide/"+a+"/edit"),S=()=>j.trigger(x);function k(g){f=g,i(0,f)}return t.$$set=g=>{"data"in g&&i(8,l=g.data)},t.$capture_state=()=>({DeleteGuideDocument:Oe,GuideInfo:Ae,GuideAuthor:Me,user:fe,goto:ue,Toast:Ve,markdown:pe,base:Z,MetaDescriptors:Ne,getContextClient:Se,getModalStore:_e,data:l,guideId:a,guide:d,client:u,errorMessage:$,errorToast:f,deleteGuideFn:m,deleteModal:x,modalStore:j,canUserEdit:o,$guide:n,$user:r}),t.$inject_state=g=>{"data"in g&&i(8,l=g.data),"errorMessage"in g&&i(2,$=g.errorMessage),"errorToast"in g&&i(0,f=g.errorToast),"canUserEdit"in g&&i(3,o=g.canUserEdit)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&514&&i(3,o=r?.roles?.deleteContent||r?.id===n?.data?.getGuide?.user?.id),t.$$.dirty&1&&(f||i(2,$=""))},[f,n,$,o,a,d,x,j,l,r,R,S,k]}class bt extends be{constructor(e){super(e),ye(this,e,ut,we,xe,{data:8}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:we.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{bt as component,wt as universal};
//# sourceMappingURL=11.7e4ab613.js.map
