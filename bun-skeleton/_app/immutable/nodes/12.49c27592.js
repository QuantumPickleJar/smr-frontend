import{S as me,i as pe,d as k,s as $e,y as he,I as ve,v as be,F as Q,G as U,$ as Ee,a0 as ye,Z as X,H as Z,_ as Ge,f as W,b as N,e as T,K as M,J as V,L as ke,j as m,k as C,g as _,h as j,N as B,M as z,O as Y,m as O,R as G,n as E,Q as F,r as b,t as y,q as ee,U as we,T as H,p as te,X as se,u as I}from"../chunks/vendor.c6258f1b.js";import{n as ie,E as ne}from"../chunks/graphql.fef59309.js";import{T as re}from"../chunks/Toast.0f68c216.js";import{G as ae}from"../chunks/GuideForm.3ee94b46.js";import{M as ce}from"../chunks/MetaDescriptors.c880e906.js";const xe=async({params:i})=>({...i}),Re=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"})),{console:oe}=Ge,R="src/routes/guide/[guideId]/edit/+page.svelte";function q(i){let e,s;e=new ce({props:{description:"Editing guide '"+i[2].data.getGuide.short_description+"'",title:"Edit guide '"+i[2].data.getGuide.name+"'"},$$inline:!0});const a={c:function(){V(e.$$.fragment)},l:function(t){z(e.$$.fragment,t)},m:function(t,n){F(e,t,n),s=!0},p:function(t,n){const c={};n&4&&(c.description="Editing guide '"+t[2].data.getGuide.short_description+"'"),n&4&&(c.title="Edit guide '"+t[2].data.getGuide.name+"'"),e.$set(c)},i:function(t){s||(b(e.$$.fragment,t),s=!0)},o:function(t){y(e.$$.fragment,t),s=!1},d:function(t){H(e,t)}};return k("SvelteRegisterBlock",{block:a,id:q.name,type:"if",source:"(43:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:i}),a}function ue(i){let e,s;e=new ae({props:{onSubmit:i[4],initialValues:i[2].data.getGuide,submitText:"Save"},$$inline:!0});const a={c:function(){V(e.$$.fragment)},l:function(t){z(e.$$.fragment,t)},m:function(t,n){F(e,t,n),s=!0},p:function(t,n){const c={};n&4&&(c.initialValues=t[2].data.getGuide),e.$set(c)},i:function(t){s||(b(e.$$.fragment,t),s=!0)},o:function(t){y(e.$$.fragment,t),s=!1},d:function(t){H(e,t)}};return k("SvelteRegisterBlock",{block:a,id:ue.name,type:"else",source:"(58:4) {:else}",ctx:i}),a}function fe(i){let e,s,a=i[2].error.message+"",r;const t={c:function(){e=T("p"),s=M("Oh no... "),r=M(a),this.h()},l:function(c){e=_(c,"P",{});var u=j(e);s=B(u,"Oh no... "),r=B(u,a),u.forEach(m),this.h()},h:function(){O(e,R,56,6,1663)},m:function(c,u){E(c,e,u),G(e,s),G(e,r)},p:function(c,u){u&4&&a!==(a=c[2].error.message+"")&&se(r,a)},i:I,o:I,d:function(c){c&&m(e)}};return k("SvelteRegisterBlock",{block:t,id:fe.name,type:"if",source:"(56:27) ",ctx:i}),t}function le(i){let e,s;const a={c:function(){e=T("p"),s=M("Loading..."),this.h()},l:function(t){e=_(t,"P",{});var n=j(e);s=B(n,"Loading..."),n.forEach(m),this.h()},h:function(){O(e,R,54,6,1611)},m:function(t,n){E(t,e,n),G(e,s)},p:I,i:I,o:I,d:function(t){t&&m(e)}};return k("SvelteRegisterBlock",{block:a,id:le.name,type:"if",source:"(54:4) {#if $guide.fetching}",ctx:i}),a}function de(i){let e,s;const a={c:function(){e=T("span"),s=M(i[1]),this.h()},l:function(t){e=_(t,"SPAN",{});var n=j(e);s=B(n,i[1]),n.forEach(m),this.h()},h:function(){O(e,R,64,2,1867)},m:function(t,n){E(t,e,n),G(e,s)},p:function(t,n){n&2&&se(s,t[1])},d:function(t){t&&m(e)}};return k("SvelteRegisterBlock",{block:a,id:de.name,type:"slot",source:"(64:0) <Toast bind:running={errorToast}>",ctx:i}),a}function D(i){let e,s,a,r,t,n,c,u,d,h,p,w,x,l=!i[2].fetching&&!i[2].error&&i[2].data.getGuide&&q(i);const f=[le,fe,ue],$=[];function L(v,o){return v[2].fetching?0:v[2].error?1:2}u=L(i),d=$[u]=f[u](i);function ge(v){i[6](v)}let A={$$slots:{default:[de]},$$scope:{ctx:i}};i[0]!==void 0&&(A.running=i[0]),p=new re({props:A,$$inline:!0}),he.push(()=>ve(p,"running",ge));const J={c:function(){l&&l.c(),e=W(),s=N(),a=T("h1"),r=M("Edit Guide"),t=N(),n=T("div"),c=T("section"),d.c(),h=N(),V(p.$$.fragment),this.h()},l:function(o){const g=ke("svelte-2z35li",document.head);l&&l.l(g),e=W(),g.forEach(m),s=C(o),a=_(o,"H1",{class:!0});var S=j(a);r=B(S,"Edit Guide"),S.forEach(m),t=C(o),n=_(o,"DIV",{class:!0});var P=j(n);c=_(P,"SECTION",{});var K=j(c);d.l(K),K.forEach(m),P.forEach(m),h=C(o),z(p.$$.fragment,o),this.h()},h:function(){Y(a,"class","text-4xl my-4 font-bold"),O(a,R,49,0,1491),O(c,R,52,2,1569),Y(n,"class","card p-4"),O(n,R,51,0,1544)},m:function(o,g){l&&l.m(document.head,null),G(document.head,e),E(o,s,g),E(o,a,g),G(a,r),E(o,t,g),E(o,n,g),G(n,c),$[u].m(c,null),E(o,h,g),F(p,o,g),x=!0},p:function(o,[g]){!o[2].fetching&&!o[2].error&&o[2].data.getGuide?l?(l.p(o,g),g&4&&b(l,1)):(l=q(o),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(te(),y(l,1,1,()=>{l=null}),ee());let S=u;u=L(o),u===S?$[u].p(o,g):(te(),y($[S],1,1,()=>{$[S]=null}),ee(),d=$[u],d?d.p(o,g):(d=$[u]=f[u](o),d.c()),b(d,1),d.m(c,null));const P={};g&514&&(P.$$scope={dirty:g,ctx:o}),!w&&g&1&&(w=!0,P.running=o[0],we(()=>w=!1)),p.$set(P)},i:function(o){x||(b(l),b(d),b(p.$$.fragment,o),x=!0)},o:function(o){y(l),y(d),y(p.$$.fragment,o),x=!1},d:function(o){l&&l.d(o),m(e),o&&m(s),o&&m(a),o&&m(t),o&&m(n),$[u].d(),o&&m(h),H(p,o)}};return k("SvelteRegisterBlock",{block:J,id:D.name,type:"component",source:"",ctx:i}),J}function Se(i,e,s){let a,{$$slots:r={},$$scope:t}=e;be("Page",r,[]);let{data:n}=e;const{guideId:c}=n,u=Q();let d="",h=!1;const p=U({query:ie,client:u,variables:{guide:c}});Ee(p,"guide"),ye(i,p,f=>s(2,a=f));const w=f=>{u.mutation(ne,{guideId:c,guide:f}).toPromise().then($=>{$.error?(console.error($.error.message),s(1,d="Error editing guide: "+$.error.message),s(0,h=!0)):X(Z+"/guide/"+$.data.updateGuide.id)})};i.$$.on_mount.push(function(){n===void 0&&!("data"in e||i.$$.bound[i.$$.props.data])&&oe.warn("<Page> was created without expected prop 'data'")});const x=["data"];Object.keys(e).forEach(f=>{!~x.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&oe.warn(`<Page> was created with unknown prop '${f}'`)});function l(f){h=f,s(0,h)}return i.$$set=f=>{"data"in f&&s(5,n=f.data)},i.$capture_state=()=>({getContextClient:Q,queryStore:U,EditGuideDocument:ne,GetGuideDocument:ie,Toast:re,goto:X,GuideForm:ae,base:Z,MetaDescriptors:ce,data:n,guideId:c,client:u,errorMessage:d,errorToast:h,guide:p,onSubmit:w,$guide:a}),i.$inject_state=f=>{"data"in f&&s(5,n=f.data),"errorMessage"in f&&s(1,d=f.errorMessage),"errorToast"in f&&s(0,h=f.errorToast)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty&1&&(h||s(1,d=""))},[h,d,a,p,w,n,l]}class Ie extends me{constructor(e){super(e),pe(this,e,Se,D,$e,{data:5}),k("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:D.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ie as component,Re as universal};
//# sourceMappingURL=12.49c27592.js.map
