import{S as pt,i as gt,d as S,s as ht,y as vt,I as bt,v as xt,F as K,G as Q,a0 as yt,a1 as wt,_ as W,H as X,al as Y,$ as Et,f as U,b as V,e as P,J as G,K as St,j as p,k as q,g as T,M as at,h as I,L as H,N as Z,m as _,Q as O,n as x,O as z,r as b,t as E,q as tt,T as kt,R as A,p as et,W as B,X as N,Y as st,u as C}from"../chunks/vendor.d4382513.js";import{p as ot,q as nt}from"../chunks/graphql.fef59309.js";import{T as rt}from"../chunks/Toast.82ab98ce.js";import{M as ct}from"../chunks/ModForm.3223a0cc.js";import{M as lt}from"../chunks/MetaDescriptors.df899d1d.js";const Mt=async({params:o})=>({...o}),Rt=Object.freeze(Object.defineProperty({__proto__:null,load:Mt},Symbol.toStringTag,{value:"Module"})),{console:it}=Et,j="src/routes/mod/[modId]/edit/+page.svelte";function D(o){let t,n;t=new lt({props:{description:"Editing mod "+o[1].data.mod.name,title:"Edit mod "+o[1].data.mod.name,image:o[1].data.mod.logo},$$inline:!0});const r={c:function(){G(t.$$.fragment)},l:function(e){H(t.$$.fragment,e)},m:function(e,a){z(t,e,a),n=!0},p:function(e,a){const l={};a&2&&(l.description="Editing mod "+e[1].data.mod.name),a&2&&(l.title="Edit mod "+e[1].data.mod.name),a&2&&(l.image=e[1].data.mod.logo),t.$set(l)},i:function(e){n||(b(t.$$.fragment,e),n=!0)},o:function(e){E(t.$$.fragment,e),n=!1},d:function(e){A(t,e)}};return S("SvelteRegisterBlock",{block:r,id:D.name,type:"if",source:"(50:2) {#if !$mod.fetching && !$mod.error && $mod.data.mod}",ctx:o}),r}function ft(o){let t,n;t=new ct({props:{onSubmit:o[5],initialValues:o[3],editing:!0,submitText:"Save"},$$inline:!0});const r={c:function(){G(t.$$.fragment)},l:function(e){H(t.$$.fragment,e)},m:function(e,a){z(t,e,a),n=!0},p:function(e,a){const l={};a&8&&(l.initialValues=e[3]),t.$set(l)},i:function(e){n||(b(t.$$.fragment,e),n=!0)},o:function(e){E(t.$$.fragment,e),n=!1},d:function(e){A(t,e)}};return S("SvelteRegisterBlock",{block:r,id:ft.name,type:"else",source:"(66:4) {:else}",ctx:o}),r}function ut(o){let t,n,r=o[1].error.message+"",i;const e={c:function(){t=P("p"),n=B("Oh no... "),i=B(r),this.h()},l:function(l){t=T(l,"P",{});var f=I(t);n=N(f,"Oh no... "),i=N(f,r),f.forEach(p),this.h()},h:function(){_(t,j,74,6,1767)},m:function(l,f){x(l,t,f),O(t,n),O(t,i)},p:function(l,f){f&2&&r!==(r=l[1].error.message+"")&&st(i,r)},i:C,o:C,d:function(l){l&&p(t)}};return S("SvelteRegisterBlock",{block:e,id:ut.name,type:"if",source:"(64:25) ",ctx:o}),e}function dt(o){let t,n="Loading...";const r={c:function(){t=P("p"),t.textContent=n,this.h()},l:function(e){t=T(e,"P",{"data-svelte-h":!0}),at(t)!=="svelte-qdsr2u"&&(t.textContent=n),this.h()},h:function(){_(t,j,72,6,1717)},m:function(e,a){x(e,t,a)},p:C,i:C,o:C,d:function(e){e&&p(t)}};return S("SvelteRegisterBlock",{block:r,id:dt.name,type:"if",source:"(62:4) {#if $mod.fetching}",ctx:o}),r}function mt(o){let t,n;const r={c:function(){t=P("span"),n=B(o[2]),this.h()},l:function(e){t=T(e,"SPAN",{});var a=I(t);n=N(a,o[2]),a.forEach(p),this.h()},h:function(){_(t,j,82,2,1961)},m:function(e,a){x(e,t,a),O(t,n)},p:function(e,a){a&4&&st(n,e[2])},d:function(e){e&&p(t)}};return S("SvelteRegisterBlock",{block:r,id:mt.name,type:"slot",source:"(72:0) <Toast bind:running={errorToast}>",ctx:o}),r}function F(o){let t,n,r,i="Edit Mod",e,a,l,f,$,h,d,v,y,u=!o[1].fetching&&!o[1].error&&o[1].data.mod&&D(o);const R=[dt,ut,ft],c=[];function w(g,s){return g[1].fetching?0:g[1].error?1:2}f=w(o),$=c[f]=R[f](o);function $t(g){o[7](g)}let J={$$slots:{default:[mt]},$$scope:{ctx:o}};o[0]!==void 0&&(J.running=o[0]),d=new rt({props:J,$$inline:!0}),vt.push(()=>bt(d,"running",$t));const L={c:function(){u&&u.c(),t=U(),n=V(),r=P("h1"),r.textContent=i,e=V(),a=P("div"),l=P("section"),$.c(),h=V(),G(d.$$.fragment),this.h()},l:function(s){const m=St("svelte-q8g25b",document.head);u&&u.l(m),t=U(),m.forEach(p),n=q(s),r=T(s,"H1",{class:!0,"data-svelte-h":!0}),at(r)!=="svelte-1r6fy85"&&(r.textContent=i),e=q(s),a=T(s,"DIV",{class:!0});var k=I(a);l=T(k,"SECTION",{});var M=I(l);$.l(M),M.forEach(p),k.forEach(p),h=q(s),H(d.$$.fragment,s),this.h()},h:function(){Z(r,"class","text-4xl my-4 font-bold"),_(r,j,67,0,1601),_(l,j,70,2,1677),Z(a,"class","card p-4"),_(a,j,69,0,1652)},m:function(s,m){u&&u.m(document.head,null),O(document.head,t),x(s,n,m),x(s,r,m),x(s,e,m),x(s,a,m),O(a,l),c[f].m(l,null),x(s,h,m),z(d,s,m),y=!0},p:function(s,[m]){!s[1].fetching&&!s[1].error&&s[1].data.mod?u?(u.p(s,m),m&2&&b(u,1)):(u=D(s),u.c(),b(u,1),u.m(t.parentNode,t)):u&&(et(),E(u,1,1,()=>{u=null}),tt());let k=f;f=w(s),f===k?c[f].p(s,m):(et(),E(c[k],1,1,()=>{c[k]=null}),tt(),$=c[f],$?$.p(s,m):($=c[f]=R[f](s),$.c()),b($,1),$.m(l,null));const M={};m&1028&&(M.$$scope={dirty:m,ctx:s}),!v&&m&1&&(v=!0,M.running=s[0],kt(()=>v=!1)),d.$set(M)},i:function(s){y||(b(u),b($),b(d.$$.fragment,s),y=!0)},o:function(s){E(u),E($),E(d.$$.fragment,s),y=!1},d:function(s){s&&(p(n),p(r),p(e),p(a),p(h)),u&&u.d(s),p(t),c[f].d(),A(d,s)}};return S("SvelteRegisterBlock",{block:L,id:F.name,type:"component",source:"",ctx:o}),L}function Pt(o,t,n){let r,i,{$$slots:e={},$$scope:a}=t;xt("Page",e,[]);let{data:l}=t;const{modId:f}=l,$=K();let h="",d=!1;const v=Q({query:ot,client:$,variables:{mod:f}});yt(v,"mod"),wt(o,v,c=>n(1,i=c));const y=c=>{$.mutation(nt,{modId:Y(v).data.mod.id,mod:c}).toPromise().then(w=>{w.error?(console.error(w.error.message),n(2,h="Error editing mod: "+w.error.message),n(0,d=!0)):W(X+"/mod/"+w.data.updateMod.id)})};o.$$.on_mount.push(function(){l===void 0&&!("data"in t||o.$$.bound[o.$$.props.data])&&it.warn("<Page> was created without expected prop 'data'")});const u=["data"];Object.keys(t).forEach(c=>{!~u.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&it.warn(`<Page> was created with unknown prop '${c}'`)});function R(c){d=c,n(0,d)}return o.$$set=c=>{"data"in c&&n(6,l=c.data)},o.$capture_state=()=>({getContextClient:K,queryStore:Q,EditModDocument:nt,GetModDocument:ot,Toast:rt,goto:W,ModForm:ct,base:X,MetaDescriptors:lt,get:Y,data:l,modId:f,client:$,errorMessage:h,errorToast:d,mod:v,onSubmit:y,initialValues:r,$mod:i}),o.$inject_state=c=>{"data"in c&&n(6,l=c.data),"errorMessage"in c&&n(2,h=c.errorMessage),"errorToast"in c&&n(0,d=c.errorToast),"initialValues"in c&&n(3,r=c.initialValues)},t&&"$$inject"in t&&o.$inject_state(t.$$inject),o.$$.update=()=>{o.$$.dirty&1&&(d||n(2,h="")),o.$$.dirty&2&&n(3,r=i.data?{...i.data.mod,logo:void 0}:void 0)},[d,i,h,r,v,y,l,R]}class It extends pt{constructor(t){super(t),gt(this,t,Pt,F,ht,{data:6}),S("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:F.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{It as component,Rt as universal};
//# sourceMappingURL=16.c976717e.js.map
