import{S as ge,i as $e,d as x,s as pe,y as he,I as ve,v as Ve,F as Q,G as X,$ as be,a0 as ye,Z,H as W,_ as Ee,f as Y,b as q,e as T,K as B,J as G,L as we,j as g,k as D,g as _,h as I,N,M as H,O as ee,m as R,R as k,n as E,Q as L,r as y,t as w,q as te,U as ke,T as U,p as ne,X as se,u as O}from"../chunks/vendor.d31bcabb.js";import{r as oe,s as ie}from"../chunks/graphql.fef59309.js";import{T as ae}from"../chunks/Toast.d55ff960.js";import{V as ce}from"../chunks/VersionForm.a8023664.js";import{M as fe}from"../chunks/MetaDescriptors.7fcda58c.js";const xe=async({params:n})=>({...n}),je=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"})),{console:re}=Ee,j="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";function z(n){let e,i;e=new fe({props:{description:"Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version,title:"Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version},$$inline:!0});const a={c:function(){G(e.$$.fragment)},l:function(t){H(e.$$.fragment,t)},m:function(t,s){L(e,t,s),i=!0},p:function(t,s){const c={};s&2&&(c.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),s&2&&(c.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(c)},i:function(t){i||(y(e.$$.fragment,t),i=!0)},o:function(t){w(e.$$.fragment,t),i=!1},d:function(t){U(e,t)}};return x("SvelteRegisterBlock",{block:a,id:z.name,type:"if",source:"(48:2) {#if !$version.fetching && !$version.error && $version.data.getVersion}",ctx:n}),a}function le(n){let e,i;e=new ce({props:{onSubmit:n[5],initialValues:n[3],modReference:n[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"},$$inline:!0});const a={c:function(){G(e.$$.fragment)},l:function(t){H(e.$$.fragment,t)},m:function(t,s){L(e,t,s),i=!0},p:function(t,s){const c={};s&8&&(c.initialValues=t[3]),s&2&&(c.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(c)},i:function(t){i||(y(e.$$.fragment,t),i=!0)},o:function(t){w(e.$$.fragment,t),i=!1},d:function(t){U(e,t)}};return x("SvelteRegisterBlock",{block:a,id:le.name,type:"else",source:"(63:4) {:else}",ctx:n}),a}function ue(n){let e,i,a=n[1].error.message+"",o;const t={c:function(){e=T("p"),i=B("Oh no... "),o=B(a),this.h()},l:function(c){e=_(c,"P",{});var l=I(e);i=N(l,"Oh no... "),o=N(l,a),l.forEach(g),this.h()},h:function(){R(e,j,61,6,1920)},m:function(c,l){E(c,e,l),k(e,i),k(e,o)},p:function(c,l){l&2&&a!==(a=c[1].error.message+"")&&se(o,a)},i:O,o:O,d:function(c){c&&g(e)}};return x("SvelteRegisterBlock",{block:t,id:ue.name,type:"if",source:"(61:29) ",ctx:n}),t}function de(n){let e,i;const a={c:function(){e=T("p"),i=B("Loading..."),this.h()},l:function(t){e=_(t,"P",{});var s=I(e);i=N(s,"Loading..."),s.forEach(g),this.h()},h:function(){R(e,j,59,6,1866)},m:function(t,s){E(t,e,s),k(e,i)},p:O,i:O,o:O,d:function(t){t&&g(e)}};return x("SvelteRegisterBlock",{block:a,id:de.name,type:"if",source:"(59:4) {#if $version.fetching}",ctx:n}),a}function me(n){let e,i;const a={c:function(){e=T("span"),i=B(n[2]),this.h()},l:function(t){e=_(t,"SPAN",{});var s=I(e);i=N(s,n[2]),s.forEach(g),this.h()},h:function(){R(e,j,74,2,2220)},m:function(t,s){E(t,e,s),k(e,i)},p:function(t,s){s&4&&se(i,t[2])},d:function(t){t&&g(e)}};return x("SvelteRegisterBlock",{block:a,id:me.name,type:"slot",source:"(74:0) <Toast bind:running={errorToast}>",ctx:n}),a}function F(n){let e,i,a,o,t,s,c,l,d,b,$,h,V,u=!n[1].fetching&&!n[1].error&&n[1].data.getVersion&&z(n);const C=[de,ue,le],v=[];function f(p,r){return p[1].fetching?0:p[1].error?1:2}l=f(n),d=v[l]=C[l](n);function M(p){n[7](p)}let A={$$slots:{default:[me]},$$scope:{ctx:n}};n[0]!==void 0&&(A.running=n[0]),$=new ae({props:A,$$inline:!0}),he.push(()=>ve($,"running",M));const J={c:function(){u&&u.c(),e=Y(),i=q(),a=T("h1"),o=B("Edit Version"),t=q(),s=T("div"),c=T("section"),d.c(),b=q(),G($.$$.fragment),this.h()},l:function(r){const m=we("svelte-wzsk0g",document.head);u&&u.l(m),e=Y(),m.forEach(g),i=D(r),a=_(r,"H1",{class:!0});var S=I(a);o=N(S,"Edit Version"),S.forEach(g),t=D(r),s=_(r,"DIV",{class:!0});var P=I(s);c=_(P,"SECTION",{});var K=I(c);d.l(K),K.forEach(g),P.forEach(g),b=D(r),H($.$$.fragment,r),this.h()},h:function(){ee(a,"class","text-4xl my-4 font-bold"),R(a,j,54,0,1742),R(c,j,57,2,1822),ee(s,"class","card p-4"),R(s,j,56,0,1797)},m:function(r,m){u&&u.m(document.head,null),k(document.head,e),E(r,i,m),E(r,a,m),k(a,o),E(r,t,m),E(r,s,m),k(s,c),v[l].m(c,null),E(r,b,m),L($,r,m),V=!0},p:function(r,[m]){!r[1].fetching&&!r[1].error&&r[1].data.getVersion?u?(u.p(r,m),m&2&&y(u,1)):(u=z(r),u.c(),y(u,1),u.m(e.parentNode,e)):u&&(ne(),w(u,1,1,()=>{u=null}),te());let S=l;l=f(r),l===S?v[l].p(r,m):(ne(),w(v[S],1,1,()=>{v[S]=null}),te(),d=v[l],d?d.p(r,m):(d=v[l]=C[l](r),d.c()),y(d,1),d.m(c,null));const P={};m&2052&&(P.$$scope={dirty:m,ctx:r}),!h&&m&1&&(h=!0,P.running=r[0],ke(()=>h=!1)),$.$set(P)},i:function(r){V||(y(u),y(d),y($.$$.fragment,r),V=!0)},o:function(r){w(u),w(d),w($.$$.fragment,r),V=!1},d:function(r){u&&u.d(r),g(e),r&&g(i),r&&g(a),r&&g(t),r&&g(s),v[l].d(),r&&g(b),U($,r)}};return x("SvelteRegisterBlock",{block:J,id:F.name,type:"component",source:"",ctx:n}),J}function Se(n,e,i){let a,o,{$$slots:t={},$$scope:s}=e;Ve("Page",t,[]);let{data:c}=e;const{modId:l,versionId:d}=c,b=Q();let $="",h=!1;const V=X({query:oe,client:b,variables:{version:d}});be(V,"version"),ye(n,V,f=>i(1,o=f));const u=async f=>b.mutation(ie,{versionId:d,version:f}).toPromise().then(M=>{if(M.error)console.error(M.error.message),i(2,$="Error editing version: "+M.error.message),i(0,h=!0);else return Z(W+"/mod/"+l+"/version/"+d)});n.$$.on_mount.push(function(){c===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&re.warn("<Page> was created without expected prop 'data'")});const C=["data"];Object.keys(e).forEach(f=>{!~C.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&re.warn(`<Page> was created with unknown prop '${f}'`)});function v(f){h=f,i(0,h)}return n.$$set=f=>{"data"in f&&i(6,c=f.data)},n.$capture_state=()=>({queryStore:X,getContextClient:Q,GetModVersionDocument:oe,UpdateVersionDocument:ie,Toast:ae,goto:Z,VersionForm:ce,base:W,MetaDescriptors:fe,data:c,modId:l,versionId:d,client:b,errorMessage:$,errorToast:h,version:V,onSubmit:u,initialValues:a,$version:o}),n.$inject_state=f=>{"data"in f&&i(6,c=f.data),"errorMessage"in f&&i(2,$=f.errorMessage),"errorToast"in f&&i(0,h=f.errorToast),"initialValues"in f&&i(3,a=f.initialValues)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&(h||i(2,$="")),n.$$.dirty&2&&i(3,a=o.data?{...o.data.getVersion,...o.data.getVersion.arch,logo:void 0}:void 0)},[h,o,$,a,V,u,c,v]}class Me extends ge{constructor(e){super(e),$e(this,e,Se,F,pe,{data:6}),x("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:F.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Me as component,je as universal};
//# sourceMappingURL=19.6acca6bc.js.map
