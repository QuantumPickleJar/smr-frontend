import{S as ge,i as $e,d as w,s as pe,y as he,I as ve,v as Ve,F as K,G as Q,a0 as be,a1 as xe,_ as U,H as X,$ as ye,f as Y,b as B,e as P,J as H,K as ke,j as $,k as N,g as T,M as se,h as O,L,N as Z,m as _,Q as C,n as y,O as A,r as x,t as k,q as ee,T as we,R as G,p as te,W as q,X as D,Y as re,u as j}from"../chunks/vendor.9e8a8c08.js";import{r as ne,s as oe}from"../chunks/graphql.fef59309.js";import{T as ae}from"../chunks/Toast.e31c28a1.js";import{V as ce}from"../chunks/VersionForm.ab419774.js";import{M as fe}from"../chunks/MetaDescriptors.b2f7dbe0.js";const Se=async({params:n})=>({...n}),je=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"})),{console:ie}=ye,I="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";function z(n){let e,i;e=new fe({props:{description:"Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version,title:"Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version},$$inline:!0});const a={c:function(){H(e.$$.fragment)},l:function(t){L(e.$$.fragment,t)},m:function(t,s){A(e,t,s),i=!0},p:function(t,s){const c={};s&2&&(c.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),s&2&&(c.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(c)},i:function(t){i||(x(e.$$.fragment,t),i=!0)},o:function(t){k(e.$$.fragment,t),i=!1},d:function(t){G(e,t)}};return w("SvelteRegisterBlock",{block:a,id:z.name,type:"if",source:"(48:2) {#if !$version.fetching && !$version.error && $version.data.getVersion}",ctx:n}),a}function le(n){let e,i;e=new ce({props:{onSubmit:n[5],initialValues:n[3],modReference:n[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"},$$inline:!0});const a={c:function(){H(e.$$.fragment)},l:function(t){L(e.$$.fragment,t)},m:function(t,s){A(e,t,s),i=!0},p:function(t,s){const c={};s&8&&(c.initialValues=t[3]),s&2&&(c.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(c)},i:function(t){i||(x(e.$$.fragment,t),i=!0)},o:function(t){k(e.$$.fragment,t),i=!1},d:function(t){G(e,t)}};return w("SvelteRegisterBlock",{block:a,id:le.name,type:"else",source:"(63:4) {:else}",ctx:n}),a}function ue(n){let e,i,a=n[1].error.message+"",o;const t={c:function(){e=P("p"),i=q("Oh no... "),o=q(a),this.h()},l:function(c){e=T(c,"P",{});var l=O(e);i=D(l,"Oh no... "),o=D(l,a),l.forEach($),this.h()},h:function(){_(e,I,72,6,1920)},m:function(c,l){y(c,e,l),C(e,i),C(e,o)},p:function(c,l){l&2&&a!==(a=c[1].error.message+"")&&re(o,a)},i:j,o:j,d:function(c){c&&$(e)}};return w("SvelteRegisterBlock",{block:t,id:ue.name,type:"if",source:"(61:29) ",ctx:n}),t}function de(n){let e,i="Loading...";const a={c:function(){e=P("p"),e.textContent=i,this.h()},l:function(t){e=T(t,"P",{"data-svelte-h":!0}),se(e)!=="svelte-qdsr2u"&&(e.textContent=i),this.h()},h:function(){_(e,I,70,6,1866)},m:function(t,s){y(t,e,s)},p:j,i:j,o:j,d:function(t){t&&$(e)}};return w("SvelteRegisterBlock",{block:a,id:de.name,type:"if",source:"(59:4) {#if $version.fetching}",ctx:n}),a}function me(n){let e,i;const a={c:function(){e=P("span"),i=q(n[2]),this.h()},l:function(t){e=T(t,"SPAN",{});var s=O(e);i=D(s,n[2]),s.forEach($),this.h()},h:function(){_(e,I,85,2,2220)},m:function(t,s){y(t,e,s),C(e,i)},p:function(t,s){s&4&&re(i,t[2])},d:function(t){t&&$(e)}};return w("SvelteRegisterBlock",{block:a,id:me.name,type:"slot",source:"(74:0) <Toast bind:running={errorToast}>",ctx:n}),a}function F(n){let e,i,a,o="Edit Version",t,s,c,l,d,b,g,h,V,u=!n[1].fetching&&!n[1].error&&n[1].data.getVersion&&z(n);const M=[de,ue,le],v=[];function f(p,r){return p[1].fetching?0:p[1].error?1:2}l=f(n),d=v[l]=M[l](n);function R(p){n[7](p)}let W={$$slots:{default:[me]},$$scope:{ctx:n}};n[0]!==void 0&&(W.running=n[0]),g=new ae({props:W,$$inline:!0}),he.push(()=>ve(g,"running",R));const J={c:function(){u&&u.c(),e=Y(),i=B(),a=P("h1"),a.textContent=o,t=B(),s=P("div"),c=P("section"),d.c(),b=B(),H(g.$$.fragment),this.h()},l:function(r){const m=ke("svelte-wzsk0g",document.head);u&&u.l(m),e=Y(),m.forEach($),i=N(r),a=T(r,"H1",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1n0bkh"&&(a.textContent=o),t=N(r),s=T(r,"DIV",{class:!0});var S=O(s);c=T(S,"SECTION",{});var E=O(c);d.l(E),E.forEach($),S.forEach($),b=N(r),L(g.$$.fragment,r),this.h()},h:function(){Z(a,"class","text-4xl my-4 font-bold"),_(a,I,65,0,1742),_(c,I,68,2,1822),Z(s,"class","card p-4"),_(s,I,67,0,1797)},m:function(r,m){u&&u.m(document.head,null),C(document.head,e),y(r,i,m),y(r,a,m),y(r,t,m),y(r,s,m),C(s,c),v[l].m(c,null),y(r,b,m),A(g,r,m),V=!0},p:function(r,[m]){!r[1].fetching&&!r[1].error&&r[1].data.getVersion?u?(u.p(r,m),m&2&&x(u,1)):(u=z(r),u.c(),x(u,1),u.m(e.parentNode,e)):u&&(te(),k(u,1,1,()=>{u=null}),ee());let S=l;l=f(r),l===S?v[l].p(r,m):(te(),k(v[S],1,1,()=>{v[S]=null}),ee(),d=v[l],d?d.p(r,m):(d=v[l]=M[l](r),d.c()),x(d,1),d.m(c,null));const E={};m&2052&&(E.$$scope={dirty:m,ctx:r}),!h&&m&1&&(h=!0,E.running=r[0],we(()=>h=!1)),g.$set(E)},i:function(r){V||(x(u),x(d),x(g.$$.fragment,r),V=!0)},o:function(r){k(u),k(d),k(g.$$.fragment,r),V=!1},d:function(r){r&&($(i),$(a),$(t),$(s),$(b)),u&&u.d(r),$(e),v[l].d(),G(g,r)}};return w("SvelteRegisterBlock",{block:J,id:F.name,type:"component",source:"",ctx:n}),J}function Ee(n,e,i){let a,o,{$$slots:t={},$$scope:s}=e;Ve("Page",t,[]);let{data:c}=e;const{modId:l,versionId:d}=c,b=K();let g="",h=!1;const V=Q({query:ne,client:b,variables:{version:d}});be(V,"version"),xe(n,V,f=>i(1,o=f));const u=async f=>b.mutation(oe,{versionId:d,version:f}).toPromise().then(R=>{if(R.error)console.error(R.error.message),i(2,g="Error editing version: "+R.error.message),i(0,h=!0);else return U(X+"/mod/"+l+"/version/"+d)});n.$$.on_mount.push(function(){c===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&ie.warn("<Page> was created without expected prop 'data'")});const M=["data"];Object.keys(e).forEach(f=>{!~M.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&ie.warn(`<Page> was created with unknown prop '${f}'`)});function v(f){h=f,i(0,h)}return n.$$set=f=>{"data"in f&&i(6,c=f.data)},n.$capture_state=()=>({queryStore:Q,getContextClient:K,GetModVersionDocument:ne,UpdateVersionDocument:oe,Toast:ae,goto:U,VersionForm:ce,base:X,MetaDescriptors:fe,data:c,modId:l,versionId:d,client:b,errorMessage:g,errorToast:h,version:V,onSubmit:u,initialValues:a,$version:o}),n.$inject_state=f=>{"data"in f&&i(6,c=f.data),"errorMessage"in f&&i(2,g=f.errorMessage),"errorToast"in f&&i(0,h=f.errorToast),"initialValues"in f&&i(3,a=f.initialValues)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&(h||i(2,g="")),n.$$.dirty&2&&i(3,a=o.data?{...o.data.getVersion,...o.data.getVersion.arch,logo:void 0}:void 0)},[h,o,g,a,V,u,c,v]}class Ce extends ge{constructor(e){super(e),$e(this,e,Ee,F,pe,{data:6}),w("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:F.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ce as component,je as universal};
//# sourceMappingURL=19.9c0984cd.js.map
