import{S as ke,i as Pe,d as q,s as Te,y as Be,I as Ie,$ as Ne,a0 as Ve,v as Me,F as le,Z as ue,H as fe,_ as Re,J as Y,b as O,e as v,K as C,L as Ue,M as Z,j as f,k as _,g as y,h as B,N as L,O as d,m as S,Q as G,n as U,R as m,t as F,q as je,r as H,U as Ae,T as W,u as X,x as De,p as Oe,a4 as me,Y as _e,aa as Ce,a5 as Le,X as ne}from"../chunks/vendor.7f7881cb.js";import{j as pe}from"../chunks/graphql.fef59309.js";import{T as ve}from"../chunks/Toast.94a1f60f.js";import{o as ze,a as qe,b as Fe,s as He,c as $e,v as ge,r as de,V as te,z as Je}from"../chunks/forms.2678f0dd.js";import{t as he}from"../chunks/forms.8e34ec9d.js";import{u as ee}from"../chunks/user.85a5f0bc.js";import{M as ye}from"../chunks/MetaDescriptors.3fc0d18e.js";const{console:Ke}=Re,x="src/routes/settings/+page.svelte";function Se(i){let e,t,a,c,s,n,l,E,u,b,$,h,w,k,N,P,z,o,j,p,r,g,V,M,J;u=new te({props:{for:"avatar",$$slots:{default:[Ee,({messages:I})=>({10:I}),({messages:I})=>I?1024:0]},$$scope:{ctx:i}},$$inline:!0}),o=new te({props:{for:"username",$$slots:{default:[be,({messages:I})=>({10:I}),({messages:I})=>I?1024:0]},$$scope:{ctx:i}},$$inline:!0});const re={c:function(){e=v("form"),t=v("div"),a=v("div"),c=v("label"),s=C("Avatar:"),n=O(),l=v("input"),E=O(),Y(u.$$.fragment),b=O(),$=v("div"),h=v("label"),w=v("span"),k=C("Username"),N=O(),P=v("input"),z=O(),Y(o.$$.fragment),j=O(),p=v("div"),r=v("button"),g=C("Save"),this.h()},l:function(T){e=y(T,"FORM",{});var R=B(e);t=y(R,"DIV",{class:!0});var A=B(t);a=y(A,"DIV",{class:!0});var D=B(a);c=y(D,"LABEL",{for:!0});var se=B(c);s=L(se,"Avatar:"),se.forEach(f),n=_(D),l=y(D,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),E=_(D),Z(u.$$.fragment,D),D.forEach(f),b=_(A),$=y(A,"DIV",{class:!0});var K=B($);h=y(K,"LABEL",{class:!0});var Q=B(h);w=y(Q,"SPAN",{});var oe=B(w);k=L(oe,"Username"),oe.forEach(f),N=_(Q),P=y(Q,"INPUT",{type:!0,class:!0}),Q.forEach(f),z=_(K),Z(o.$$.fragment,K),K.forEach(f),j=_(A),p=y(A,"DIV",{});var ie=B(p);r=y(ie,"BUTTON",{class:!0,type:!0});var ce=B(r);g=L(ce,"Save"),ce.forEach(f),ie.forEach(f),A.forEach(f),R.forEach(f),this.h()},h:function(){d(c,"for","avatar"),S(c,x,72,12,2470),d(l,"id","avatar"),d(l,"class","base-input"),d(l,"name","avatar"),d(l,"type","file"),d(l,"accept","image/png,image/jpeg,image/gif"),d(l,"placeholder","Avatar"),S(l,x,73,12,2518),d(a,"class","grid grid-flow-row gap-2"),S(a,x,71,10,2419),S(w,x,87,14,3016),d(P,"type","text"),P.required=!0,d(P,"class","input p-2"),S(P,x,88,14,3052),d(h,"class","label"),S(h,x,86,12,2980),d($,"class","grid grid-flow-row gap-2"),S($,x,85,10,2929),d(r,"class","btn variant-ghost-primary"),d(r,"type","submit"),S(r,x,96,12,3369),S(p,x,95,10,3351),d(t,"class","grid grid-flow-row gap-6"),S(t,x,70,8,2370),S(e,x,69,6,2346)},m:function(T,R){U(T,e,R),m(e,t),m(t,a),m(a,c),m(c,s),m(a,n),m(a,l),m(a,E),G(u,a,null),m(t,b),m(t,$),m($,h),m(h,w),m(w,k),m(h,N),m(h,P),me(P,i[5].username),m($,z),G(o,$,null),m(t,j),m(t,p),m(p,r),m(r,g),V=!0,M||(J=[_e(P,"input",i[7]),Ce(i[4].call(null,e))],M=!0)},p:function(T,R){const A={};R&3072&&(A.$$scope={dirty:R,ctx:T}),u.$set(A),R&32&&P.value!==T[5].username&&me(P,T[5].username);const D={};R&3072&&(D.$$scope={dirty:R,ctx:T}),o.$set(D)},i:function(T){V||(H(u.$$.fragment,T),H(o.$$.fragment,T),V=!0)},o:function(T){F(u.$$.fragment,T),F(o.$$.fragment,T),V=!1},d:function(T){T&&f(e),W(u),W(o),M=!1,Le(J)}};return q("SvelteRegisterBlock",{block:re,id:Se.name,type:"else",source:"(69:4) {:else}",ctx:i}),re}function xe(i){let e,t;const a={c:function(){e=v("p"),t=C("Please log in"),this.h()},l:function(s){e=y(s,"P",{});var n=B(e);t=L(n,"Please log in"),n.forEach(f),this.h()},h:function(){S(e,x,67,6,2307)},m:function(s,n){U(s,e,n),m(e,t)},p:X,i:X,o:X,d:function(s){s&&f(e)}};return q("SvelteRegisterBlock",{block:a,id:xe.name,type:"if",source:"(67:4) {#if $user === null}",ctx:i}),a}function Ee(i){let e,t=(i[10]||"")+"",a;const c={c:function(){e=v("span"),a=C(t),this.h()},l:function(n){e=y(n,"SPAN",{class:!0});var l=B(e);a=L(l,t),l.forEach(f),this.h()},h:function(){d(e,"class","validation-message"),S(e,x,81,14,2812)},m:function(n,l){U(n,e,l),m(e,a)},p:function(n,l){l&1024&&t!==(t=(n[10]||"")+"")&&ne(a,t)},d:function(n){n&&f(e)}};return q("SvelteRegisterBlock",{block:c,id:Ee.name,type:"slot",source:'(81:12) <ValidationMessage for=\\"avatar\\" let:messages={message}>',ctx:i}),c}function be(i){let e,t=(i[10]||"")+"",a;const c={c:function(){e=v("span"),a=C(t),this.h()},l:function(n){e=y(n,"SPAN",{class:!0});var l=B(e);a=L(l,t),l.forEach(f),this.h()},h:function(){d(e,"class","validation-message"),S(e,x,91,14,3234)},m:function(n,l){U(n,e,l),m(e,a)},p:function(n,l){l&1024&&t!==(t=(n[10]||"")+"")&&ne(a,t)},d:function(n){n&&f(e)}};return q("SvelteRegisterBlock",{block:c,id:be.name,type:"slot",source:'(91:12) <ValidationMessage for=\\"username\\" let:messages={message}>',ctx:i}),c}function we(i){let e,t;const a={c:function(){e=v("span"),t=C(i[3]),this.h()},l:function(s){e=y(s,"SPAN",{});var n=B(e);t=L(n,i[3]),n.forEach(f),this.h()},h:function(){S(e,x,105,2,3552)},m:function(s,n){U(s,e,n),m(e,t)},p:function(s,n){n&8&&ne(t,s[3])},d:function(s){s&&f(e)}};return q("SvelteRegisterBlock",{block:a,id:we.name,type:"slot",source:"(105:0) <Toast bind:running={errorToast}>",ctx:i}),a}function ae(i){let e,t,a,c,s,n,l,E,u,b,$,h,w;e=new ye({props:{description:"Change your user settings",title:"Settings"},$$inline:!0});const k=[xe,Se],N=[];function P(p,r){return p[2]===null?0:1}E=P(i),u=N[E]=k[E](i);function z(p){i[8](p)}let o={$$slots:{default:[we]},$$scope:{ctx:i}};i[0]!==void 0&&(o.running=i[0]),$=new ve({props:o,$$inline:!0}),Be.push(()=>Ie($,"running",z));const j={c:function(){Y(e.$$.fragment),t=O(),a=v("h1"),c=C("Settings"),s=O(),n=v("div"),l=v("section"),u.c(),b=O(),Y($.$$.fragment),this.h()},l:function(r){const g=Ue("svelte-1ae5i2c",document.head);Z(e.$$.fragment,g),g.forEach(f),t=_(r),a=y(r,"H1",{class:!0});var V=B(a);c=L(V,"Settings"),V.forEach(f),s=_(r),n=y(r,"DIV",{class:!0});var M=B(n);l=y(M,"SECTION",{});var J=B(l);u.l(J),J.forEach(f),M.forEach(f),b=_(r),Z($.$$.fragment,r),this.h()},h:function(){d(a,"class","text-4xl my-4 font-bold"),S(a,x,62,0,2190),S(l,x,65,2,2266),d(n,"class","card p-4"),S(n,x,64,0,2241)},m:function(r,g){G(e,document.head,null),U(r,t,g),U(r,a,g),m(a,c),U(r,s,g),U(r,n,g),m(n,l),N[E].m(l,null),U(r,b,g),G($,r,g),w=!0},p:function(r,[g]){let V=E;E=P(r),E===V?N[E].p(r,g):(Oe(),F(N[V],1,1,()=>{N[V]=null}),je(),u=N[E],u?u.p(r,g):(u=N[E]=k[E](r),u.c()),H(u,1),u.m(l,null));const M={};g&2056&&(M.$$scope={dirty:g,ctx:r}),!h&&g&1&&(h=!0,M.running=r[0],Ae(()=>h=!1)),$.$set(M)},i:function(r){w||(H(e.$$.fragment,r),H(u),H($.$$.fragment,r),w=!0)},o:function(r){F(e.$$.fragment,r),F(u),F($.$$.fragment,r),w=!1},d:function(r){W(e),r&&f(t),r&&f(a),r&&f(s),r&&f(n),N[E].d(),r&&f(b),W($,r)}};return q("SvelteRegisterBlock",{block:j,id:ae.name,type:"component",source:"",ctx:i}),j}function Qe(i,e,t){let a,c,s=X,n=()=>(s(),s=De(k,o=>t(5,c=o)),k);Ne(ee,"user"),Ve(i,ee,o=>t(2,a=o)),i.$$.on_destroy.push(()=>s());let{$$slots:l={},$$scope:E}=e;Me("Page",l,[]);let u="",b=!1;const $=le(),h=ze({avatar:qe(Fe().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:He().min(3).max(32)});let w,k;const N=[];Object.keys(e).forEach(o=>{!~N.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&Ke.warn(`<Page> was created with unknown prop '${o}'`)});function P(){c.username=this.value,k.set(c)}function z(o){b=o,t(0,b),t(2,a),t(1,k)}return i.$capture_state=()=>({getContextClient:le,UpdateUserDocument:pe,Toast:ve,goto:ue,createForm:$e,validator:ge,reporter:de,ValidationMessage:te,trimNonSchema:he,user:ee,zod:Je,base:fe,MetaDescriptors:ye,errorMessage:u,errorToast:b,client:$,userSchema:h,form:w,data:k,$user:a,$data:c}),i.$inject_state=o=>{"errorMessage"in o&&t(3,u=o.errorMessage),"errorToast"in o&&t(0,b=o.errorToast),"form"in o&&t(4,w=o.form),"data"in o&&n(t(1,k=o.data))},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{if(i.$$.dirty&6&&a&&!k){const o=$e({initialValues:{username:a.username},extend:[ge({schema:h}),de],onSubmit:j=>{console.log("submitted",j),$.mutation(pe,{user:he(j,h),userId:a.id}).toPromise().then(p=>{p.error?(console.error(p.error.message),t(3,u="Error editing user: "+p.error.message),t(0,b=!0)):ue(fe+"/user/"+p.data.updateUser.id)})}});t(4,w=o.form),n(t(1,k=o.data))}i.$$.dirty&1&&(b||t(3,u=""))},[b,k,a,u,w,c,h,P,z]}class at extends ke{constructor(e){super(e),Pe(this,e,Qe,ae,Te,{userSchema:6}),q("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ae.name})}get userSchema(){return this.$$.ctx[6]}set userSchema(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{at as component};
//# sourceMappingURL=25.ce54525b.js.map
