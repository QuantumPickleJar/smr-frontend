{"version":3,"file":"26.1b5c1067.js","sources":["../../../../../../src/routes/sml-versions/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { GetSmlVersionsDocument } from '$lib/generated';\n  import { getContextClient, queryStore } from '@urql/svelte';\n  import { markdown } from '$lib/utils/markdown';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import { prettyDate } from '$lib/utils/formatting';\n  import { type PaginationSettings, Paginator } from '@skeletonlabs/skeleton';\n\n  const client = getContextClient();\n\n  let expandedVersions = new Set<string>();\n\n  let perPage = 20;\n  let page = 0;\n\n  $: versions = queryStore({\n    query: GetSmlVersionsDocument,\n    client,\n    variables: {\n      offset: page * perPage,\n      limit: perPage\n    }\n  });\n\n  $: totalVersions = $versions?.data?.getSMLVersions?.count;\n\n  const toggleRow = (versionId: string) => {\n    if (expandedVersions.has(versionId)) {\n      expandedVersions.delete(versionId);\n    } else {\n      expandedVersions.add(versionId);\n    }\n    expandedVersions = expandedVersions;\n  };\n\n  $: paginationSettings = {\n    page: page,\n    limit: perPage,\n    size: totalVersions,\n    amounts: [5, 10, 20, 50, 100]\n  } satisfies PaginationSettings;\n</script>\n\n<svelte:head>\n  <title>SML Versions - SMR</title>\n  <MetaDescriptors description=\"Versions of the Satisfactory Mod Loader\" title=\"Satisfactory Mod Loader versions\" />\n</svelte:head>\n\n{#if totalVersions}\n  <div class=\"mb-5 ml-auto flex justify-end\">\n    <div>\n      <Paginator\n        bind:settings={paginationSettings}\n        showFirstLastButtons={true}\n        showPreviousNextButtons={true}\n        on:page={(p) => (page = p.detail)}\n        on:amount={(p) => (perPage = p.detail)}\n        controlVariant=\"variant-filled-surface\" />\n    </div>\n  </div>\n{/if}\n\n<div class=\"card\">\n  {#if $versions.fetching}\n    <section class=\"p-4\">Loading...</section>\n  {:else if $versions.error}\n    <section class=\"p-4\">Oh no... {$versions.error.message}</section>\n  {:else}\n    <table class=\"max-w-full table table-hover\">\n      <thead>\n        <tr>\n          <th>Version</th>\n          <th>Stability</th>\n          <th>Game Version</th>\n          <th>Release Date</th>\n          <th><!-- Buttons --></th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each $versions.data.getSMLVersions.sml_versions as version}\n          <tr on:click={() => toggleRow(version.id)}>\n            <td>{version.version}</td>\n            <td>{version.stability}</td>\n            <td>{version.satisfactory_version}</td>\n            <td>{prettyDate(version.date)}</td>\n            <td>\n              <div class=\"grid grid-flow-col gap-4\">\n                <a class=\"btn btn-sm variant-ghost-primary\" href={version.link}>View</a>\n              </div>\n            </td>\n          </tr>\n\n          {#if expandedVersions.has(version.id)}\n            <tr>\n              <td colspan={5} class=\"p-2 markdown-content\">\n                {#await markdown(version.changelog) then changelogRendered}\n                  <!-- eslint-disable -->\n                  {@html changelogRendered}\n                {/await}\n              </td>\n            </tr>\n          {/if}\n        {/each}\n      </tbody>\n    </table>\n  {/if}\n</div>\n\n{#if totalVersions}\n  <div class=\"mt-5 ml-auto flex justify-end\">\n    <div>\n      <Paginator\n        bind:settings={paginationSettings}\n        showFirstLastButtons={true}\n        showPreviousNextButtons={true}\n        on:page={(p) => (page = p.detail)}\n        on:amount={(p) => (perPage = p.detail)}\n        controlVariant=\"variant-filled-surface\" />\n    </div>\n  </div>\n{/if}\n"],"names":["ctx","insert_hydration_dev","target","div1","anchor","append_hydration_dev","div0","each_value","ensure_array_like_dev","data","getSMLVersions","sml_versions","length","i","table","thead","tr","th0","th1","th2","th3","th4","tbody","error","message","section","set_data_dev","t1","t1_value","markdown","changelog","info","td","handle_promise","promise","html_tag","p","raw_value","t0_value","version","t2_value","stability","t4_value","satisfactory_version","prettyDate","date","show_if","has","id","attr_dev","a","a_href_value","link","td0","td1","td2","td3","td4","div","dirty","t0","t2","t4","t6","t6_value","create_if_block_4","fetching","create_if_block_1","create_if_block_2","create_if_block","client","getContextClient","expandedVersions","Set","perPage","page","toggleRow","versionId","delete","add","paginationSettings","value","page_handler","$$invalidate","detail","amount_handler","page_handler_1","amount_handler_1","$$subscribe_versions","versions","queryStore","query","GetSmlVersionsDocument","variables","offset","limit","totalVersions","$versions","count","size","amounts"],"mappings":"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"}