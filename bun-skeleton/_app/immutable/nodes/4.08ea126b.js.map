{"version":3,"file":"4.08ea126b.js","sources":["../../../../../../src/routes/admin/sml-versions/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { DeleteSmlVersionDocument, GetSmlVersionsAdminDocument } from '$lib/generated';\n  import { getContextClient, queryStore } from '@urql/svelte';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import { prettyDate } from '$lib/utils/formatting';\n  import { type PaginationSettings, Paginator } from '@skeletonlabs/skeleton';\n\n  const client = getContextClient();\n\n  let perPage = 20;\n  let page = 0;\n\n  $: versions = queryStore({\n    query: GetSmlVersionsAdminDocument,\n    client,\n    variables: {\n      filter: {\n        offset: page * perPage,\n        limit: perPage\n      }\n    }\n  });\n\n  $: totalVersions = $versions?.data?.getSMLVersions?.count;\n\n  const deleteVersion = (smlVersionID: string) => {\n    client\n      .mutation(DeleteSmlVersionDocument, { smlVersionID })\n      .toPromise()\n      .then(() => {\n        versions.pause();\n        versions.resume();\n      });\n  };\n\n  $: paginationSettings = {\n    page: page,\n    limit: perPage,\n    size: totalVersions,\n    amounts: [5, 10, 20, 50, 100]\n  } satisfies PaginationSettings;\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"SML Versions\" title=\"Admin: SML Versions\" />\n</svelte:head>\n\n<div class=\"mb-5 ml-auto flex justify-between\">\n  <a class=\"btn variant-ghost-primary\" href=\"{base}/admin/sml-versions/new\">New SML Version</a>\n\n  {#if totalVersions}\n    <div>\n      <Paginator\n        bind:settings={paginationSettings}\n        showFirstLastButtons={true}\n        showPreviousNextButtons={true}\n        on:page={(p) => (page = p.detail)}\n        on:amount={(p) => (perPage = p.detail)}\n        controlVariant=\"variant-filled-surface\" />\n    </div>\n  {/if}\n</div>\n\n<div class=\"card\">\n  {#if $versions.fetching}\n    <section class=\"p-4\">Loading...</section>\n  {:else if $versions.error}\n    <section class=\"p-4\">Oh no... {$versions.error.message}</section>\n  {:else}\n    <table class=\"max-w-full table table-hover\">\n      <thead>\n        <tr>\n          <th>Version</th>\n          <th>Stability</th>\n          <th>Satisfactory Version</th>\n          <th>Bootstrap Version</th>\n          <th>Release Date</th>\n          <th><!-- Buttons --></th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each $versions.data.getSMLVersions.sml_versions as version}\n          <tr>\n            <td>{version.version}</td>\n            <td>{version.stability}</td>\n            <td>{version.satisfactory_version}</td>\n            <td>{version.bootstrap_version}</td>\n            <td>{prettyDate(version.created_at)}</td>\n            <td>\n              <div class=\"grid grid-flow-col gap-4\">\n                <button class=\"btn btn-sm variant-ghost-primary\" on:click={() => deleteVersion(version.id)}\n                  >Delete</button>\n                <a class=\"btn btn-sm variant-ghost-primary\" href={base + '/admin/sml-versions/' + version.id + '/edit'}\n                  >Edit</a>\n              </div>\n            </td>\n          </tr>\n        {/each}\n      </tbody>\n    </table>\n  {/if}\n</div>\n\n{#if totalVersions}\n  <div class=\"mt-5 ml-auto flex justify-end\">\n    <div>\n      <Paginator\n        bind:settings={paginationSettings}\n        showFirstLastButtons={true}\n        showPreviousNextButtons={true}\n        on:page={(p) => (page = p.detail)}\n        on:amount={(p) => (perPage = p.detail)}\n        controlVariant=\"variant-filled-surface\" />\n    </div>\n  </div>\n{/if}\n"],"names":["ctx","insert_hydration_dev","target","div","anchor","each_value","data","getSMLVersions","sml_versions","length","i","table","append_hydration_dev","thead","tr","th0","th1","th2","th3","th4","th5","tbody","error","message","section","set_data_dev","t1","t1_value","t0_value","version","t2_value","stability","t4_value","satisfactory_version","t6_value","bootstrap_version","prettyDate","created_at","attr_dev","a","a_href_value","base","id","td0","td1","td2","td3","td4","td5","button","dirty","t0","t2","t4","t6","t8","t8_value","div1","div0","create_if_block_3","fetching","create_if_block_1","create_if_block_2","create_if_block","client","getContextClient","perPage","page","deleteVersion","smlVersionID","mutation","DeleteSmlVersionDocument","toPromise","then","versions","pause","resume","paginationSettings","value","page_handler","p","$$invalidate","detail","amount_handler","page_handler_1","amount_handler_1","$$subscribe_versions","queryStore","query","GetSmlVersionsAdminDocument","variables","filter","offset","limit","totalVersions","$versions","count","size","amounts"],"mappings":"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"}