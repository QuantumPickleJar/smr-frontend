{"version":3,"file":"6.f19ba8c4.js","sources":["../../../../../../src/routes/admin/sml-versions/new/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { getContextClient } from '@urql/svelte';\n  import { NewSmlVersionDocument } from '$lib/generated';\n  import Toast from '$lib/components/general/Toast.svelte';\n  import { goto } from '$app/navigation';\n  import type { SMLVersionData } from '$lib/models/sml-versions';\n  import SMLVersionForm from '$lib/components/sml-versions/SMLVersionForm.svelte';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n\n  const client = getContextClient();\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const onSubmit = (data: SMLVersionData) => {\n    client\n      .mutation(NewSmlVersionDocument, {\n        smlVersion: data\n      })\n      .toPromise()\n      .then((value) => {\n        if (value.error) {\n          console.error(value.error.message);\n          errorMessage = 'Error creating SML Version: ' + value.error.message;\n          errorToast = true;\n        } else {\n          // TODO Toast or something\n          goto(base + '/admin/sml-versions');\n        }\n      });\n  };\n\n  $: if (!errorToast) {\n    errorMessage = '';\n  }\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"New SML Version\" title=\"Admin: New SML Version\" />\n</svelte:head>\n\n<h1 class=\"text-4xl my-4 font-bold\">New SML Version</h1>\n\n<div class=\"card p-4\">\n  <section>\n    <SMLVersionForm {onSubmit} />\n  </section>\n</div>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","insert_hydration_dev","target","span","anchor","h1","div","append_hydration_dev","section","client","getContextClient","errorMessage","errorToast","onSubmit","data","mutation","NewSmlVersionDocument","smlVersion","toPromise","then","value","error","console","message","$$invalidate","goto","base"],"mappings":"0mBAmDSA,EAAY,CAAA,CAAA,4DAAZA,EAAY,0EAAnBC,EAA0BC,EAAAC,EAAAC,qCAAnBJ,EAAY,8YADAA,EAAU,CAAA,IAAA,mBAAVA,EAAU,CAAA,4HARK,iBAAA,4NAAA,2WAApCC,EAAuDC,EAAAG,EAAAD,iBAEvDH,EAAAA,EAIKC,EAAAI,EAAAF,CAAAA,EAHHG,EAESD,EAAAE,CAAAA,8HAGUR,EAAU,CAAA,2ZAxCvB,MAAAS,EAASC,EAAAA,EAEX,IAAAC,EAAe,GACfC,EAAa,GAEX,MAAAC,EAAYC,GAAAA,CAChBL,EACGM,SAASC,EACR,CAAAC,WAAYH,CAAAA,CAAAA,EAEbI,YACAC,KAAMC,GAAAA,CACDA,EAAMC,OACRC,QAAQD,MAAMD,EAAMC,MAAME,OAAAA,EAC1BC,EAAA,EAAAb,EAAe,+BAAiCS,EAAMC,MAAME,OAAAA,EAC5DC,EAAA,EAAAZ,EAAa,KAGba,EAAKC,EAAO,qBAAA,4JAsBDd,CAAAA,EAAUQ,iXAjBrBR,GACNY,EAAA,EAAAb,EAAe"}