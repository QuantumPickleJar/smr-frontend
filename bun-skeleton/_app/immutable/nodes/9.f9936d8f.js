import{S as Mt,i as Ct,d as q,s as qt,v as Ft,F as Vt,G as yt,H as z,P as st,y as Pt,I as It,J as rt,b as _,e as y,f as Dt,L as Gt,M as at,j as m,k as A,g as D,h as b,O as I,m as T,Q as lt,n as N,r as L,t as K,q as bt,T as ct,u as _t,x as Jt,R as c,U as At,V as Tt,p as wt,K as O,N as U,W as Kt,X,Y as kt,a5 as Qt}from"../chunks/vendor.7f7881cb.js";import{e as xt,f as St,g as Bt}from"../chunks/graphql.fef59309.js";import{A as Z}from"../chunks/api.853e29e3.js";import"../chunks/user.85a5f0bc.js";import{M as Ot}from"../chunks/MetaDescriptors.3fc0d18e.js";import{p as tt}from"../chunks/formatting.6f84ef8f.js";const w="src/routes/admin/unapproved-versions/+page.svelte";function Rt(i,t,e){const o=i.slice();return o[17]=t[e],o}function et(i){let t,e,o,r,d;function f(g){i[8](g)}let v={showFirstLastButtons:!0,showPreviousNextButtons:!0,controlVariant:"variant-filled-surface"};i[4]!==void 0&&(v.settings=i[4]),o=new st({props:v,$$inline:!0}),Pt.push(()=>It(o,"settings",f)),o.$on("page",i[9]),o.$on("amount",i[10]);const s={c:function(){t=y("div"),e=y("div"),rt(o.$$.fragment),this.h()},l:function(u){t=D(u,"DIV",{class:!0});var h=b(t);e=D(h,"DIV",{});var a=b(e);at(o.$$.fragment,a),a.forEach(m),h.forEach(m),this.h()},h:function(){T(e,w,53,4,1533),I(t,"class","mb-5 ml-auto flex justify-end"),T(t,w,52,2,1485)},m:function(u,h){N(u,t,h),c(t,e),lt(o,e,null),d=!0},p:function(u,h){const a={};!r&&h&16&&(r=!0,a.settings=u[4],At(()=>r=!1)),o.$set(a)},i:function(u){d||(L(o.$$.fragment,u),d=!0)},o:function(u){K(o.$$.fragment,u),d=!1},d:function(u){u&&m(t),ct(o)}};return q("SvelteRegisterBlock",{block:s,id:et.name,type:"if",source:"(52:0) {#if totalVersions}",ctx:i}),s}function Ut(i){let t,e,o,r,d,f,v,s,g,u,h,a,k,V,n,p=i[3].data.getUnapprovedVersions.versions;Tt(p);let E=[];for(let x=0;x<p.length;x+=1)E[x]=ot(Rt(i,p,x));const M={c:function(){t=y("table"),e=y("thead"),o=y("tr"),r=y("th"),d=O("Mod"),f=_(),v=y("th"),s=O("Version"),g=_(),u=y("th"),h=O("Release Date"),a=_(),k=y("th"),V=_(),n=y("tbody");for(let S=0;S<E.length;S+=1)E[S].c();this.h()},l:function(S){t=D(S,"TABLE",{class:!0});var P=b(t);e=D(P,"THEAD",{});var $=b(e);o=D($,"TR",{});var B=b(o);r=D(B,"TH",{});var H=b(r);d=U(H,"Mod"),H.forEach(m),f=A(B),v=D(B,"TH",{});var l=b(v);s=U(l,"Version"),l.forEach(m),g=A(B),u=D(B,"TH",{});var j=b(u);h=U(j,"Release Date"),j.forEach(m),a=A(B),k=D(B,"TH",{});var Q=b(k);Q.forEach(m),B.forEach(m),$.forEach(m),V=A(P),n=D(P,"TBODY",{});var F=b(n);for(let G=0;G<E.length;G+=1)E[G].l(F);F.forEach(m),P.forEach(m),this.h()},h:function(){T(r,w,74,10,2130),T(v,w,75,10,2153),T(u,w,76,10,2180),T(k,w,77,10,2212),T(o,w,73,8,2115),T(e,w,72,6,2099),T(n,w,80,6,2273),I(t,"class","max-w-full table table-hover"),T(t,w,71,4,2048)},m:function(S,P){N(S,t,P),c(t,e),c(e,o),c(o,r),c(r,d),c(o,f),c(o,v),c(v,s),c(o,g),c(o,u),c(u,h),c(o,a),c(o,k),c(t,V),c(t,n);for(let $=0;$<E.length;$+=1)E[$]&&E[$].m(n,null)},p:function(S,P){if(P&200){p=S[3].data.getUnapprovedVersions.versions,Tt(p);let $;for($=0;$<p.length;$+=1){const B=Rt(S,p,$);E[$]?E[$].p(B,P):(E[$]=ot(B),E[$].c(),E[$].m(n,null))}for(;$<E.length;$+=1)E[$].d(1);E.length=p.length}},d:function(S){S&&m(t),Kt(E,S)}};return q("SvelteRegisterBlock",{block:M,id:Ut.name,type:"else",source:"(71:2) {:else}",ctx:i}),M}function jt(i){let t,e,o=i[3].error.message+"",r;const d={c:function(){t=y("section"),e=O("Oh no... "),r=O(o),this.h()},l:function(v){t=D(v,"SECTION",{class:!0});var s=b(t);e=U(s,"Oh no... "),r=U(s,o),s.forEach(m),this.h()},h:function(){I(t,"class","p-4"),T(t,w,69,4,1968)},m:function(v,s){N(v,t,s),c(t,e),c(t,r)},p:function(v,s){s&8&&o!==(o=v[3].error.message+"")&&X(r,o)},d:function(v){v&&m(t)}};return q("SvelteRegisterBlock",{block:d,id:jt.name,type:"if",source:"(69:28) ",ctx:i}),d}function Nt(i){let t,e;const o={c:function(){t=y("section"),e=O("Loading..."),this.h()},l:function(d){t=D(d,"SECTION",{class:!0});var f=b(t);e=U(f,"Loading..."),f.forEach(m),this.h()},h:function(){I(t,"class","p-4"),T(t,w,67,4,1893)},m:function(d,f){N(d,t,f),c(t,e)},p:_t,d:function(d){d&&m(t)}};return q("SvelteRegisterBlock",{block:o,id:Nt.name,type:"if",source:"(67:2) {#if $versions.fetching}",ctx:i}),o}function ot(i){let t,e,o=i[17].mod.name+"",r,d,f,v=i[17].version+"",s,g,u,h=tt(i[17].created_at)+"",a,k,V,n,p,E,M,x,S,P,$,B,H,l,j,Q,F,G,Y,ft;function Ht(){return i[11](i[17])}function Lt(){return i[12](i[17])}const ut={c:function(){t=y("tr"),e=y("td"),r=O(o),d=_(),f=y("td"),s=O(v),g=_(),u=y("td"),a=O(h),k=_(),V=y("td"),n=y("div"),p=y("button"),E=O("Approve"),M=_(),x=y("button"),S=O("Deny"),P=_(),$=y("a"),B=O("Download"),l=_(),j=y("a"),Q=O("View"),G=_(),this.h()},l:function(J){t=D(J,"TR",{});var R=b(t);e=D(R,"TD",{});var dt=b(e);r=U(dt,o),dt.forEach(m),d=A(R),f=D(R,"TD",{});var ht=b(f);s=U(ht,v),ht.forEach(m),g=A(R),u=D(R,"TD",{});var pt=b(u);a=U(pt,h),pt.forEach(m),k=A(R),V=D(R,"TD",{});var mt=b(V);n=D(mt,"DIV",{class:!0});var C=b(n);p=D(C,"BUTTON",{class:!0});var vt=b(p);E=U(vt,"Approve"),vt.forEach(m),M=A(C),x=D(C,"BUTTON",{class:!0});var gt=b(x);S=U(gt,"Deny"),gt.forEach(m),P=A(C),$=D(C,"A",{class:!0,href:!0});var $t=b($);B=U($t,"Download"),$t.forEach(m),l=A(C),j=D(C,"A",{class:!0,href:!0});var Et=b(j);Q=U(Et,"View"),Et.forEach(m),C.forEach(m),mt.forEach(m),G=A(R),R.forEach(m),this.h()},h:function(){T(e,w,83,12,2381),T(f,w,84,12,2421),T(u,w,85,12,2460),I(p,"class","btn variant-ghost-primary"),T(p,w,88,16,2588),I(x,"class","btn variant-ghost-primary"),T(x,w,89,16,2707),I($,"class","btn variant-ghost-primary"),I($,"href",H=Z+"/mod/"+i[17].mod_id+"/versions/"+i[17].id+"/download"),T($,w,90,16,2820),I(j,"class","btn variant-ghost-primary"),I(j,"href",F=z+"/mod/"+i[17].mod_id+"/version/"+i[17].id),T(j,w,95,16,3043),I(n,"class","grid grid-flow-col gap-4"),T(n,w,87,14,2533),T(V,w,86,12,2514),T(t,w,82,10,2364)},m:function(J,R){N(J,t,R),c(t,e),c(e,r),c(t,d),c(t,f),c(f,s),c(t,g),c(t,u),c(u,a),c(t,k),c(t,V),c(V,n),c(n,p),c(p,E),c(n,M),c(n,x),c(x,S),c(n,P),c(n,$),c($,B),c(n,l),c(n,j),c(j,Q),c(t,G),Y||(ft=[kt(p,"click",Ht,!1,!1,!1,!1),kt(x,"click",Lt,!1,!1,!1,!1)],Y=!0)},p:function(J,R){i=J,R&8&&o!==(o=i[17].mod.name+"")&&X(r,o),R&8&&v!==(v=i[17].version+"")&&X(s,v),R&8&&h!==(h=tt(i[17].created_at)+"")&&X(a,h),R&8&&H!==(H=Z+"/mod/"+i[17].mod_id+"/versions/"+i[17].id+"/download")&&I($,"href",H),R&8&&F!==(F=z+"/mod/"+i[17].mod_id+"/version/"+i[17].id)&&I(j,"href",F)},d:function(J){J&&m(t),Y=!1,Qt(ft)}};return q("SvelteRegisterBlock",{block:ut,id:ot.name,type:"each",source:"(82:8) {#each $versions.data.getUnapprovedVersions.versions as version}",ctx:i}),ut}function it(i){let t,e,o,r;function d(s){i[13](s)}let f={showFirstLastButtons:!0,showPreviousNextButtons:!0,controlVariant:"variant-filled-surface"};i[4]!==void 0&&(f.settings=i[4]),e=new st({props:f,$$inline:!0}),Pt.push(()=>It(e,"settings",d)),e.$on("page",i[14]),e.$on("amount",i[15]);const v={c:function(){t=y("div"),rt(e.$$.fragment),this.h()},l:function(g){t=D(g,"DIV",{class:!0});var u=b(t);at(e.$$.fragment,u),u.forEach(m),this.h()},h:function(){I(t,"class","mt-5 ml-auto flex justify-end"),T(t,w,108,2,3328)},m:function(g,u){N(g,t,u),lt(e,t,null),r=!0},p:function(g,u){const h={};!o&&u&16&&(o=!0,h.settings=g[4],At(()=>o=!1)),e.$set(h)},i:function(g){r||(L(e.$$.fragment,g),r=!0)},o:function(g){K(e.$$.fragment,g),r=!1},d:function(g){g&&m(t),ct(e)}};return q("SvelteRegisterBlock",{block:v,id:it.name,type:"if",source:"(108:0) {#if totalVersions}",ctx:i}),v}function nt(i){let t,e,o,r,d,f,v;t=new Ot({props:{description:"Unapproved mod versions",title:"Admin: Unapproved Versions"},$$inline:!0});let s=i[2]&&et(i);function g(V,n){return V[3].fetching?Nt:V[3].error?jt:Ut}let u=g(i),h=u(i),a=i[2]&&it(i);const k={c:function(){rt(t.$$.fragment),e=_(),s&&s.c(),o=_(),r=y("div"),h.c(),d=_(),a&&a.c(),f=Dt(),this.h()},l:function(n){const p=Gt("svelte-c87g9p",document.head);at(t.$$.fragment,p),p.forEach(m),e=A(n),s&&s.l(n),o=A(n),r=D(n,"DIV",{class:!0});var E=b(r);h.l(E),E.forEach(m),d=A(n),a&&a.l(n),f=Dt(),this.h()},h:function(){I(r,"class","card"),T(r,w,65,0,1843)},m:function(n,p){lt(t,document.head,null),N(n,e,p),s&&s.m(n,p),N(n,o,p),N(n,r,p),h.m(r,null),N(n,d,p),a&&a.m(n,p),N(n,f,p),v=!0},p:function(n,[p]){n[2]?s?(s.p(n,p),p&4&&L(s,1)):(s=et(n),s.c(),L(s,1),s.m(o.parentNode,o)):s&&(wt(),K(s,1,1,()=>{s=null}),bt()),u===(u=g(n))&&h?h.p(n,p):(h.d(1),h=u(n),h&&(h.c(),h.m(r,null))),n[2]?a?(a.p(n,p),p&4&&L(a,1)):(a=it(n),a.c(),L(a,1),a.m(f.parentNode,f)):a&&(wt(),K(a,1,1,()=>{a=null}),bt())},i:function(n){v||(L(t.$$.fragment,n),L(s),L(a),v=!0)},o:function(n){K(t.$$.fragment,n),K(s),K(a),v=!1},d:function(n){ct(t),n&&m(e),s&&s.d(n),n&&m(o),n&&m(r),h.d(),n&&m(d),a&&a.d(n),n&&m(f)}};return q("SvelteRegisterBlock",{block:k,id:nt.name,type:"component",source:"",ctx:i}),k}function Wt(i,t,e){let o,r,d,f,v=_t,s=()=>(v(),v=Jt(o,l=>e(3,f=l)),o);i.$$.on_destroy.push(()=>v());let{$$slots:g={},$$scope:u}=t;Ft("Page",g,[]);const h=Vt();let a=20,k=1;const V=l=>{h.mutation(xt,{versionId:l}).toPromise().then(()=>{o.pause(),o.resume()})},n=l=>{h.mutation(St,{versionId:l}).toPromise().then(()=>{o.pause(),o.resume()})},p=[];Object.keys(t).forEach(l=>{!~p.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)});function E(l){d=l,e(4,d),e(1,k),e(0,a),e(2,r),e(3,f)}const M=l=>e(1,k=l.detail),x=l=>e(0,a=l.detail),S=l=>V(l.id),P=l=>n(l.id);function $(l){d=l,e(4,d),e(1,k),e(0,a),e(2,r),e(3,f)}const B=l=>e(1,k=l.detail),H=l=>e(0,a=l.detail);return i.$capture_state=()=>({ApproveVersionDocument:xt,DenyVersionDocument:St,GetUnapprovedVersionsDocument:Bt,getContextClient:Vt,queryStore:yt,API_REST:Z,base:z,MetaDescriptors:Ot,prettyDate:tt,Paginator:st,client:h,perPage:a,page:k,approveVersion:V,denyVersion:n,totalVersions:r,paginationSettings:d,versions:o,$versions:f}),i.$inject_state=l=>{"perPage"in l&&e(0,a=l.perPage),"page"in l&&e(1,k=l.page),"totalVersions"in l&&e(2,r=l.totalVersions),"paginationSettings"in l&&e(4,d=l.paginationSettings),"versions"in l&&s(e(5,o=l.versions))},t&&"$$inject"in t&&i.$inject_state(t.$$inject),i.$$.update=()=>{i.$$.dirty&3&&s(e(5,o=yt({query:Bt,client:h,variables:{filter:{offset:(k-1)*a,limit:a}}}))),i.$$.dirty&8&&e(2,r=f?.data?.getUnapprovedVersions?.count),i.$$.dirty&7&&e(4,d={page:k,limit:a,size:r,amounts:[5,10,20,50,100]})},[a,k,r,f,d,o,V,n,E,M,x,S,P,$,B,H]}class oe extends Mt{constructor(t){super(t),Ct(this,t,Wt,nt,qt,{}),q("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:nt.name})}}export{oe as component};
//# sourceMappingURL=9.f9936d8f.js.map
