import{S as ae,i as le,s as se,e as w,T as L,a as O,c as D,d as B,F as ne,U as M,f as m,g as P,G as $,aq as Q,af as R,h as oe,j as b,I as q,a8 as ie,ar as re,W as fe,V as W,as as ce,q as Z,a1 as ue,at as pe,k as J,t as y,l as K,m as I,K as de,L as ge,Z as ve,p as me,au as he,u as H,M as N,av as $e,A as j,D as S,H as U,N as z,J as G,b as X,Q as Y,R as xe}from"./vendor.SWZNLjM7.js";import{a as Ee}from"./graphql.XSrPrpK2.js";function Te(n){let t,l,e,a="#",c=n[0].name+"",i,r,s,f,p,g,x,E=n[0].description+"",k,T,A,C;return{c(){t=w("button"),l=w("div"),e=w("span"),e.textContent=a,i=L(c),p=O(),g=w("div"),x=w("p"),k=L(E),this.h()},l(d){t=D(d,"BUTTON",{class:!0});var v=B(t);l=D(v,"DIV",{class:!0,title:!0});var u=B(l);e=D(u,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-sdcp3o"&&(e.textContent=a),i=M(u,c),u.forEach(m),v.forEach(m),p=P(d),g=D(d,"DIV",{class:!0,"data-popup":!0,style:!0});var h=B(g);x=D(h,"P",{class:!0});var o=B(x);k=M(o,E),o.forEach(m),h.forEach(m),this.h()},h(){$(e,"class","text-orange-500 svelte-1c06ml2"),$(l,"class","lowercase text-neutral-300 [&>*]:pointer-events-none svelte-1c06ml2"),$(l,"title",r=n[3]==="click"?"Click for tag information":""),$(t,"class",s=Q(n[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2"),R(t,"selected",n[2]),$(x,"class","svelte-1c06ml2"),$(g,"class","card variant-filled-surface p-4 svelte-1c06ml2"),$(g,"data-popup",T=`popupHoverFor${n[0].id}`),oe(g,"z-index","1000")},m(d,v){b(d,t,v),q(t,l),q(l,e),q(l,i),b(d,p,v),b(d,g,v),q(g,x),q(x,k),A||(C=[ie(f=re.call(null,t,n[4])),fe(t,"click",n[5])],A=!0)},p(d,[v]){v&1&&c!==(c=d[0].name+"")&&W(i,c),v&8&&r!==(r=d[3]==="click"?"Click for tag information":"")&&$(l,"title",r),v&2&&s!==(s=Q(d[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2")&&$(t,"class",s),f&&ce(f.update)&&v&16&&f.update.call(null,d[4]),v&6&&R(t,"selected",d[2]),v&1&&E!==(E=d[0].description+"")&&W(k,E),v&1&&T!==(T=`popupHoverFor${d[0].id}`)&&$(g,"data-popup",T)},i:Z,o:Z,d(d){d&&(m(t),m(p),m(g)),A=!1,ue(C)}}}function be(n,t,l){let e,{tag:a}=t,{asButton:c=!1}=t,{selected:i=!1}=t,{popupTriggerEvent:r="click"}=t;function s(f){pe.call(this,n,f)}return n.$$set=f=>{"tag"in f&&l(0,a=f.tag),"asButton"in f&&l(1,c=f.asButton),"selected"in f&&l(2,i=f.selected),"popupTriggerEvent"in f&&l(3,r=f.popupTriggerEvent)},n.$$.update=()=>{n.$$.dirty&9&&l(4,e={event:r,target:`popupHoverFor${a.id}`,placement:"bottom-start"})},[a,c,i,r,e,s]}class Ie extends ae{constructor(t){super(),le(this,t,be,Te,se,{tag:0,asButton:1,selected:2,popupTriggerEvent:3})}}function _(n,t,l){const e=n.slice();return e[19]=t[l],e}function ke(n){let t,l="Tags",e,a,c,i,r,s,f,p,g,x,E,k;function T(u){n[11](u)}function A(u){n[12](u)}let C={name:"tags",chips:"variant-filled-primary"};n[4]!==void 0&&(C.input=n[4]),n[3]!==void 0&&(C.value=n[3]),c=new he({props:C}),H.push(()=>N(c,"input",T)),H.push(()=>N(c,"value",A)),c.$on("remove",n[13]);function d(u){n[15](u)}let v={options:n[5].filter(n[14])};return n[4]!==void 0&&(v.input=n[4]),p=new $e({props:v}),H.push(()=>N(p,"input",d)),p.$on("selection",n[16]),{c(){t=w("div"),t.textContent=l,e=O(),a=w("div"),j(c.$$.fragment),s=O(),f=w("div"),j(p.$$.fragment),this.h()},l(u){t=D(u,"DIV",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-14odz2i"&&(t.textContent=l),e=P(u),a=D(u,"DIV",{});var h=B(a);S(c.$$.fragment,h),h.forEach(m),s=P(u),f=D(u,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var o=B(f);S(p.$$.fragment,o),o.forEach(m),this.h()},h(){$(t,"class","mb-2"),$(f,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),$(f,"tabindex","-1"),$(f,"data-popup","popupAutocomplete")},m(u,h){b(u,t,h),b(u,e,h),b(u,a,h),U(c,a,null),b(u,s,h),b(u,f,h),U(p,f,null),x=!0,E||(k=ie(re.call(null,a,n[7])),E=!0)},p(u,h){const o={};!i&&h&16&&(i=!0,o.input=u[4],z(()=>i=!1)),!r&&h&8&&(r=!0,o.value=u[3],z(()=>r=!1)),c.$set(o);const V={};h&40&&(V.options=u[5].filter(u[14])),!g&&h&16&&(g=!0,V.input=u[4],z(()=>g=!1)),p.$set(V)},i(u){x||(I(c.$$.fragment,u),I(p.$$.fragment,u),x=!0)},o(u){y(c.$$.fragment,u),y(p.$$.fragment,u),x=!1},d(u){u&&(m(t),m(e),m(a),m(s),m(f)),G(c),G(p),E=!1,k()}}}function we(n){let t,l,e=n[0].length>0&&ee(n);return{c(){e&&e.c(),t=X()},l(a){e&&e.l(a),t=X()},m(a,c){e&&e.m(a,c),b(a,t,c),l=!0},p(a,c){a[0].length>0?e?(e.p(a,c),c&1&&I(e,1)):(e=ee(a),e.c(),I(e,1),e.m(t.parentNode,t)):e&&(J(),y(e,1,1,()=>{e=null}),K())},i(a){l||(I(e),l=!0)},o(a){y(e),l=!1},d(a){a&&m(t),e&&e.d(a)}}}function ee(n){let t,l,e=Y(n[0]),a=[];for(let i=0;i<e.length;i+=1)a[i]=te(_(n,e,i));const c=i=>y(a[i],1,1,()=>{a[i]=null});return{c(){t=w("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=D(i,"DIV",{class:!0});var r=B(t);for(let s=0;s<a.length;s+=1)a[s].l(r);r.forEach(m),this.h()},h(){$(t,"class","text-md flex flex-row flex-wrap gap-1")},m(i,r){b(i,t,r);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(t,null);l=!0},p(i,r){if(r&5){e=Y(i[0]);let s;for(s=0;s<e.length;s+=1){const f=_(i,e,s);a[s]?(a[s].p(f,r),I(a[s],1)):(a[s]=te(f),a[s].c(),I(a[s],1),a[s].m(t,null))}for(J(),s=e.length;s<a.length;s+=1)c(s);K()}},i(i){if(!l){for(let r=0;r<e.length;r+=1)I(a[r]);l=!0}},o(i){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)y(a[r]);l=!1},d(i){i&&m(t),xe(a,i)}}}function te(n){let t,l;return t=new Ie({props:{tag:n[19],popupTriggerEvent:n[2]}}),{c(){j(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,a){U(t,e,a),l=!0},p(e,a){const c={};a&1&&(c.tag=e[19]),a&4&&(c.popupTriggerEvent=e[2]),t.$set(c)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){y(t.$$.fragment,e),l=!1},d(e){G(t,e)}}}function De(n){let t,l,e,a;const c=[we,ke],i=[];function r(s,f){return s[1]?1:0}return l=r(n),e=i[l]=c[l](n),{c(){t=w("div"),e.c(),this.h()},l(s){t=D(s,"DIV",{class:!0});var f=B(t);e.l(f),f.forEach(m),this.h()},h(){$(t,"class","tags")},m(s,f){b(s,t,f),i[l].m(t,null),a=!0},p(s,[f]){let p=l;l=r(s),l===p?i[l].p(s,f):(J(),y(i[p],1,1,()=>{i[p]=null}),K(),e=i[l],e?e.p(s,f):(e=i[l]=c[l](s),e.c()),I(e,1),e.m(t,null))},i(s){a||(I(e),a=!0)},o(s){y(e),a=!1},d(s){s&&m(t),i[l].d()}}}function Ve(n,t,l){let e,a;const c=de(),i=ge({query:Ee,client:c,variables:{limit:100}});ve(n,i,o=>l(10,a=o));let{tags:r=[]}=t,{editable:s=!1}=t,{popupTriggerEvent:f="click"}=t;const p={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let g=[];const x=()=>l(3,g=r.map(o=>o.name));me(x);const E=o=>{const V=a.data?.getTags?.find(F=>F.id==o.value);l(0,r=[...r,{id:o.value,name:V?.name,description:V?.description}]),x()},k=o=>{const V=r.findIndex(F=>F.name===o);l(0,r=[...r.slice(0,V),...r.slice(V+1)]),x()};let T="";function A(o){T=o,l(4,T)}function C(o){g=o,l(3,g)}const d=o=>k(o.detail.chipValue),v=o=>g.indexOf(o.label)<0;function u(o){T=o,l(4,T)}const h=o=>E(o.detail);return n.$$set=o=>{"tags"in o&&l(0,r=o.tags),"editable"in o&&l(1,s=o.editable),"popupTriggerEvent"in o&&l(2,f=o.popupTriggerEvent)},n.$$.update=()=>{n.$$.dirty&1024&&l(5,e=a.data?.getTags?.map(o=>({label:`${o.name} - ${o.description}`,value:o.id}))||[])},[r,s,f,g,T,e,i,p,E,k,a,A,C,d,v,u,h]}class Be extends ae{constructor(t){super(),le(this,t,Ve,De,se,{tags:0,editable:1,popupTriggerEvent:2})}}export{Be as T,Ie as a};
//# sourceMappingURL=TagList.bv-gPzi6.js.map
