import{S as A,i as F,s as H,bh as J,p as K,P as R,e as O,R as I,u as L,I as b,U as _,a_ as U,d,V as M,v as T,w as V,J as P,X as S,Y as X,Z as v,a as E,_ as w,b as p,t as h,c as D,a4 as Y,a5 as N,aD as Z,aF as B,a9 as C,bi as Q,g as k,aG as W,aN as tt,K as q,L as y}from"../chunks/vendor.1ec771a9.js";import{r as et,E as at}from"../chunks/graphql.22d32a05.js";import{T as it}from"../chunks/Toast.060cf690.js";import{G as rt}from"../chunks/GuideForm.60461f05.js";import{M as nt}from"../chunks/MetaDescriptors.62de29c1.js";const st=async({params:n})=>({...n}),vt=Object.freeze(Object.defineProperty({__proto__:null,load:st},Symbol.toStringTag,{value:"Module"}));function j(n){let e,a;return e=new nt({props:{description:"Editing guide '"+n[2].data.getGuide.short_description+"'",title:"Edit guide '"+n[2].data.getGuide.name+"'"}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,i){w(e,t,i),a=!0},p(t,i){const o={};i&4&&(o.description="Editing guide '"+t[2].data.getGuide.short_description+"'"),i&4&&(o.title="Edit guide '"+t[2].data.getGuide.name+"'"),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ot(n){let e,a;return e=new rt({props:{onSubmit:n[4],initialValues:n[2].data.getGuide,submitText:"Save"}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,i){w(e,t,i),a=!0},p(t,i){const o={};i&4&&(o.initialValues=t[2].data.getGuide),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ft(n){let e,a,t=n[2].error.message+"",i;return{c(){e=L("p"),a=b("Oh no... "),i=b(t)},l(o){e=T(o,"P",{});var f=V(e);a=P(f,"Oh no... "),i=P(f,t),f.forEach(d)},m(o,f){E(o,e,f),v(e,a),v(e,i)},p(o,f){f&4&&t!==(t=o[2].error.message+"")&&q(i,t)},i:y,o:y,d(o){o&&d(e)}}}function lt(n){let e,a;return{c(){e=L("p"),a=b("Loading...")},l(t){e=T(t,"P",{});var i=V(e);a=P(i,"Loading..."),i.forEach(d)},m(t,i){E(t,e,i),v(e,a)},p:y,i:y,o:y,d(t){t&&d(e)}}}function ut(n){let e,a,t,i;const o=[lt,ft,ot],f=[];function $(s,c){return s[2].fetching?0:s[2].error?1:2}return e=$(n),a=f[e]=o[e](n),{c(){a.c(),t=O()},l(s){a.l(s),t=O()},m(s,c){f[e].m(s,c),E(s,t,c),i=!0},p(s,c){let m=e;e=$(s),e===m?f[e].p(s,c):(k(),h(f[m],1,1,()=>{f[m]=null}),D(),a=f[e],a?a.p(s,c):(a=f[e]=o[e](s),a.c()),p(a,1),a.m(t.parentNode,t))},i(s){i||(p(a),i=!0)},o(s){h(a),i=!1},d(s){f[e].d(s),s&&d(t)}}}function dt(n){let e,a;return e=new Q({props:{$$slots:{default:[ut]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,i){w(e,t,i),a=!0},p(t,i){const o={};i&516&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ct(n){let e,a;return{c(){e=L("span"),a=b(n[1])},l(t){e=T(t,"SPAN",{});var i=V(e);a=P(i,n[1]),i.forEach(d)},m(t,i){E(t,e,i),v(e,a)},p(t,i){i&2&&q(a,t[1])},d(t){t&&d(e)}}}function $t(n){let e,a,t,i,o,f,$,s,c,m,l=!n[2].fetching&&!n[2].error&&n[2].data.getGuide&&j(n);f=new J({props:{$$slots:{default:[dt]},$$scope:{ctx:n}}});function g(r){n[6](r)}let G={$$slots:{default:[ct]},$$scope:{ctx:n}};return n[0]!==void 0&&(G.running=n[0]),s=new it({props:G}),K.push(()=>R(s,"running",g)),{c(){l&&l.c(),e=O(),a=I(),t=L("h1"),i=b("Edit Guide"),o=I(),_(f.$$.fragment),$=I(),_(s.$$.fragment),this.h()},l(r){const u=U("svelte-2z35li",document.head);l&&l.l(u),e=O(),u.forEach(d),a=M(r),t=T(r,"H1",{class:!0});var x=V(t);i=P(x,"Edit Guide"),x.forEach(d),o=M(r),S(f.$$.fragment,r),$=M(r),S(s.$$.fragment,r),this.h()},h(){X(t,"class","text-4xl my-4 font-bold")},m(r,u){l&&l.m(document.head,null),v(document.head,e),E(r,a,u),E(r,t,u),v(t,i),E(r,o,u),w(f,r,u),E(r,$,u),w(s,r,u),m=!0},p(r,[u]){!r[2].fetching&&!r[2].error&&r[2].data.getGuide?l?(l.p(r,u),u&4&&p(l,1)):(l=j(r),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(k(),h(l,1,1,()=>{l=null}),D());const x={};u&516&&(x.$$scope={dirty:u,ctx:r}),f.$set(x);const z={};u&514&&(z.$$scope={dirty:u,ctx:r}),!c&&u&1&&(c=!0,z.running=r[0],Y(()=>c=!1)),s.$set(z)},i(r){m||(p(l),p(f.$$.fragment,r),p(s.$$.fragment,r),m=!0)},o(r){h(l),h(f.$$.fragment,r),h(s.$$.fragment,r),m=!1},d(r){l&&l.d(r),d(e),r&&d(a),r&&d(t),r&&d(o),N(f,r),r&&d($),N(s,r)}}}function mt(n,e,a){let t,i,{data:o}=e;const f=Z();let $="",s=!1;const c=B({query:et,client:f,variables:{guide:t}});C(n,c,g=>a(2,i=g));const m=g=>{f.mutation(at,{guideId:t,guide:g}).toPromise().then(G=>{G.error?(console.error(G.error.message),a(1,$="Error editing guide: "+G.error.message),a(0,s=!0)):W(tt+"/guide/"+G.data.updateGuide.id)})};function l(g){s=g,a(0,s)}return n.$$set=g=>{"data"in g&&a(5,o=g.data)},n.$$.update=()=>{n.$$.dirty&32&&({guideId:t}=o),n.$$.dirty&1&&(s||a(1,$=""))},[s,$,i,c,m,o,l]}class xt extends A{constructor(e){super(),F(this,e,mt,$t,H,{data:5})}}export{xt as component,vt as universal};
//# sourceMappingURL=13.a30b8c93.js.map
