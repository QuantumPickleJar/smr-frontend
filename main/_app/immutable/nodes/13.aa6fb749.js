import{S as A,i as H,s as J,bh as K,p as R,P as U,e as O,R as I,u as L,I as y,U as _,a_ as X,d,V as M,v as T,w as V,J as P,X as S,Y,Z as v,a as E,_ as w,b as p,t as h,c as D,a4 as Z,a5 as N,aD as B,aE as C,a9 as F,bi as Q,g as k,aG as W,aN as tt,K as q,L as b}from"../chunks/vendor.60cf38ca.js";import{r as et,E as at}from"../chunks/graphql.eeb20993.js";import{T as rt}from"../chunks/Toast.3d14c6fd.js";import{G as it}from"../chunks/GuideForm.ff8dbb5f.js";import{M as st}from"../chunks/MetaDescriptors.08165346.js";const nt=async({params:s})=>({...s}),vt=Object.freeze(Object.defineProperty({__proto__:null,load:nt},Symbol.toStringTag,{value:"Module"}));function j(s){let e,a;return e=new st({props:{description:"Editing guide '"+s[2].data.getGuide.short_description+"'",title:"Edit guide '"+s[2].data.getGuide.name+"'"}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){w(e,t,r),a=!0},p(t,r){const o={};r&4&&(o.description="Editing guide '"+t[2].data.getGuide.short_description+"'"),r&4&&(o.title="Edit guide '"+t[2].data.getGuide.name+"'"),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ot(s){let e,a;return e=new it({props:{onSubmit:s[4],initialValues:s[2].data.getGuide,submitText:"Save"}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){w(e,t,r),a=!0},p(t,r){const o={};r&4&&(o.initialValues=t[2].data.getGuide),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ft(s){let e,a,t=s[2].error.message+"",r;return{c(){e=L("p"),a=y("Oh no... "),r=y(t)},l(o){e=T(o,"P",{});var f=V(e);a=P(f,"Oh no... "),r=P(f,t),f.forEach(d)},m(o,f){E(o,e,f),v(e,a),v(e,r)},p(o,f){f&4&&t!==(t=o[2].error.message+"")&&q(r,t)},i:b,o:b,d(o){o&&d(e)}}}function lt(s){let e,a;return{c(){e=L("p"),a=y("Loading...")},l(t){e=T(t,"P",{});var r=V(e);a=P(r,"Loading..."),r.forEach(d)},m(t,r){E(t,e,r),v(e,a)},p:b,i:b,o:b,d(t){t&&d(e)}}}function ut(s){let e,a,t,r;const o=[lt,ft,ot],f=[];function $(n,c){return n[2].fetching?0:n[2].error?1:2}return e=$(s),a=f[e]=o[e](s),{c(){a.c(),t=O()},l(n){a.l(n),t=O()},m(n,c){f[e].m(n,c),E(n,t,c),r=!0},p(n,c){let m=e;e=$(n),e===m?f[e].p(n,c):(k(),h(f[m],1,1,()=>{f[m]=null}),D(),a=f[e],a?a.p(n,c):(a=f[e]=o[e](n),a.c()),p(a,1),a.m(t.parentNode,t))},i(n){r||(p(a),r=!0)},o(n){h(a),r=!1},d(n){f[e].d(n),n&&d(t)}}}function dt(s){let e,a;return e=new Q({props:{$$slots:{default:[ut]},$$scope:{ctx:s}}}),{c(){_(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){w(e,t,r),a=!0},p(t,r){const o={};r&516&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){h(e.$$.fragment,t),a=!1},d(t){N(e,t)}}}function ct(s){let e,a;return{c(){e=L("span"),a=y(s[1])},l(t){e=T(t,"SPAN",{});var r=V(e);a=P(r,s[1]),r.forEach(d)},m(t,r){E(t,e,r),v(e,a)},p(t,r){r&2&&q(a,t[1])},d(t){t&&d(e)}}}function $t(s){let e,a,t,r,o,f,$,n,c,m,l=!s[2].fetching&&!s[2].error&&s[2].data.getGuide&&j(s);f=new K({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}});function g(i){s[6](i)}let G={$$slots:{default:[ct]},$$scope:{ctx:s}};return s[0]!==void 0&&(G.running=s[0]),n=new rt({props:G}),R.push(()=>U(n,"running",g)),{c(){l&&l.c(),e=O(),a=I(),t=L("h1"),r=y("Edit Guide"),o=I(),_(f.$$.fragment),$=I(),_(n.$$.fragment),this.h()},l(i){const u=X("svelte-2z35li",document.head);l&&l.l(u),e=O(),u.forEach(d),a=M(i),t=T(i,"H1",{class:!0});var x=V(t);r=P(x,"Edit Guide"),x.forEach(d),o=M(i),S(f.$$.fragment,i),$=M(i),S(n.$$.fragment,i),this.h()},h(){Y(t,"class","text-4xl my-4 font-bold")},m(i,u){l&&l.m(document.head,null),v(document.head,e),E(i,a,u),E(i,t,u),v(t,r),E(i,o,u),w(f,i,u),E(i,$,u),w(n,i,u),m=!0},p(i,[u]){!i[2].fetching&&!i[2].error&&i[2].data.getGuide?l?(l.p(i,u),u&4&&p(l,1)):(l=j(i),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(k(),h(l,1,1,()=>{l=null}),D());const x={};u&516&&(x.$$scope={dirty:u,ctx:i}),f.$set(x);const z={};u&514&&(z.$$scope={dirty:u,ctx:i}),!c&&u&1&&(c=!0,z.running=i[0],Z(()=>c=!1)),n.$set(z)},i(i){m||(p(l),p(f.$$.fragment,i),p(n.$$.fragment,i),m=!0)},o(i){h(l),h(f.$$.fragment,i),h(n.$$.fragment,i),m=!1},d(i){l&&l.d(i),d(e),i&&d(a),i&&d(t),i&&d(o),N(f,i),i&&d($),N(n,i)}}}function mt(s,e,a){let t,{data:r}=e;const{guideId:o}=r,f=B();let $="",n=!1;const c=C({query:et,client:f,variables:{guide:o}});F(s,c,g=>a(2,t=g));const m=g=>{f.mutation(at,{guideId:o,guide:g}).toPromise().then(G=>{G.error?(console.error(G.error.message),a(1,$="Error editing guide: "+G.error.message),a(0,n=!0)):W(tt+"/guide/"+G.data.updateGuide.id)})};function l(g){n=g,a(0,n)}return s.$$set=g=>{"data"in g&&a(5,r=g.data)},s.$$.update=()=>{s.$$.dirty&1&&(n||a(1,$=""))},[n,$,t,c,m,r,l]}class xt extends A{constructor(e){super(),H(this,e,mt,$t,J,{data:5})}}export{xt as component,vt as universal};
//# sourceMappingURL=13.aa6fb749.js.map
