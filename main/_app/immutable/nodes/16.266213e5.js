import{S as G,i as H,s as J,bh as K,p as R,P as U,e as N,R as q,u as I,I as y,U as S,a_ as X,d as c,V as A,v as L,w as O,J as _,X as w,Y,Z as b,a as E,_ as M,b as g,t as h,c as D,a4 as Z,a5 as P,aD as B,aE as C,a9 as F,bi as Q,g as k,aA as W,aG as ee,aN as te,K as z,L as x}from"../chunks/vendor.d26e534c.js";import{u as ae,y as re}from"../chunks/graphql.eeb20993.js";import{T as ne}from"../chunks/Toast.641a8e0d.js";import{M as oe}from"../chunks/ModForm.66803560.js";import{M as se}from"../chunks/MetaDescriptors.c81cf98a.js";const ie=async({params:o})=>({...o}),xe=Object.freeze(Object.defineProperty({__proto__:null,load:ie},Symbol.toStringTag,{value:"Module"}));function j(o){let t,a;return t=new se({props:{description:"Editing mod "+o[1].data.mod.name,title:"Edit mod "+o[1].data.mod.name,image:o[1].data.mod.logo}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const i={};r&2&&(i.description="Editing mod "+e[1].data.mod.name),r&2&&(i.title="Edit mod "+e[1].data.mod.name),r&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function fe(o){let t,a;return t=new oe({props:{onSubmit:o[5],initialValues:o[3],editing:!0,submitText:"Save"}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const i={};r&8&&(i.initialValues=e[3]),t.$set(i)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function le(o){let t,a,e=o[1].error.message+"",r;return{c(){t=I("p"),a=y("Oh no... "),r=y(e)},l(i){t=L(i,"P",{});var f=O(t);a=_(f,"Oh no... "),r=_(f,e),f.forEach(c)},m(i,f){E(i,t,f),b(t,a),b(t,r)},p(i,f){f&2&&e!==(e=i[1].error.message+"")&&z(r,e)},i:x,o:x,d(i){i&&c(t)}}}function de(o){let t,a;return{c(){t=I("p"),a=y("Loading...")},l(e){t=L(e,"P",{});var r=O(t);a=_(r,"Loading..."),r.forEach(c)},m(e,r){E(e,t,r),b(t,a)},p:x,i:x,o:x,d(e){e&&c(t)}}}function me(o){let t,a,e,r;const i=[de,le,fe],f=[];function p(s,m){return s[1].fetching?0:s[1].error?1:2}return t=p(o),a=f[t]=i[t](o),{c(){a.c(),e=N()},l(s){a.l(s),e=N()},m(s,m){f[t].m(s,m),E(s,e,m),r=!0},p(s,m){let u=t;t=p(s),t===u?f[t].p(s,m):(k(),h(f[u],1,1,()=>{f[u]=null}),D(),a=f[t],a?a.p(s,m):(a=f[t]=i[t](s),a.c()),g(a,1),a.m(e.parentNode,e))},i(s){r||(g(a),r=!0)},o(s){h(a),r=!1},d(s){f[t].d(s),s&&c(e)}}}function ce(o){let t,a;return t=new Q({props:{$$slots:{default:[me]},$$scope:{ctx:o}}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const i={};r&1034&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function ue(o){let t,a;return{c(){t=I("span"),a=y(o[2])},l(e){t=L(e,"SPAN",{});var r=O(t);a=_(r,o[2]),r.forEach(c)},m(e,r){E(e,t,r),b(t,a)},p(e,r){r&4&&z(a,e[2])},d(e){e&&c(t)}}}function $e(o){let t,a,e,r,i,f,p,s,m,u,l=!o[1].fetching&&!o[1].error&&o[1].data.mod&&j(o);f=new K({props:{$$slots:{default:[ce]},$$scope:{ctx:o}}});function T(n){o[7](n)}let $={$$slots:{default:[ue]},$$scope:{ctx:o}};return o[0]!==void 0&&($.running=o[0]),s=new ne({props:$}),R.push(()=>U(s,"running",T)),{c(){l&&l.c(),t=N(),a=q(),e=I("h1"),r=y("Edit Mod"),i=q(),S(f.$$.fragment),p=q(),S(s.$$.fragment),this.h()},l(n){const d=X("svelte-q8g25b",document.head);l&&l.l(d),t=N(),d.forEach(c),a=A(n),e=L(n,"H1",{class:!0});var v=O(e);r=_(v,"Edit Mod"),v.forEach(c),i=A(n),w(f.$$.fragment,n),p=A(n),w(s.$$.fragment,n),this.h()},h(){Y(e,"class","text-4xl my-4 font-bold")},m(n,d){l&&l.m(document.head,null),b(document.head,t),E(n,a,d),E(n,e,d),b(e,r),E(n,i,d),M(f,n,d),E(n,p,d),M(s,n,d),u=!0},p(n,[d]){!n[1].fetching&&!n[1].error&&n[1].data.mod?l?(l.p(n,d),d&2&&g(l,1)):(l=j(n),l.c(),g(l,1),l.m(t.parentNode,t)):l&&(k(),h(l,1,1,()=>{l=null}),D());const v={};d&1034&&(v.$$scope={dirty:d,ctx:n}),f.$set(v);const V={};d&1028&&(V.$$scope={dirty:d,ctx:n}),!m&&d&1&&(m=!0,V.running=n[0],Z(()=>m=!1)),s.$set(V)},i(n){u||(g(l),g(f.$$.fragment,n),g(s.$$.fragment,n),u=!0)},o(n){h(l),h(f.$$.fragment,n),h(s.$$.fragment,n),u=!1},d(n){l&&l.d(n),c(t),n&&c(a),n&&c(e),n&&c(i),P(f,n),n&&c(p),P(s,n)}}}function pe(o,t,a){let e,r,{data:i}=t;const{modId:f}=i,p=B();let s="",m=!1;const u=C({query:ae,client:p,variables:{mod:f}});F(o,u,$=>a(1,r=$));const l=$=>{p.mutation(re,{modId:W(u).data.mod.id,mod:$}).toPromise().then(n=>{n.error?(console.error(n.error.message),a(2,s="Error editing mod: "+n.error.message),a(0,m=!0)):ee(te+"/mod/"+n.data.updateMod.id)})};function T($){m=$,a(0,m)}return o.$$set=$=>{"data"in $&&a(6,i=$.data)},o.$$.update=()=>{o.$$.dirty&1&&(m||a(2,s="")),o.$$.dirty&2&&a(3,e=r.data?{...r.data.mod,logo:void 0}:void 0)},[m,r,s,e,u,l,i,T]}class ye extends G{constructor(t){super(),H(this,t,pe,$e,J,{data:6})}}export{ye as component,xe as universal};
//# sourceMappingURL=16.266213e5.js.map
