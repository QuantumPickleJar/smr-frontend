import{S as F,i as G,s as H,bh as J,p as K,P as R,e as N,R as A,u as O,I as x,U as S,a_ as U,d as c,V as L,v as I,w as T,J as _,X as w,Y as X,Z as E,a as y,_ as M,b as g,t as h,c as z,a4 as Y,a5 as P,aD as Z,aF as B,a9 as C,bi as Q,g as k,aA as W,aG as ee,aN as te,K as D,L as v}from"../chunks/vendor.1ec771a9.js";import{u as ae,y as re}from"../chunks/graphql.22d32a05.js";import{T as ne}from"../chunks/Toast.060cf690.js";import{M as oe}from"../chunks/ModForm.fba60fcc.js";import{M as se}from"../chunks/MetaDescriptors.62de29c1.js";const ie=async({params:o})=>({...o}),ve=Object.freeze(Object.defineProperty({__proto__:null,load:ie},Symbol.toStringTag,{value:"Module"}));function j(o){let t,a;return t=new se({props:{description:"Editing mod "+o[1].data.mod.name,title:"Edit mod "+o[1].data.mod.name,image:o[1].data.mod.logo}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const s={};r&2&&(s.description="Editing mod "+e[1].data.mod.name),r&2&&(s.title="Edit mod "+e[1].data.mod.name),r&2&&(s.image=e[1].data.mod.logo),t.$set(s)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function fe(o){let t,a;return t=new oe({props:{onSubmit:o[5],initialValues:o[3],editing:!0,submitText:"Save"}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const s={};r&8&&(s.initialValues=e[3]),t.$set(s)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function le(o){let t,a,e=o[1].error.message+"",r;return{c(){t=O("p"),a=x("Oh no... "),r=x(e)},l(s){t=I(s,"P",{});var f=T(t);a=_(f,"Oh no... "),r=_(f,e),f.forEach(c)},m(s,f){y(s,t,f),E(t,a),E(t,r)},p(s,f){f&2&&e!==(e=s[1].error.message+"")&&D(r,e)},i:v,o:v,d(s){s&&c(t)}}}function de(o){let t,a;return{c(){t=O("p"),a=x("Loading...")},l(e){t=I(e,"P",{});var r=T(t);a=_(r,"Loading..."),r.forEach(c)},m(e,r){y(e,t,r),E(t,a)},p:v,i:v,o:v,d(e){e&&c(t)}}}function me(o){let t,a,e,r;const s=[de,le,fe],f=[];function p(i,m){return i[1].fetching?0:i[1].error?1:2}return t=p(o),a=f[t]=s[t](o),{c(){a.c(),e=N()},l(i){a.l(i),e=N()},m(i,m){f[t].m(i,m),y(i,e,m),r=!0},p(i,m){let u=t;t=p(i),t===u?f[t].p(i,m):(k(),h(f[u],1,1,()=>{f[u]=null}),z(),a=f[t],a?a.p(i,m):(a=f[t]=s[t](i),a.c()),g(a,1),a.m(e.parentNode,e))},i(i){r||(g(a),r=!0)},o(i){h(a),r=!1},d(i){f[t].d(i),i&&c(e)}}}function ce(o){let t,a;return t=new Q({props:{$$slots:{default:[me]},$$scope:{ctx:o}}}),{c(){S(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){M(t,e,r),a=!0},p(e,r){const s={};r&1034&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){P(t,e)}}}function ue(o){let t,a;return{c(){t=O("span"),a=x(o[2])},l(e){t=I(e,"SPAN",{});var r=T(t);a=_(r,o[2]),r.forEach(c)},m(e,r){y(e,t,r),E(t,a)},p(e,r){r&4&&D(a,e[2])},d(e){e&&c(t)}}}function $e(o){let t,a,e,r,s,f,p,i,m,u,l=!o[1].fetching&&!o[1].error&&o[1].data.mod&&j(o);f=new J({props:{$$slots:{default:[ce]},$$scope:{ctx:o}}});function V(n){o[7](n)}let $={$$slots:{default:[ue]},$$scope:{ctx:o}};return o[0]!==void 0&&($.running=o[0]),i=new ne({props:$}),K.push(()=>R(i,"running",V)),{c(){l&&l.c(),t=N(),a=A(),e=O("h1"),r=x("Edit Mod"),s=A(),S(f.$$.fragment),p=A(),S(i.$$.fragment),this.h()},l(n){const d=U("svelte-q8g25b",document.head);l&&l.l(d),t=N(),d.forEach(c),a=L(n),e=I(n,"H1",{class:!0});var b=T(e);r=_(b,"Edit Mod"),b.forEach(c),s=L(n),w(f.$$.fragment,n),p=L(n),w(i.$$.fragment,n),this.h()},h(){X(e,"class","text-4xl my-4 font-bold")},m(n,d){l&&l.m(document.head,null),E(document.head,t),y(n,a,d),y(n,e,d),E(e,r),y(n,s,d),M(f,n,d),y(n,p,d),M(i,n,d),u=!0},p(n,[d]){!n[1].fetching&&!n[1].error&&n[1].data.mod?l?(l.p(n,d),d&2&&g(l,1)):(l=j(n),l.c(),g(l,1),l.m(t.parentNode,t)):l&&(k(),h(l,1,1,()=>{l=null}),z());const b={};d&1034&&(b.$$scope={dirty:d,ctx:n}),f.$set(b);const q={};d&1028&&(q.$$scope={dirty:d,ctx:n}),!m&&d&1&&(m=!0,q.running=n[0],Y(()=>m=!1)),i.$set(q)},i(n){u||(g(l),g(f.$$.fragment,n),g(i.$$.fragment,n),u=!0)},o(n){h(l),h(f.$$.fragment,n),h(i.$$.fragment,n),u=!1},d(n){l&&l.d(n),c(t),n&&c(a),n&&c(e),n&&c(s),P(f,n),n&&c(p),P(i,n)}}}function pe(o,t,a){let e,r,s,{data:f}=t;const p=Z();let i="",m=!1;const u=B({query:ae,client:p,variables:{mod:e}});C(o,u,$=>a(1,s=$));const l=$=>{p.mutation(re,{modId:W(u).data.mod.id,mod:$}).toPromise().then(n=>{n.error?(console.error(n.error.message),a(2,i="Error editing mod: "+n.error.message),a(0,m=!0)):ee(te+"/mod/"+n.data.updateMod.id)})};function V($){m=$,a(0,m)}return o.$$set=$=>{"data"in $&&a(6,f=$.data)},o.$$.update=()=>{o.$$.dirty&64&&({modId:e}=f),o.$$.dirty&1&&(m||a(2,i="")),o.$$.dirty&2&&a(3,r=s.data?{...s.data.mod,logo:void 0}:void 0)},[m,s,i,r,u,l,f,V]}class xe extends F{constructor(t){super(),G(this,t,pe,$e,H,{data:6})}}export{xe as component,ve as universal};
//# sourceMappingURL=17.248c5b55.js.map
