import{S as q,i as A,s as G,bh as H,p as K,P as U,e as I,R as L,u as N,I as x,U as y,a_ as X,d as u,V as M,v as O,w as R,J as b,X as P,Y,Z as h,a as v,_,b as g,t as p,c as k,a4 as Z,a5 as w,aD as B,aE as C,a9 as F,bi as Q,g as D,aG as W,aN as tt,K as J,L as E}from"../chunks/vendor.34a7aa6b.js";import{J as et,P as rt}from"../chunks/graphql.eeb20993.js";import{T as nt}from"../chunks/Toast.fcb53de1.js";import{V as at}from"../chunks/VersionForm.71cea2e0.js";import{M as st}from"../chunks/MetaDescriptors.47598ef8.js";const ot=async({params:s})=>({...s}),Et=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function j(s){let e,r;return e=new st({props:{description:"Editing mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version,title:"Edit mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version}}),{c(){y(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const o={};a&2&&(o.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),a&2&&(o.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function it(s){let e,r;return e=new at({props:{onSubmit:s[5],initialValues:s[3],modReference:s[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){y(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const o={};a&8&&(o.initialValues=t[3]),a&2&&(o.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function ft(s){let e,r,t=s[1].error.message+"",a;return{c(){e=N("p"),r=x("Oh no... "),a=x(t)},l(o){e=O(o,"P",{});var f=R(e);r=b(f,"Oh no... "),a=b(f,t),f.forEach(u)},m(o,f){v(o,e,f),h(e,r),h(e,a)},p(o,f){f&2&&t!==(t=o[1].error.message+"")&&J(a,t)},i:E,o:E,d(o){o&&u(e)}}}function lt(s){let e,r;return{c(){e=N("p"),r=x("Loading...")},l(t){e=O(t,"P",{});var a=R(e);r=b(a,"Loading..."),a.forEach(u)},m(t,a){v(t,e,a),h(e,r)},p:E,i:E,o:E,d(t){t&&u(e)}}}function dt(s){let e,r,t,a;const o=[lt,ft,it],f=[];function $(i,c){return i[1].fetching?0:i[1].error?1:2}return e=$(s),r=f[e]=o[e](s),{c(){r.c(),t=I()},l(i){r.l(i),t=I()},m(i,c){f[e].m(i,c),v(i,t,c),a=!0},p(i,c){let m=e;e=$(i),e===m?f[e].p(i,c):(D(),p(f[m],1,1,()=>{f[m]=null}),k(),r=f[e],r?r.p(i,c):(r=f[e]=o[e](i),r.c()),g(r,1),r.m(t.parentNode,t))},i(i){a||(g(r),a=!0)},o(i){p(r),a=!1},d(i){f[e].d(i),i&&u(t)}}}function ct(s){let e,r;return e=new Q({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const o={};a&2058&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function mt(s){let e,r;return{c(){e=N("span"),r=x(s[2])},l(t){e=O(t,"SPAN",{});var a=R(e);r=b(a,s[2]),a.forEach(u)},m(t,a){v(t,e,a),h(e,r)},p(t,a){a&4&&J(r,t[2])},d(t){t&&u(e)}}}function ut(s){let e,r,t,a,o,f,$,i,c,m,l=!s[1].fetching&&!s[1].error&&s[1].data.getVersion&&j(s);f=new H({props:{$$slots:{default:[ct]},$$scope:{ctx:s}}});function T(n){s[7](n)}let S={$$slots:{default:[mt]},$$scope:{ctx:s}};return s[0]!==void 0&&(S.running=s[0]),i=new nt({props:S}),K.push(()=>U(i,"running",T)),{c(){l&&l.c(),e=I(),r=L(),t=N("h1"),a=x("Edit Version"),o=L(),y(f.$$.fragment),$=L(),y(i.$$.fragment),this.h()},l(n){const d=X("svelte-wzsk0g",document.head);l&&l.l(d),e=I(),d.forEach(u),r=M(n),t=O(n,"H1",{class:!0});var V=R(t);a=b(V,"Edit Version"),V.forEach(u),o=M(n),P(f.$$.fragment,n),$=M(n),P(i.$$.fragment,n),this.h()},h(){Y(t,"class","text-4xl my-4 font-bold")},m(n,d){l&&l.m(document.head,null),h(document.head,e),v(n,r,d),v(n,t,d),h(t,a),v(n,o,d),_(f,n,d),v(n,$,d),_(i,n,d),m=!0},p(n,[d]){!n[1].fetching&&!n[1].error&&n[1].data.getVersion?l?(l.p(n,d),d&2&&g(l,1)):(l=j(n),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(D(),p(l,1,1,()=>{l=null}),k());const V={};d&2058&&(V.$$scope={dirty:d,ctx:n}),f.$set(V);const z={};d&2052&&(z.$$scope={dirty:d,ctx:n}),!c&&d&1&&(c=!0,z.running=n[0],Z(()=>c=!1)),i.$set(z)},i(n){m||(g(l),g(f.$$.fragment,n),g(i.$$.fragment,n),m=!0)},o(n){p(l),p(f.$$.fragment,n),p(i.$$.fragment,n),m=!1},d(n){l&&l.d(n),u(e),n&&u(r),n&&u(t),n&&u(o),w(f,n),n&&u($),w(i,n)}}}function $t(s,e,r){let t,a,{data:o}=e;const{modId:f,versionId:$}=o,i=B();let c="",m=!1;const l=C({query:et,client:i,variables:{version:$}});F(s,l,n=>r(1,a=n));const T=async n=>i.mutation(rt,{versionId:$,version:n}).toPromise().then(d=>{if(d.error)console.error(d.error.message),r(2,c="Error editing version: "+d.error.message),r(0,m=!0);else return W(tt+"/mod/"+f+"/version/"+$)});function S(n){m=n,r(0,m)}return s.$$set=n=>{"data"in n&&r(6,o=n.data)},s.$$.update=()=>{s.$$.dirty&1&&(m||r(2,c="")),s.$$.dirty&2&&r(3,t=a.data?{...a.data.getVersion,logo:void 0}:void 0)},[m,a,c,t,l,T,o,S]}class xt extends q{constructor(e){super(),A(this,e,$t,ut,G,{data:6})}}export{xt as component,Et as universal};
//# sourceMappingURL=20.8217b386.js.map
