import{S as q,i as A,s as F,bh as G,p as H,P as K,e as I,R as L,u as N,I as E,U as x,a_ as U,d as u,V as M,v as O,w as R,J as b,X as P,Y as X,Z as h,a as v,_,b as g,t as p,c as k,a4 as Y,a5 as w,aD as Z,aF as B,a9 as C,bi as Q,g as D,aG as W,aN as tt,K as J,L as y}from"../chunks/vendor.b9433985.js";import{J as et,P as rt}from"../chunks/graphql.eeb20993.js";import{T as nt}from"../chunks/Toast.3ad0b1e6.js";import{V as at}from"../chunks/VersionForm.ea3dc9d3.js";import{M as st}from"../chunks/MetaDescriptors.a1e3c9f2.js";const it=async({params:s})=>({...s}),yt=Object.freeze(Object.defineProperty({__proto__:null,load:it},Symbol.toStringTag,{value:"Module"}));function j(s){let e,r;return e=new st({props:{description:"Editing mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version,title:"Edit mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version}}),{c(){x(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const f={};a&2&&(f.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),a&2&&(f.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function ot(s){let e,r;return e=new at({props:{onSubmit:s[5],initialValues:s[3],modReference:s[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){x(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const f={};a&8&&(f.initialValues=t[3]),a&2&&(f.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function ft(s){let e,r,t=s[1].error.message+"",a;return{c(){e=N("p"),r=E("Oh no... "),a=E(t)},l(f){e=O(f,"P",{});var i=R(e);r=b(i,"Oh no... "),a=b(i,t),i.forEach(u)},m(f,i){v(f,e,i),h(e,r),h(e,a)},p(f,i){i&2&&t!==(t=f[1].error.message+"")&&J(a,t)},i:y,o:y,d(f){f&&u(e)}}}function lt(s){let e,r;return{c(){e=N("p"),r=E("Loading...")},l(t){e=O(t,"P",{});var a=R(e);r=b(a,"Loading..."),a.forEach(u)},m(t,a){v(t,e,a),h(e,r)},p:y,i:y,o:y,d(t){t&&u(e)}}}function dt(s){let e,r,t,a;const f=[lt,ft,ot],i=[];function $(o,c){return o[1].fetching?0:o[1].error?1:2}return e=$(s),r=i[e]=f[e](s),{c(){r.c(),t=I()},l(o){r.l(o),t=I()},m(o,c){i[e].m(o,c),v(o,t,c),a=!0},p(o,c){let m=e;e=$(o),e===m?i[e].p(o,c):(D(),p(i[m],1,1,()=>{i[m]=null}),k(),r=i[e],r?r.p(o,c):(r=i[e]=f[e](o),r.c()),g(r,1),r.m(t.parentNode,t))},i(o){a||(g(r),a=!0)},o(o){p(r),a=!1},d(o){i[e].d(o),o&&u(t)}}}function ct(s){let e,r;return e=new Q({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),{c(){x(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){_(e,t,a),r=!0},p(t,a){const f={};a&2058&&(f.$$scope={dirty:a,ctx:t}),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function mt(s){let e,r;return{c(){e=N("span"),r=E(s[2])},l(t){e=O(t,"SPAN",{});var a=R(e);r=b(a,s[2]),a.forEach(u)},m(t,a){v(t,e,a),h(e,r)},p(t,a){a&4&&J(r,t[2])},d(t){t&&u(e)}}}function ut(s){let e,r,t,a,f,i,$,o,c,m,l=!s[1].fetching&&!s[1].error&&s[1].data.getVersion&&j(s);i=new G({props:{$$slots:{default:[ct]},$$scope:{ctx:s}}});function T(n){s[7](n)}let S={$$slots:{default:[mt]},$$scope:{ctx:s}};return s[0]!==void 0&&(S.running=s[0]),o=new nt({props:S}),H.push(()=>K(o,"running",T)),{c(){l&&l.c(),e=I(),r=L(),t=N("h1"),a=E("Edit Version"),f=L(),x(i.$$.fragment),$=L(),x(o.$$.fragment),this.h()},l(n){const d=U("svelte-wzsk0g",document.head);l&&l.l(d),e=I(),d.forEach(u),r=M(n),t=O(n,"H1",{class:!0});var V=R(t);a=b(V,"Edit Version"),V.forEach(u),f=M(n),P(i.$$.fragment,n),$=M(n),P(o.$$.fragment,n),this.h()},h(){X(t,"class","text-4xl my-4 font-bold")},m(n,d){l&&l.m(document.head,null),h(document.head,e),v(n,r,d),v(n,t,d),h(t,a),v(n,f,d),_(i,n,d),v(n,$,d),_(o,n,d),m=!0},p(n,[d]){!n[1].fetching&&!n[1].error&&n[1].data.getVersion?l?(l.p(n,d),d&2&&g(l,1)):(l=j(n),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(D(),p(l,1,1,()=>{l=null}),k());const V={};d&2058&&(V.$$scope={dirty:d,ctx:n}),i.$set(V);const z={};d&2052&&(z.$$scope={dirty:d,ctx:n}),!c&&d&1&&(c=!0,z.running=n[0],Y(()=>c=!1)),o.$set(z)},i(n){m||(g(l),g(i.$$.fragment,n),g(o.$$.fragment,n),m=!0)},o(n){p(l),p(i.$$.fragment,n),p(o.$$.fragment,n),m=!1},d(n){l&&l.d(n),u(e),n&&u(r),n&&u(t),n&&u(f),w(i,n),n&&u($),w(o,n)}}}function $t(s,e,r){let t,a,f,i,{data:$}=e;const o=Z();let c="",m=!1;const l=B({query:et,client:o,variables:{version:a}});C(s,l,n=>r(1,i=n));const T=async n=>o.mutation(rt,{versionId:a,version:n}).toPromise().then(d=>{if(d.error)console.error(d.error.message),r(2,c="Error editing version: "+d.error.message),r(0,m=!0);else return W(tt+"/mod/"+t+"/version/"+a)});function S(n){m=n,r(0,m)}return s.$$set=n=>{"data"in n&&r(6,$=n.data)},s.$$.update=()=>{s.$$.dirty&64&&({modId:t,versionId:a}=$),s.$$.dirty&1&&(m||r(2,c="")),s.$$.dirty&2&&r(3,f=i.data?{...i.data.getVersion,logo:void 0}:void 0)},[m,i,c,f,l,T,$,S]}class Et extends q{constructor(e){super(),A(this,e,$t,ut,F,{data:6})}}export{Et as component,yt as universal};
//# sourceMappingURL=20.8d582fd4.js.map
