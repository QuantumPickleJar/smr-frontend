import{S as me,i as ve,s as $e,d as S,v as Te,ay as J,e as C,W as se,b as G,g as I,h as j,M as we,X as oe,j as v,k as M,N as w,m as P,az as ie,ak as ae,l as Be,n as k,Q as R,ad as be,Z as Ce,Y as re,aA as Ie,u as le,a6 as Pe,aB as Le,F as ce,G as pe,a1 as Ne,a2 as je,a as ue,aC as ye,aD as Ee,p as te,t as N,q as ne,r as x,y as _,I as H,U as fe,J as U,L as Q,O as W,T as F,R as X,f as ge,V as Se}from"./vendor.Czl8MgDJ.js";import{a as de}from"./graphql.NT0BIh3j.js";const V="src/lib/components/utils/TagDisplay.svelte";function Y(s){let e,t,n,i="#",p=s[0].name+"",l,u,f,a,o,g,c,T=s[0].description+"",y,D,L,b;const q={c:function(){e=C("button"),t=C("div"),n=C("span"),n.textContent=i,l=se(p),o=G(),g=C("div"),c=C("p"),y=se(T),this.h()},l:function(m){e=I(m,"BUTTON",{class:!0});var h=j(e);t=I(h,"DIV",{class:!0,title:!0});var d=j(t);n=I(d,"SPAN",{class:!0,"data-svelte-h":!0}),we(n)!=="svelte-sdcp3o"&&(n.textContent=i),l=oe(d,p),d.forEach(v),h.forEach(v),o=M(m),g=I(m,"DIV",{class:!0,"data-popup":!0,style:!0});var $=j(g);c=I($,"P",{class:!0});var E=j(c);y=oe(E,T),E.forEach(v),$.forEach(v),this.h()},h:function(){w(n,"class","text-orange-500 s-lCk39qNJIzvi"),P(n,V,23,4,650),w(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none s-lCk39qNJIzvi"),w(t,"title",u=s[3]==="click"?"Click for tag information":""),P(t,V,20,2,498),w(e,"class",f=ie(s[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" s-lCk39qNJIzvi"),ae(e,"selected",s[2]),P(e,V,15,0,343),w(c,"class","s-lCk39qNJIzvi"),P(c,V,31,2,1084),w(g,"class","card variant-filled-surface p-4 s-lCk39qNJIzvi"),w(g,"data-popup",D=`popupHoverFor${s[0].id}`),Be(g,"z-index","1000"),P(g,V,30,0,976)},m:function(m,h){k(m,e,h),R(e,t),R(t,n),R(t,l),k(m,o,h),k(m,g,h),R(g,c),R(c,y),L||(b=[be(a=J.call(null,e,s[4])),Ce(e,"click",s[5],!1,!1,!1,!1)],L=!0)},p:function(m,[h]){h&1&&p!==(p=m[0].name+"")&&re(l,p),h&8&&u!==(u=m[3]==="click"?"Click for tag information":"")&&w(t,"title",u),h&2&&f!==(f=ie(m[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" s-lCk39qNJIzvi")&&w(e,"class",f),a&&Ie(a.update)&&h&16&&a.update.call(null,m[4]),h&6&&ae(e,"selected",m[2]),h&1&&T!==(T=m[0].description+"")&&re(y,T),h&1&&D!==(D=`popupHoverFor${m[0].id}`)&&w(g,"data-popup",D)},i:le,o:le,d:function(m){m&&(v(e),v(o),v(g)),L=!1,Pe(b)}};return S("SvelteRegisterBlock",{block:q,id:Y.name,type:"component",source:"",ctx:s}),q}function qe(s,e,t){let n,{$$slots:i={},$$scope:p}=e;Te("TagDisplay",i,[]);let{tag:l}=e,{asButton:u=!1}=e,{selected:f=!1}=e,{popupTriggerEvent:a="click"}=e;s.$$.on_mount.push(function(){l===void 0&&!("tag"in e||s.$$.bound[s.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const o=["tag","asButton","selected","popupTriggerEvent"];Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${c}'`)});function g(c){Le.call(this,s,c)}return s.$$set=c=>{"tag"in c&&t(0,l=c.tag),"asButton"in c&&t(1,u=c.asButton),"selected"in c&&t(2,f=c.selected),"popupTriggerEvent"in c&&t(3,a=c.popupTriggerEvent)},s.$capture_state=()=>({popup:J,tag:l,asButton:u,selected:f,popupTriggerEvent:a,popupHover:n}),s.$inject_state=c=>{"tag"in c&&t(0,l=c.tag),"asButton"in c&&t(1,u=c.asButton),"selected"in c&&t(2,f=c.selected),"popupTriggerEvent"in c&&t(3,a=c.popupTriggerEvent),"popupHover"in c&&t(4,n=c.popupHover)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&9&&t(4,n={event:a,target:`popupHoverFor${l.id}`,placement:"bottom-start"})},[l,u,f,a,n,g]}class ke extends me{constructor(e){super(e),ve(this,e,qe,Y,$e,{tag:0,asButton:1,selected:2,popupTriggerEvent:3}),S("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:e,id:Y.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get asButton(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set asButton(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selected(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selected(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const A="src/lib/components/utils/TagList.svelte";function he(s,e,t){const n=s.slice();return n[19]=e[t],n}function xe(s){let e,t="Tags",n,i,p,l,u,f,a,o,g,c,T,y;function D(h){s[11](h)}function L(h){s[12](h)}let b={name:"tags",chips:"variant-filled-primary"};s[4]!==void 0&&(b.input=s[4]),s[3]!==void 0&&(b.value=s[3]),p=new Ee({props:b,$$inline:!0}),_.push(()=>H(p,"input",D)),_.push(()=>H(p,"value",L)),p.$on("remove",s[13]);function q(h){s[15](h)}let B={options:s[5].filter(s[14])};s[4]!==void 0&&(B.input=s[4]),o=new ye({props:B,$$inline:!0}),_.push(()=>H(o,"input",q)),o.$on("selection",s[16]);const m={c:function(){e=C("div"),e.textContent=t,n=G(),i=C("div"),U(p.$$.fragment),f=G(),a=C("div"),U(o.$$.fragment),this.h()},l:function(d){e=I(d,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-14odz2i"&&(e.textContent=t),n=M(d),i=I(d,"DIV",{});var $=j(i);Q(p.$$.fragment,$),$.forEach(v),f=M(d),a=I(d,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var E=j(a);Q(o.$$.fragment,E),E.forEach(v),this.h()},h:function(){w(e,"class","mb-2"),P(e,A,73,4,1638),P(i,A,75,4,1672),w(a,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),w(a,"tabindex","-1"),w(a,"data-popup","popupAutocomplete"),P(a,A,84,4,1915)},m:function(d,$){k(d,e,$),k(d,n,$),k(d,i,$),W(p,i,null),k(d,f,$),k(d,a,$),W(o,a,null),c=!0,T||(y=be(J.call(null,i,s[7])),T=!0)},p:function(d,$){const E={};!l&&$&16&&(l=!0,E.input=d[4],F(()=>l=!1)),!u&&$&8&&(u=!0,E.value=d[3],F(()=>u=!1)),p.$set(E);const r={};$&40&&(r.options=d[5].filter(d[14])),!g&&$&16&&(g=!0,r.input=d[4],F(()=>g=!1)),o.$set(r)},i:function(d){c||(x(p.$$.fragment,d),x(o.$$.fragment,d),c=!0)},o:function(d){N(p.$$.fragment,d),N(o.$$.fragment,d),c=!1},d:function(d){d&&(v(e),v(n),v(i),v(f),v(a)),X(p),X(o),T=!1,y()}};return S("SvelteRegisterBlock",{block:m,id:xe.name,type:"else",source:"(59:2) {:else}",ctx:s}),m}function De(s){let e,t,n=s[0].length>0&&Z(s);const i={c:function(){n&&n.c(),e=ge()},l:function(l){n&&n.l(l),e=ge()},m:function(l,u){n&&n.m(l,u),k(l,e,u),t=!0},p:function(l,u){l[0].length>0?n?(n.p(l,u),u&1&&x(n,1)):(n=Z(l),n.c(),x(n,1),n.m(e.parentNode,e)):n&&(te(),N(n,1,1,()=>{n=null}),ne())},i:function(l){t||(x(n),t=!0)},o:function(l){N(n),t=!1},d:function(l){l&&v(e),n&&n.d(l)}};return S("SvelteRegisterBlock",{block:i,id:De.name,type:"if",source:"(51:2) {#if !editable}",ctx:s}),i}function Z(s){let e,t,n=fe(s[0]),i=[];for(let u=0;u<n.length;u+=1)i[u]=K(he(s,n,u));const p=u=>N(i[u],1,1,()=>{i[u]=null}),l={c:function(){e=C("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l:function(f){e=I(f,"DIV",{class:!0});var a=j(e);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(v),this.h()},h:function(){w(e,"class","text-md flex flex-row flex-wrap gap-1"),P(e,A,66,6,1454)},m:function(f,a){k(f,e,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t=!0},p:function(f,a){if(a&5){n=fe(f[0]);let o;for(o=0;o<n.length;o+=1){const g=he(f,n,o);i[o]?(i[o].p(g,a),x(i[o],1)):(i[o]=K(g),i[o].c(),x(i[o],1),i[o].m(e,null))}for(te(),o=n.length;o<i.length;o+=1)p(o);ne()}},i:function(f){if(!t){for(let a=0;a<n.length;a+=1)x(i[a]);t=!0}},o:function(f){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)N(i[a]);t=!1},d:function(f){f&&v(e),Se(i,f)}};return S("SvelteRegisterBlock",{block:l,id:Z.name,type:"if",source:"(52:4) {#if tags.length > 0}",ctx:s}),l}function K(s){let e,t;e=new ke({props:{tag:s[19],popupTriggerEvent:s[2]},$$inline:!0});const n={c:function(){U(e.$$.fragment)},l:function(p){Q(e.$$.fragment,p)},m:function(p,l){W(e,p,l),t=!0},p:function(p,l){const u={};l&1&&(u.tag=p[19]),l&4&&(u.popupTriggerEvent=p[2]),e.$set(u)},i:function(p){t||(x(e.$$.fragment,p),t=!0)},o:function(p){N(e.$$.fragment,p),t=!1},d:function(p){X(e,p)}};return S("SvelteRegisterBlock",{block:n,id:K.name,type:"each",source:"(54:8) {#each tags as tag}",ctx:s}),n}function ee(s){let e,t,n,i;const p=[De,xe],l=[];function u(a,o){return a[1]?1:0}t=u(s),n=l[t]=p[t](s);const f={c:function(){e=C("div"),n.c(),this.h()},l:function(o){e=I(o,"DIV",{class:!0});var g=j(e);n.l(g),g.forEach(v),this.h()},h:function(){w(e,"class","tags"),P(e,A,63,0,1385)},m:function(o,g){k(o,e,g),l[t].m(e,null),i=!0},p:function(o,[g]){let c=t;t=u(o),t===c?l[t].p(o,g):(te(),N(l[c],1,1,()=>{l[c]=null}),ne(),n=l[t],n?n.p(o,g):(n=l[t]=p[t](o),n.c()),x(n,1),n.m(e,null))},i:function(o){i||(x(n),i=!0)},o:function(o){N(n),i=!1},d:function(o){o&&v(e),l[t].d()}};return S("SvelteRegisterBlock",{block:f,id:ee.name,type:"component",source:"",ctx:s}),f}function ze(s,e,t){let n,i,{$$slots:p={},$$scope:l}=e;Te("TagList",p,[]);const u=ce(),f=pe({query:de,client:u,variables:{limit:100}});Ne(f,"getAllTags"),je(s,f,r=>t(10,i=r));let{tags:a=[]}=e,{editable:o=!1}=e,{popupTriggerEvent:g="click"}=e;const c={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let T=[];const y=()=>t(3,T=a.map(r=>r.name));ue(y);const D=r=>{const z=i.data?.getTags?.find(O=>O.id==r.value);t(0,a=[...a,{id:r.value,name:z?.name,description:z?.description}]),y()},L=r=>{const z=a.findIndex(O=>O.name===r);t(0,a=[...a.slice(0,z),...a.slice(z+1)]),y()};let b="";const q=["tags","editable","popupTriggerEvent"];Object.keys(e).forEach(r=>{!~q.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function B(r){b=r,t(4,b)}function m(r){T=r,t(3,T)}const h=r=>L(r.detail.chipValue),d=r=>T.indexOf(r.label)<0;function $(r){b=r,t(4,b)}const E=r=>D(r.detail);return s.$$set=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent)},s.$capture_state=()=>({GetTagsDocument:de,queryStore:pe,getContextClient:ce,Autocomplete:ye,InputChip:Ee,popup:J,onMount:ue,TagDisplay:ke,client:u,getAllTags:f,tags:a,editable:o,popupTriggerEvent:g,popupSettings:c,tagList:T,loadTagList:y,addTag:D,removeTag:L,inputTag:b,allTags:n,$getAllTags:i}),s.$inject_state=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent),"tagList"in r&&t(3,T=r.tagList),"inputTag"in r&&t(4,b=r.inputTag),"allTags"in r&&t(5,n=r.allTags)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1024&&t(5,n=i.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id}))||[])},[a,o,g,T,b,n,f,c,D,L,i,B,m,h,d,$,E]}class Ae extends me{constructor(e){super(e),ve(this,e,ze,ee,$e,{tags:0,editable:1,popupTriggerEvent:2}),S("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:ee.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ae as T,ke as a};
//# sourceMappingURL=TagList.4ueXAjHM.js.map
