import{S as dt,i as mt,s as ht,d as R,v as $t,ap as N,e as D,W as F,b as Q,g as L,h as A,M as vt,X as z,j as h,k as U,N as E,m as j,l as kt,n as x,Q as _,ad as Tt,Y as it,aq as Dt,u as at,F as rt,G as lt,a1 as Lt,a2 as jt,a as ct,ar as wt,as as bt,p as st,t as C,q as ot,r as k,y as G,I as M,U as pt,J as W,L as X,O as Y,T as J,R as K,f as ut,V as Ct}from"./vendor.gvg3WXQv.js";import{a as ft}from"./graphql.NreK-VdG.js";const O="src/lib/components/utils/TagDisplay.svelte";function Z(a){let t,n,s="#",o=a[0].name+"",p,l,c,u,e,i=a[0].description+"",g,w,T,y,P;const S={c:function(){t=D("div"),n=D("span"),n.textContent=s,p=F(o),c=Q(),u=D("div"),e=D("p"),g=F(i),w=F("."),this.h()},l:function(m){t=L(m,"DIV",{class:!0,title:!0});var v=A(t);n=L(v,"SPAN",{class:!0,"data-svelte-h":!0}),vt(n)!=="svelte-sdcp3o"&&(n.textContent=s),p=z(v,o),v.forEach(h),c=U(m),u=L(m,"DIV",{class:!0,"data-popup":!0,style:!0});var V=A(u);e=L(V,"P",{});var d=A(e);g=z(d,i),w=z(d,"."),d.forEach(h),V.forEach(h),this.h()},h:function(){E(n,"class","text-orange-500"),j(n,O,17,2,419),E(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none"),E(t,"title","Click for tag information"),j(t,O,13,0,287),j(e,O,23,2,762),E(u,"class","card variant-filled-surface p-4"),E(u,"data-popup",T=`popupHoverFor${a[0].name}`),kt(u,"z-index","1000"),j(u,O,22,0,652)},m:function(m,v){x(m,t,v),_(t,n),_(t,p),x(m,c,v),x(m,u,v),_(u,e),_(e,g),_(e,w),y||(P=Tt(l=N.call(null,t,a[1])),y=!0)},p:function(m,[v]){v&1&&o!==(o=m[0].name+"")&&it(p,o),l&&Dt(l.update)&&v&2&&l.update.call(null,m[1]),v&1&&i!==(i=m[0].description+"")&&it(g,i),v&1&&T!==(T=`popupHoverFor${m[0].name}`)&&E(u,"data-popup",T)},i:at,o:at,d:function(m){m&&(h(t),h(c),h(u)),y=!1,P()}};return R("SvelteRegisterBlock",{block:S,id:Z.name,type:"component",source:"",ctx:a}),S}function Pt(a,t,n){let s,{$$slots:o={},$$scope:p}=t;$t("TagDisplay",o,[]);let{tag:l}=t,{popupTriggerEvent:c="click"}=t;a.$$.on_mount.push(function(){l===void 0&&!("tag"in t||a.$$.bound[a.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const u=["tag","popupTriggerEvent"];return Object.keys(t).forEach(e=>{!~u.indexOf(e)&&e.slice(0,2)!=="$$"&&e!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${e}'`)}),a.$$set=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(2,c=e.popupTriggerEvent)},a.$capture_state=()=>({popup:N,tag:l,popupTriggerEvent:c,popupHover:s}),a.$inject_state=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(2,c=e.popupTriggerEvent),"popupHover"in e&&n(1,s=e.popupHover)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&5&&n(1,s={event:c,target:`popupHoverFor${l.name}`,placement:"bottom-start"})},[l,s,c]}class Et extends dt{constructor(t){super(t),mt(this,t,Pt,Z,ht,{tag:0,popupTriggerEvent:2}),R("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:t,id:Z.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const H="src/lib/components/utils/TagList.svelte";function gt(a,t,n){const s=a.slice();return s[19]=t[n],s}function yt(a){let t,n="Tags",s,o,p,l,c,u,e,i,g,w,T,y;function P(d){a[11](d)}function S(d){a[12](d)}let $={name:"tags",chips:"variant-filled-primary"};a[4]!==void 0&&($.input=a[4]),a[3]!==void 0&&($.value=a[3]),p=new bt({props:$,$$inline:!0}),G.push(()=>M(p,"input",P)),G.push(()=>M(p,"value",S)),p.$on("remove",a[13]);function m(d){a[15](d)}let v={options:a[5].filter(a[14])};a[4]!==void 0&&(v.input=a[4]),i=new wt({props:v,$$inline:!0}),G.push(()=>M(i,"input",m)),i.$on("selection",a[16]);const V={c:function(){t=D("div"),t.textContent=n,s=Q(),o=D("div"),W(p.$$.fragment),u=Q(),e=D("div"),W(i.$$.fragment),this.h()},l:function(f){t=L(f,"DIV",{class:!0,"data-svelte-h":!0}),vt(t)!=="svelte-14odz2i"&&(t.textContent=n),s=U(f),o=L(f,"DIV",{});var b=A(o);X(p.$$.fragment,b),b.forEach(h),u=U(f),e=L(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var I=A(e);X(i.$$.fragment,I),I.forEach(h),this.h()},h:function(){E(t,"class","mb-2"),j(t,H,73,4,1638),j(o,H,75,4,1672),E(e,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),E(e,"tabindex","-1"),E(e,"data-popup","popupAutocomplete"),j(e,H,84,4,1915)},m:function(f,b){x(f,t,b),x(f,s,b),x(f,o,b),Y(p,o,null),x(f,u,b),x(f,e,b),Y(i,e,null),w=!0,T||(y=Tt(N.call(null,o,a[7])),T=!0)},p:function(f,b){const I={};!l&&b&16&&(l=!0,I.input=f[4],J(()=>l=!1)),!c&&b&8&&(c=!0,I.value=f[3],J(()=>c=!1)),p.$set(I);const r={};b&40&&(r.options=f[5].filter(f[14])),!g&&b&16&&(g=!0,r.input=f[4],J(()=>g=!1)),i.$set(r)},i:function(f){w||(k(p.$$.fragment,f),k(i.$$.fragment,f),w=!0)},o:function(f){C(p.$$.fragment,f),C(i.$$.fragment,f),w=!1},d:function(f){f&&(h(t),h(s),h(o),h(u),h(e)),K(p),K(i),T=!1,y()}};return R("SvelteRegisterBlock",{block:V,id:yt.name,type:"else",source:"(59:2) {:else}",ctx:a}),V}function xt(a){let t,n,s=a[0].length>0&&tt(a);const o={c:function(){s&&s.c(),t=ut()},l:function(l){s&&s.l(l),t=ut()},m:function(l,c){s&&s.m(l,c),x(l,t,c),n=!0},p:function(l,c){l[0].length>0?s?(s.p(l,c),c&1&&k(s,1)):(s=tt(l),s.c(),k(s,1),s.m(t.parentNode,t)):s&&(st(),C(s,1,1,()=>{s=null}),ot())},i:function(l){n||(k(s),n=!0)},o:function(l){C(s),n=!1},d:function(l){l&&h(t),s&&s.d(l)}};return R("SvelteRegisterBlock",{block:o,id:xt.name,type:"if",source:"(51:2) {#if !editable}",ctx:a}),o}function tt(a){let t,n,s=pt(a[0]),o=[];for(let c=0;c<s.length;c+=1)o[c]=et(gt(a,s,c));const p=c=>C(o[c],1,1,()=>{o[c]=null}),l={c:function(){t=D("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l:function(u){t=L(u,"DIV",{class:!0});var e=A(t);for(let i=0;i<o.length;i+=1)o[i].l(e);e.forEach(h),this.h()},h:function(){E(t,"class","text-md flex flex-row flex-wrap gap-1"),j(t,H,66,6,1454)},m:function(u,e){x(u,t,e);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(t,null);n=!0},p:function(u,e){if(e&5){s=pt(u[0]);let i;for(i=0;i<s.length;i+=1){const g=gt(u,s,i);o[i]?(o[i].p(g,e),k(o[i],1)):(o[i]=et(g),o[i].c(),k(o[i],1),o[i].m(t,null))}for(st(),i=s.length;i<o.length;i+=1)p(i);ot()}},i:function(u){if(!n){for(let e=0;e<s.length;e+=1)k(o[e]);n=!0}},o:function(u){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)C(o[e]);n=!1},d:function(u){u&&h(t),Ct(o,u)}};return R("SvelteRegisterBlock",{block:l,id:tt.name,type:"if",source:"(52:4) {#if tags.length > 0}",ctx:a}),l}function et(a){let t,n;t=new Et({props:{tag:a[19],popupTriggerEvent:a[2]},$$inline:!0});const s={c:function(){W(t.$$.fragment)},l:function(p){X(t.$$.fragment,p)},m:function(p,l){Y(t,p,l),n=!0},p:function(p,l){const c={};l&1&&(c.tag=p[19]),l&4&&(c.popupTriggerEvent=p[2]),t.$set(c)},i:function(p){n||(k(t.$$.fragment,p),n=!0)},o:function(p){C(t.$$.fragment,p),n=!1},d:function(p){K(t,p)}};return R("SvelteRegisterBlock",{block:s,id:et.name,type:"each",source:"(54:8) {#each tags as tag}",ctx:a}),s}function nt(a){let t,n,s,o;const p=[xt,yt],l=[];function c(e,i){return e[1]?1:0}n=c(a),s=l[n]=p[n](a);const u={c:function(){t=D("div"),s.c(),this.h()},l:function(i){t=L(i,"DIV",{class:!0});var g=A(t);s.l(g),g.forEach(h),this.h()},h:function(){E(t,"class","tags"),j(t,H,63,0,1385)},m:function(i,g){x(i,t,g),l[n].m(t,null),o=!0},p:function(i,[g]){let w=n;n=c(i),n===w?l[n].p(i,g):(st(),C(l[w],1,1,()=>{l[w]=null}),ot(),s=l[n],s?s.p(i,g):(s=l[n]=p[n](i),s.c()),k(s,1),s.m(t,null))},i:function(i){o||(k(s),o=!0)},o:function(i){C(s),o=!1},d:function(i){i&&h(t),l[n].d()}};return R("SvelteRegisterBlock",{block:u,id:nt.name,type:"component",source:"",ctx:a}),u}function St(a,t,n){let s,o,{$$slots:p={},$$scope:l}=t;$t("TagList",p,[]);const c=rt(),u=lt({query:ft,client:c,variables:{limit:100}});Lt(u,"getAllTags"),jt(a,u,r=>n(10,o=r));let{tags:e=[]}=t,{editable:i=!1}=t,{popupTriggerEvent:g="click"}=t;const w={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let T=[];const y=()=>n(3,T=e.map(r=>r.name));ct(y);const P=r=>{const B=o.data?.getTags?.find(q=>q.id==r.value);n(0,e=[...e,{id:r.value,name:B?.name,description:B?.description}]),y()},S=r=>{const B=e.findIndex(q=>q.name===r);n(0,e=[...e.slice(0,B),...e.slice(B+1)]),y()};let $="";const m=["tags","editable","popupTriggerEvent"];Object.keys(t).forEach(r=>{!~m.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function v(r){$=r,n(4,$)}function V(r){T=r,n(3,T)}const d=r=>S(r.detail.chipValue),f=r=>T.indexOf(r.label)<0;function b(r){$=r,n(4,$)}const I=r=>P(r.detail);return a.$$set=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,i=r.editable),"popupTriggerEvent"in r&&n(2,g=r.popupTriggerEvent)},a.$capture_state=()=>({GetTagsDocument:ft,queryStore:lt,getContextClient:rt,Autocomplete:wt,InputChip:bt,popup:N,onMount:ct,TagDisplay:Et,client:c,getAllTags:u,tags:e,editable:i,popupTriggerEvent:g,popupSettings:w,tagList:T,loadTagList:y,addTag:P,removeTag:S,inputTag:$,allTags:s,$getAllTags:o}),a.$inject_state=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,i=r.editable),"popupTriggerEvent"in r&&n(2,g=r.popupTriggerEvent),"tagList"in r&&n(3,T=r.tagList),"inputTag"in r&&n(4,$=r.inputTag),"allTags"in r&&n(5,s=r.allTags)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&1024&&n(5,s=o.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id}))||[])},[e,i,g,T,$,s,u,w,P,S,o,v,V,d,f,b,I]}class Vt extends dt{constructor(t){super(t),mt(this,t,St,nt,ht,{tags:0,editable:1,popupTriggerEvent:2}),R("SvelteRegisterComponent",{component:this,tagName:"TagList",options:t,id:nt.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Vt as T,Et as a};
//# sourceMappingURL=TagList.NpI_9ni3.js.map
