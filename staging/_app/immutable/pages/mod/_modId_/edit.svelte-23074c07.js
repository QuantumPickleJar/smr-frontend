import{S as C,i as H,s as W,W as I,X as w,Y as M,m as g,t as h,$ as S,bb as X,u as Y,ad as F,b as V,a as A,e as q,aa as N,aV as G,f as l,g as D,c as L,d as O,ab as P,a7 as J,a5 as b,j as E,l as j,ae as K,aC as Q,al as R,aB as U,aD as Z,bc as _,k,az as ee,ac as B,r as y}from"../../../chunks/vendor-d4970a5c.js";import{p as re}from"../../../chunks/routing-c6322149.js";import{r as te,s as ae}from"../../../chunks/graphql-6d78cc7d.js";import{T as oe}from"../../../chunks/Toast-02e245a9.js";import{g as ne}from"../../../chunks/navigation-ce539261.js";import{M as se}from"../../../chunks/ModForm-49174953.js";import{b as ie}from"../../../chunks/paths-1c47712a.js";import{M as fe}from"../../../chunks/MetaDescriptors-98c69836.js";import"../../../chunks/singletons-cdeec3fd.js";import"../../../chunks/forms-b3413c18.js";import"../../../chunks/forms-9bab20ef.js";import"../../../chunks/markdown-6a2ff7f0.js";import"../../../chunks/extras-8984d02f.js";import"../../../chunks/stores-4154e90f.js";function T(n){let r,t;return r=new fe({props:{description:"Editing mod "+n[1].data.mod.name,title:"Edit mod "+n[1].data.mod.name,image:n[1].data.mod.logo}}),{c(){I(r.$$.fragment)},l(e){w(r.$$.fragment,e)},m(e,a){M(r,e,a),t=!0},p(e,a){const i={};a&2&&(i.description="Editing mod "+e[1].data.mod.name),a&2&&(i.title="Edit mod "+e[1].data.mod.name),a&2&&(i.image=e[1].data.mod.logo),r.$set(i)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function de(n){let r,t;return r=new se({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){I(r.$$.fragment)},l(e){w(r.$$.fragment,e)},m(e,a){M(r,e,a),t=!0},p(e,a){const i={};a&8&&(i.initialValues=e[3]),r.$set(i)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function me(n){let r,t,e=n[1].error.message+"",a;return{c(){r=q("p"),t=N("Oh no... "),a=N(e)},l(i){r=L(i,"P",{});var f=O(r);t=P(f,"Oh no... "),a=P(f,e),f.forEach(l)},m(i,f){E(i,r,f),b(r,t),b(r,a)},p(i,f){f&2&&e!==(e=i[1].error.message+"")&&B(a,e)},i:y,o:y,d(i){i&&l(r)}}}function le(n){let r,t;return{c(){r=q("p"),t=N("Loading...")},l(e){r=L(e,"P",{});var a=O(r);t=P(a,"Loading..."),a.forEach(l)},m(e,a){E(e,r,a),b(r,t)},p:y,i:y,o:y,d(e){e&&l(r)}}}function $e(n){let r,t,e,a;const i=[le,me,de],f=[];function $(s,c){return s[1].fetching?0:s[1].error?1:2}return r=$(n),t=f[r]=i[r](n),{c(){t.c(),e=V()},l(s){t.l(s),e=V()},m(s,c){f[r].m(s,c),E(s,e,c),a=!0},p(s,c){let u=r;r=$(s),r===u?f[r].p(s,c):(k(),h(f[u],1,1,()=>{f[u]=null}),j(),t=f[r],t?t.p(s,c):(t=f[r]=i[r](s),t.c()),g(t,1),t.m(e.parentNode,e))},i(s){a||(g(t),a=!0)},o(s){h(t),a=!1},d(s){f[r].d(s),s&&l(e)}}}function ce(n){let r,t;return r=new _({props:{$$slots:{default:[$e]},$$scope:{ctx:n}}}),{c(){I(r.$$.fragment)},l(e){w(r.$$.fragment,e)},m(e,a){M(r,e,a),t=!0},p(e,a){const i={};a&522&&(i.$$scope={dirty:a,ctx:e}),r.$set(i)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function ue(n){let r,t;return{c(){r=q("span"),t=N(n[2])},l(e){r=L(e,"SPAN",{});var a=O(r);t=P(a,n[2]),a.forEach(l)},m(e,a){E(e,r,a),b(r,t)},p(e,a){a&4&&B(t,e[2])},d(e){e&&l(r)}}}function pe(n){let r,t,e,a,i,f,$,s,c,u,d=!n[1].fetching&&!n[1].error&&n[1].data.mod&&T(n);f=new X({props:{$$slots:{default:[ce]},$$scope:{ctx:n}}});function p(o){n[7](o)}let x={$$slots:{default:[ue]},$$scope:{ctx:n}};return n[0]!==void 0&&(x.running=n[0]),s=new oe({props:x}),Y.push(()=>F(s,"running",p)),{c(){d&&d.c(),r=V(),t=A(),e=q("h1"),a=N("Edit Mod"),i=A(),I(f.$$.fragment),$=A(),I(s.$$.fragment),this.h()},l(o){const m=G('[data-svelte="svelte-q8g25b"]',document.head);d&&d.l(m),r=V(),m.forEach(l),t=D(o),e=L(o,"H1",{class:!0});var v=O(e);a=P(v,"Edit Mod"),v.forEach(l),i=D(o),w(f.$$.fragment,o),$=D(o),w(s.$$.fragment,o),this.h()},h(){J(e,"class","text-4xl my-4 font-bold")},m(o,m){d&&d.m(document.head,null),b(document.head,r),E(o,t,m),E(o,e,m),b(e,a),E(o,i,m),M(f,o,m),E(o,$,m),M(s,o,m),u=!0},p(o,[m]){!o[1].fetching&&!o[1].error&&o[1].data.mod?d?(d.p(o,m),m&2&&g(d,1)):(d=T(o),d.c(),g(d,1),d.m(r.parentNode,r)):d&&(k(),h(d,1,1,()=>{d=null}),j());const v={};m&522&&(v.$$scope={dirty:m,ctx:o}),f.$set(v);const z={};m&516&&(z.$$scope={dirty:m,ctx:o}),!c&&m&1&&(c=!0,z.running=o[0],K(()=>c=!1)),s.$set(z)},i(o){u||(g(d),g(f.$$.fragment,o),g(s.$$.fragment,o),u=!0)},o(o){h(d),h(f.$$.fragment,o),h(s.$$.fragment,o),u=!1},d(o){d&&d.d(o),l(r),o&&l(t),o&&l(e),o&&l(i),S(f,o),o&&l($),S(s,o)}}}const Le=re();function ge(n,r,t){let e,a,{modId:i}=r,f="",$=!1;const s=Q(te,{mod:i});R(n,s,p=>t(1,a=p));const c=U({query:ae}),u=p=>{c({modId:ee(s).data.mod.id,mod:p}).then(x=>{x.error?(console.error(x.error.message),t(2,f="Error editing mod: "+x.error.message),t(0,$=!0)):ne(ie+"/mod/"+x.data.updateMod.id)})};Z(s);function d(p){$=p,t(0,$)}return n.$$set=p=>{"modId"in p&&t(6,i=p.modId)},n.$$.update=()=>{n.$$.dirty&1&&($||t(2,f="")),n.$$.dirty&2&&t(3,e=a.data?{...a.data.mod,logo:void 0}:void 0)},[$,a,f,e,s,u,i,d]}class Oe extends C{constructor(r){super(),H(this,r,ge,pe,W,{modId:6})}}export{Oe as default,Le as load};
//# sourceMappingURL=edit.svelte-23074c07.js.map
