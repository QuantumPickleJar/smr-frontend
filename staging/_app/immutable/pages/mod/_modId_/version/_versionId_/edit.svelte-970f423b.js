import{S as q,i as A,s as C,W as b,X as I,Y as y,m as g,t as v,$ as w,bb as M,u as W,ad as X,b as P,a as k,e as B,aa as S,aV as Y,f as c,g as z,c as H,d as L,ab as N,a7 as F,a5 as V,j as h,l as R,ae as G,aC as J,al as K,aB as Q,aD as U,bc as Z,k as _,ac as j,r as x}from"../../../../../chunks/vendor-d4970a5c.js";import{p as tt}from"../../../../../chunks/routing-c6322149.js";import{B as et,H as rt}from"../../../../../chunks/graphql-6d78cc7d.js";import{T as nt}from"../../../../../chunks/Toast-02e245a9.js";import{g as ot}from"../../../../../chunks/navigation-ce539261.js";import{V as it}from"../../../../../chunks/VersionForm-3f2349d8.js";import{b as st}from"../../../../../chunks/paths-1c47712a.js";import{M as at}from"../../../../../chunks/MetaDescriptors-98c69836.js";import"../../../../../chunks/singletons-cdeec3fd.js";import"../../../../../chunks/forms-b3413c18.js";import"../../../../../chunks/jszip-0721729d.js";import"../../../../../chunks/extras-8984d02f.js";import"../../../../../chunks/uplugin-57fe26ab.js";import"../../../../../chunks/api-bb6d5972.js";import"../../../../../chunks/user-b54187cf.js";import"../../../../../chunks/forms-9bab20ef.js";import"../../../../../chunks/markdown-6a2ff7f0.js";import"../../../../../chunks/formatting-b1e7d458.js";import"../../../../../chunks/stores-4154e90f.js";function D(i){let e,r;return e=new at({props:{description:"Editing mod version "+i[1].data.getVersion.mod.name+" "+i[1].data.getVersion.version,title:"Edit mod version "+i[1].data.getVersion.mod.name+" "+i[1].data.getVersion.version}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},p(t,n){const f={};n&2&&(f.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),n&2&&(f.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function ft(i){let e,r;return e=new it({props:{onSubmit:i[5],initialValues:i[3],modReference:i[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},p(t,n){const f={};n&8&&(f.initialValues=t[3]),n&2&&(f.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function dt(i){let e,r,t=i[1].error.message+"",n;return{c(){e=B("p"),r=S("Oh no... "),n=S(t)},l(f){e=H(f,"P",{});var a=L(e);r=N(a,"Oh no... "),n=N(a,t),a.forEach(c)},m(f,a){h(f,e,a),V(e,r),V(e,n)},p(f,a){a&2&&t!==(t=f[1].error.message+"")&&j(n,t)},i:x,o:x,d(f){f&&c(e)}}}function mt(i){let e,r;return{c(){e=B("p"),r=S("Loading...")},l(t){e=H(t,"P",{});var n=L(e);r=N(n,"Loading..."),n.forEach(c)},m(t,n){h(t,e,n),V(e,r)},p:x,i:x,o:x,d(t){t&&c(e)}}}function lt(i){let e,r,t,n;const f=[mt,dt,ft],a=[];function u(s,l){return s[1].fetching?0:s[1].error?1:2}return e=u(i),r=a[e]=f[e](i),{c(){r.c(),t=P()},l(s){r.l(s),t=P()},m(s,l){a[e].m(s,l),h(s,t,l),n=!0},p(s,l){let p=e;e=u(s),e===p?a[e].p(s,l):(_(),v(a[p],1,1,()=>{a[p]=null}),R(),r=a[e],r?r.p(s,l):(r=a[e]=f[e](s),r.c()),g(r,1),r.m(t.parentNode,t))},i(s){n||(g(r),n=!0)},o(s){v(r),n=!1},d(s){a[e].d(s),s&&c(t)}}}function ct(i){let e,r;return e=new Z({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),{c(){b(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},p(t,n){const f={};n&1034&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){w(e,t)}}}function $t(i){let e,r;return{c(){e=B("span"),r=S(i[2])},l(t){e=H(t,"SPAN",{});var n=L(e);r=N(n,i[2]),n.forEach(c)},m(t,n){h(t,e,n),V(e,r)},p(t,n){n&4&&j(r,t[2])},d(t){t&&c(e)}}}function ut(i){let e,r,t,n,f,a,u,s,l,p,d=!i[1].fetching&&!i[1].error&&i[1].data.getVersion&&D(i);a=new M({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}});function O(o){i[8](o)}let $={$$slots:{default:[$t]},$$scope:{ctx:i}};return i[0]!==void 0&&($.running=i[0]),s=new nt({props:$}),W.push(()=>X(s,"running",O)),{c(){d&&d.c(),e=P(),r=k(),t=B("h1"),n=S("Edit Version"),f=k(),b(a.$$.fragment),u=k(),b(s.$$.fragment),this.h()},l(o){const m=Y('[data-svelte="svelte-wzsk0g"]',document.head);d&&d.l(m),e=P(),m.forEach(c),r=z(o),t=H(o,"H1",{class:!0});var E=L(t);n=N(E,"Edit Version"),E.forEach(c),f=z(o),I(a.$$.fragment,o),u=z(o),I(s.$$.fragment,o),this.h()},h(){F(t,"class","text-4xl my-4 font-bold")},m(o,m){d&&d.m(document.head,null),V(document.head,e),h(o,r,m),h(o,t,m),V(t,n),h(o,f,m),y(a,o,m),h(o,u,m),y(s,o,m),p=!0},p(o,[m]){!o[1].fetching&&!o[1].error&&o[1].data.getVersion?d?(d.p(o,m),m&2&&g(d,1)):(d=D(o),d.c(),g(d,1),d.m(e.parentNode,e)):d&&(_(),v(d,1,1,()=>{d=null}),R());const E={};m&1034&&(E.$$scope={dirty:m,ctx:o}),a.$set(E);const T={};m&1028&&(T.$$scope={dirty:m,ctx:o}),!l&&m&1&&(l=!0,T.running=o[0],G(()=>l=!1)),s.$set(T)},i(o){p||(g(d),g(a.$$.fragment,o),g(s.$$.fragment,o),p=!0)},o(o){v(d),v(a.$$.fragment,o),v(s.$$.fragment,o),p=!1},d(o){d&&d.d(o),c(e),o&&c(r),o&&c(t),o&&c(f),w(a,o),o&&c(u),w(s,o)}}}const zt=tt();function pt(i,e,r){let t,n,{modId:f}=e,{versionId:a}=e,u="",s=!1;const l=J(et,{version:a});K(i,l,$=>r(1,n=$));const p=Q({query:rt}),d=async $=>p({versionId:a,version:$}).then(o=>{if(o.error)console.error(o.error.message),r(2,u="Error editing version: "+o.error.message),r(0,s=!0);else return ot(st+"/mod/"+f+"/version/"+a)});U(l);function O($){s=$,r(0,s)}return i.$$set=$=>{"modId"in $&&r(6,f=$.modId),"versionId"in $&&r(7,a=$.versionId)},i.$$.update=()=>{i.$$.dirty&1&&(s||r(2,u="")),i.$$.dirty&2&&r(3,t=n.data?{...n.data.getVersion,logo:void 0}:void 0)},[s,n,u,t,l,d,f,a,O]}class Dt extends q{constructor(e){super(),A(this,e,pt,ut,C,{modId:6,versionId:7})}}export{Dt as default,zt as load};
//# sourceMappingURL=edit.svelte-970f423b.js.map
