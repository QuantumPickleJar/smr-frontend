import{S as et,i as at,s as rt,bb as st,u as W,ad as X,Z as _,a as T,e as w,aa as j,aV as nt,_ as k,f as u,g as U,c as E,d as S,ab as z,a7 as x,$ as B,j as b,a5 as d,ae as Y,m as P,t as V,a1 as H,al as lt,aB as it,bc as ot,q as J,b as G,k as ft,l as $t,ac as O,r as ut,aH as ct,J as mt}from"../../chunks/vendor-93f46a94.js";import{Q as pt}from"../../chunks/graphql-8819e72c.js";import{T as gt}from"../../chunks/Toast-a853093a.js";import{g as dt}from"../../chunks/navigation-ce539261.js";import{o as ht,a as vt,b as xt,s as yt,c as wt,v as Et,r as St,V as K,T as bt}from"../../chunks/forms-5fcb6172.js";import{t as At}from"../../chunks/forms-2903de53.js";import{a as Pt}from"../../chunks/user-bfea9258.js";import{b as Vt}from"../../chunks/paths-1c47712a.js";import{M as It}from"../../chunks/MetaDescriptors-5ea9952a.js";import"../../chunks/singletons-cdeec3fd.js";import"../../chunks/stores-84e1d086.js";function Nt(l){let t,e,a,r,i,$,c,n,m,h,v,g,s,p,o,I,A,D,F,M,Q;m=new K({props:{for:"avatar",$$slots:{default:[Dt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}});function tt(f){l[7](f)}let R={label:"Username",required:!0};return l[5].username!==void 0&&(R.value=l[5].username),g=new bt({props:R}),W.push(()=>X(g,"value",tt)),o=new K({props:{for:"username",$$slots:{default:[Tt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}}),D=new ct({props:{type:"submit",variant:"outlined",$$slots:{default:[Ut]},$$scope:{ctx:l}}}),{c(){t=w("form"),e=w("div"),a=w("div"),r=w("label"),i=j("Avatar:"),$=T(),c=w("input"),n=T(),_(m.$$.fragment),h=T(),v=w("div"),_(g.$$.fragment),p=T(),_(o.$$.fragment),I=T(),A=w("div"),_(D.$$.fragment),this.h()},l(f){t=E(f,"FORM",{});var y=S(t);e=E(y,"DIV",{class:!0});var N=S(e);a=E(N,"DIV",{class:!0});var q=S(a);r=E(q,"LABEL",{for:!0});var C=S(r);i=z(C,"Avatar:"),C.forEach(u),$=U(q),c=E(q,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),n=U(q),k(m.$$.fragment,q),q.forEach(u),h=U(N),v=E(N,"DIV",{class:!0});var L=S(v);k(g.$$.fragment,L),p=U(L),k(o.$$.fragment,L),L.forEach(u),I=U(N),A=E(N,"DIV",{});var Z=S(A);k(D.$$.fragment,Z),Z.forEach(u),N.forEach(u),y.forEach(u),this.h()},h(){x(r,"for","avatar"),x(c,"id","avatar"),x(c,"class","base-input"),x(c,"name","avatar"),x(c,"type","file"),x(c,"accept","image/png,image/jpeg,image/gif"),x(c,"placeholder","Avatar"),x(a,"class","grid grid-flow-row gap-2"),x(v,"class","grid grid-flow-row gap-2"),x(e,"class","grid grid-flow-row gap-6")},m(f,y){b(f,t,y),d(t,e),d(e,a),d(a,r),d(r,i),d(a,$),d(a,c),d(a,n),B(m,a,null),d(e,h),d(e,v),B(g,v,null),d(v,p),B(o,v,null),d(e,I),d(e,A),B(D,A,null),F=!0,M||(Q=mt(l[3].call(null,t)),M=!0)},p(f,y){const N={};y&3072&&(N.$$scope={dirty:y,ctx:f}),m.$set(N);const q={};!s&&y&32&&(s=!0,q.value=f[5].username,Y(()=>s=!1)),g.$set(q);const C={};y&3072&&(C.$$scope={dirty:y,ctx:f}),o.$set(C);const L={};y&2048&&(L.$$scope={dirty:y,ctx:f}),D.$set(L)},i(f){F||(P(m.$$.fragment,f),P(g.$$.fragment,f),P(o.$$.fragment,f),P(D.$$.fragment,f),F=!0)},o(f){V(m.$$.fragment,f),V(g.$$.fragment,f),V(o.$$.fragment,f),V(D.$$.fragment,f),F=!1},d(f){f&&u(t),H(m),H(g),H(o),H(D),M=!1,Q()}}}function qt(l){let t,e;return{c(){t=w("p"),e=j("Please log in")},l(a){t=E(a,"P",{});var r=S(t);e=z(r,"Please log in"),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p:J,i:J,o:J,d(a){a&&u(t)}}}function Dt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=j(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=z(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&O(a,e)},d(r){r&&u(t)}}}function Tt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=j(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=z(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&O(a,e)},d(r){r&&u(t)}}}function Ut(l){let t;return{c(){t=j("Save")},l(e){t=z(e,"Save")},m(e,a){b(e,t,a)},d(e){e&&u(t)}}}function _t(l){let t,e,a,r;const i=[qt,Nt],$=[];function c(n,m){return n[1]===null?0:1}return t=c(l),e=$[t]=i[t](l),{c(){e.c(),a=G()},l(n){e.l(n),a=G()},m(n,m){$[t].m(n,m),b(n,a,m),r=!0},p(n,m){let h=t;t=c(n),t===h?$[t].p(n,m):(ft(),V($[h],1,1,()=>{$[h]=null}),$t(),e=$[t],e?e.p(n,m):(e=$[t]=i[t](n),e.c()),P(e,1),e.m(a.parentNode,a))},i(n){r||(P(e),r=!0)},o(n){V(e),r=!1},d(n){$[t].d(n),n&&u(a)}}}function kt(l){let t,e;return t=new ot({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}}),{c(){_(t.$$.fragment)},l(a){k(t.$$.fragment,a)},m(a,r){B(t,a,r),e=!0},p(a,r){const i={};r&2082&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){e||(P(t.$$.fragment,a),e=!0)},o(a){V(t.$$.fragment,a),e=!1},d(a){H(t,a)}}}function Bt(l){let t,e;return{c(){t=w("span"),e=j(l[2])},l(a){t=E(a,"SPAN",{});var r=S(t);e=z(r,l[2]),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p(a,r){r&4&&O(e,a[2])},d(a){a&&u(t)}}}function Ht(l){let t,e,a,r,i,$,c,n,m,h;t=new It({props:{description:"Change your user settings",title:"Settings"}}),$=new st({props:{$$slots:{default:[kt]},$$scope:{ctx:l}}});function v(s){l[8](s)}let g={$$slots:{default:[Bt]},$$scope:{ctx:l}};return l[0]!==void 0&&(g.running=l[0]),n=new gt({props:g}),W.push(()=>X(n,"running",v)),{c(){_(t.$$.fragment),e=T(),a=w("h1"),r=j("Settings"),i=T(),_($.$$.fragment),c=T(),_(n.$$.fragment),this.h()},l(s){const p=nt('[data-svelte="svelte-1ae5i2c"]',document.head);k(t.$$.fragment,p),p.forEach(u),e=U(s),a=E(s,"H1",{class:!0});var o=S(a);r=z(o,"Settings"),o.forEach(u),i=U(s),k($.$$.fragment,s),c=U(s),k(n.$$.fragment,s),this.h()},h(){x(a,"class","text-4xl my-4 font-bold")},m(s,p){B(t,document.head,null),b(s,e,p),b(s,a,p),d(a,r),b(s,i,p),B($,s,p),b(s,c,p),B(n,s,p),h=!0},p(s,[p]){const o={};p&2082&&(o.$$scope={dirty:p,ctx:s}),$.$set(o);const I={};p&2052&&(I.$$scope={dirty:p,ctx:s}),!m&&p&1&&(m=!0,I.running=s[0],Y(()=>m=!1)),n.$set(I)},i(s){h||(P(t.$$.fragment,s),P($.$$.fragment,s),P(n.$$.fragment,s),h=!0)},o(s){V(t.$$.fragment,s),V($.$$.fragment,s),V(n.$$.fragment,s),h=!1},d(s){H(t),s&&u(e),s&&u(a),s&&u(i),H($,s),s&&u(c),H(n,s)}}}function Lt(l,t,e){let a,r,i=J,$=()=>(i(),i=ut(g,o=>e(5,r=o)),g);lt(l,Pt,o=>e(1,a=o)),l.$$.on_destroy.push(()=>i());let c="",n=!1;const m=it({query:pt}),h=ht({avatar:vt(xt().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:yt().min(3).max(32)});let v,g;function s(o){l.$$.not_equal(r.username,o)&&(r.username=o,g.set(r))}function p(o){n=o,e(0,n),e(1,a)}return l.$$.update=()=>{if(l.$$.dirty&2&&a){const o=wt({initialValues:{username:a.username},extend:[Et({schema:h}),St],onSubmit:I=>{m({user:At(I,h),userId:a.id}).then(A=>{A.error?(console.error(A.error.message),e(2,c="Error editing guide: "+A.error.message),e(0,n=!0)):dt(Vt+"/user/"+A.data.updateUser.id)})}});e(3,v=o.form),$(e(4,g=o.data))}l.$$.dirty&1&&(n||e(2,c=""))},[n,a,c,v,g,r,h,s,p]}class Kt extends et{constructor(t){super(),at(this,t,Lt,Ht,rt,{userSchema:6})}get userSchema(){return this.$$.ctx[6]}}export{Kt as default};
//# sourceMappingURL=index.svelte-5183c420.js.map
