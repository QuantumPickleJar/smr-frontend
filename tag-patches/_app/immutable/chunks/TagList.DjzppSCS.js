import{S as dt,i as mt,s as ht,d as I,v as $t,ap as N,e as D,W as st,b as M,g as L,h as A,M as vt,X as it,j as m,k as J,N as b,m as j,l as kt,n as y,Q as H,ad as Tt,Y as ot,aq as Dt,u as at,F as rt,G as lt,a1 as Lt,a2 as jt,a as ct,ar as wt,as as bt,p as et,t as C,q as nt,r as x,y as F,I as z,U as pt,J as Q,L as U,O as W,T as G,R as X,f as ut,V as Ct}from"./vendor.mY4N8sOr.js";import{a as ft}from"./graphql.NreK-VdG.js";const O="src/lib/components/utils/TagDisplay.svelte";function Y(a){let t,n,s="#",i=a[0].name+"",p,l,c,u,e,o=a[0].description+"",d,h,v,k;const P={c:function(){t=D("div"),n=D("span"),n.textContent=s,p=st(i),c=M(),u=D("div"),e=D("p"),d=st(o),this.h()},l:function(g){t=L(g,"DIV",{class:!0,title:!0});var $=A(t);n=L($,"SPAN",{class:!0,"data-svelte-h":!0}),vt(n)!=="svelte-sdcp3o"&&(n.textContent=s),p=it($,i),$.forEach(m),c=J(g),u=L(g,"DIV",{class:!0,"data-popup":!0,style:!0});var R=A(u);e=L(R,"P",{});var V=A(e);d=it(V,o),V.forEach(m),R.forEach(m),this.h()},h:function(){b(n,"class","text-orange-500"),j(n,O,17,2,417),b(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none"),b(t,"title","Click for tag information"),j(t,O,13,0,285),j(e,O,24,2,839),b(u,"class","card variant-filled-surface p-4"),b(u,"data-popup",h=`popupHoverFor${a[0].id}`),kt(u,"z-index","1000"),j(u,O,23,0,731)},m:function(g,$){y(g,t,$),H(t,n),H(t,p),y(g,c,$),y(g,u,$),H(u,e),H(e,d),v||(k=Tt(l=N.call(null,t,a[1])),v=!0)},p:function(g,[$]){$&1&&i!==(i=g[0].name+"")&&ot(p,i),l&&Dt(l.update)&&$&2&&l.update.call(null,g[1]),$&1&&o!==(o=g[0].description+"")&&ot(d,o),$&1&&h!==(h=`popupHoverFor${g[0].id}`)&&b(u,"data-popup",h)},i:at,o:at,d:function(g){g&&(m(t),m(c),m(u)),v=!1,k()}};return I("SvelteRegisterBlock",{block:P,id:Y.name,type:"component",source:"",ctx:a}),P}function Pt(a,t,n){let s,{$$slots:i={},$$scope:p}=t;$t("TagDisplay",i,[]);let{tag:l}=t,{popupTriggerEvent:c="click"}=t;a.$$.on_mount.push(function(){l===void 0&&!("tag"in t||a.$$.bound[a.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const u=["tag","popupTriggerEvent"];return Object.keys(t).forEach(e=>{!~u.indexOf(e)&&e.slice(0,2)!=="$$"&&e!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${e}'`)}),a.$$set=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(2,c=e.popupTriggerEvent)},a.$capture_state=()=>({popup:N,tag:l,popupTriggerEvent:c,popupHover:s}),a.$inject_state=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(2,c=e.popupTriggerEvent),"popupHover"in e&&n(1,s=e.popupHover)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&5&&n(1,s={event:c,target:`popupHoverFor${l.id}`,placement:"bottom-start"})},[l,s,c]}class Et extends dt{constructor(t){super(t),mt(this,t,Pt,Y,ht,{tag:0,popupTriggerEvent:2}),I("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:t,id:Y.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const B="src/lib/components/utils/TagList.svelte";function gt(a,t,n){const s=a.slice();return s[19]=t[n],s}function yt(a){let t,n="Tags",s,i,p,l,c,u,e,o,d,h,v,k;function P(T){a[11](T)}function E(T){a[12](T)}let g={name:"tags",chips:"variant-filled-primary"};a[4]!==void 0&&(g.input=a[4]),a[3]!==void 0&&(g.value=a[3]),p=new bt({props:g,$$inline:!0}),F.push(()=>z(p,"input",P)),F.push(()=>z(p,"value",E)),p.$on("remove",a[13]);function $(T){a[15](T)}let R={options:a[5].filter(a[14])};a[4]!==void 0&&(R.input=a[4]),o=new wt({props:R,$$inline:!0}),F.push(()=>z(o,"input",$)),o.$on("selection",a[16]);const V={c:function(){t=D("div"),t.textContent=n,s=M(),i=D("div"),Q(p.$$.fragment),u=M(),e=D("div"),Q(o.$$.fragment),this.h()},l:function(f){t=L(f,"DIV",{class:!0,"data-svelte-h":!0}),vt(t)!=="svelte-14odz2i"&&(t.textContent=n),s=J(f),i=L(f,"DIV",{});var w=A(i);U(p.$$.fragment,w),w.forEach(m),u=J(f),e=L(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var S=A(e);U(o.$$.fragment,S),S.forEach(m),this.h()},h:function(){b(t,"class","mb-2"),j(t,B,73,4,1638),j(i,B,75,4,1672),b(e,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),b(e,"tabindex","-1"),b(e,"data-popup","popupAutocomplete"),j(e,B,84,4,1915)},m:function(f,w){y(f,t,w),y(f,s,w),y(f,i,w),W(p,i,null),y(f,u,w),y(f,e,w),W(o,e,null),h=!0,v||(k=Tt(N.call(null,i,a[7])),v=!0)},p:function(f,w){const S={};!l&&w&16&&(l=!0,S.input=f[4],G(()=>l=!1)),!c&&w&8&&(c=!0,S.value=f[3],G(()=>c=!1)),p.$set(S);const r={};w&40&&(r.options=f[5].filter(f[14])),!d&&w&16&&(d=!0,r.input=f[4],G(()=>d=!1)),o.$set(r)},i:function(f){h||(x(p.$$.fragment,f),x(o.$$.fragment,f),h=!0)},o:function(f){C(p.$$.fragment,f),C(o.$$.fragment,f),h=!1},d:function(f){f&&(m(t),m(s),m(i),m(u),m(e)),X(p),X(o),v=!1,k()}};return I("SvelteRegisterBlock",{block:V,id:yt.name,type:"else",source:"(59:2) {:else}",ctx:a}),V}function xt(a){let t,n,s=a[0].length>0&&K(a);const i={c:function(){s&&s.c(),t=ut()},l:function(l){s&&s.l(l),t=ut()},m:function(l,c){s&&s.m(l,c),y(l,t,c),n=!0},p:function(l,c){l[0].length>0?s?(s.p(l,c),c&1&&x(s,1)):(s=K(l),s.c(),x(s,1),s.m(t.parentNode,t)):s&&(et(),C(s,1,1,()=>{s=null}),nt())},i:function(l){n||(x(s),n=!0)},o:function(l){C(s),n=!1},d:function(l){l&&m(t),s&&s.d(l)}};return I("SvelteRegisterBlock",{block:i,id:xt.name,type:"if",source:"(51:2) {#if !editable}",ctx:a}),i}function K(a){let t,n,s=pt(a[0]),i=[];for(let c=0;c<s.length;c+=1)i[c]=Z(gt(a,s,c));const p=c=>C(i[c],1,1,()=>{i[c]=null}),l={c:function(){t=D("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l:function(u){t=L(u,"DIV",{class:!0});var e=A(t);for(let o=0;o<i.length;o+=1)i[o].l(e);e.forEach(m),this.h()},h:function(){b(t,"class","text-md flex flex-row flex-wrap gap-1"),j(t,B,66,6,1454)},m:function(u,e){y(u,t,e);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null);n=!0},p:function(u,e){if(e&5){s=pt(u[0]);let o;for(o=0;o<s.length;o+=1){const d=gt(u,s,o);i[o]?(i[o].p(d,e),x(i[o],1)):(i[o]=Z(d),i[o].c(),x(i[o],1),i[o].m(t,null))}for(et(),o=s.length;o<i.length;o+=1)p(o);nt()}},i:function(u){if(!n){for(let e=0;e<s.length;e+=1)x(i[e]);n=!0}},o:function(u){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)C(i[e]);n=!1},d:function(u){u&&m(t),Ct(i,u)}};return I("SvelteRegisterBlock",{block:l,id:K.name,type:"if",source:"(52:4) {#if tags.length > 0}",ctx:a}),l}function Z(a){let t,n;t=new Et({props:{tag:a[19],popupTriggerEvent:a[2]},$$inline:!0});const s={c:function(){Q(t.$$.fragment)},l:function(p){U(t.$$.fragment,p)},m:function(p,l){W(t,p,l),n=!0},p:function(p,l){const c={};l&1&&(c.tag=p[19]),l&4&&(c.popupTriggerEvent=p[2]),t.$set(c)},i:function(p){n||(x(t.$$.fragment,p),n=!0)},o:function(p){C(t.$$.fragment,p),n=!1},d:function(p){X(t,p)}};return I("SvelteRegisterBlock",{block:s,id:Z.name,type:"each",source:"(54:8) {#each tags as tag}",ctx:a}),s}function tt(a){let t,n,s,i;const p=[xt,yt],l=[];function c(e,o){return e[1]?1:0}n=c(a),s=l[n]=p[n](a);const u={c:function(){t=D("div"),s.c(),this.h()},l:function(o){t=L(o,"DIV",{class:!0});var d=A(t);s.l(d),d.forEach(m),this.h()},h:function(){b(t,"class","tags"),j(t,B,63,0,1385)},m:function(o,d){y(o,t,d),l[n].m(t,null),i=!0},p:function(o,[d]){let h=n;n=c(o),n===h?l[n].p(o,d):(et(),C(l[h],1,1,()=>{l[h]=null}),nt(),s=l[n],s?s.p(o,d):(s=l[n]=p[n](o),s.c()),x(s,1),s.m(t,null))},i:function(o){i||(x(s),i=!0)},o:function(o){C(s),i=!1},d:function(o){o&&m(t),l[n].d()}};return I("SvelteRegisterBlock",{block:u,id:tt.name,type:"component",source:"",ctx:a}),u}function St(a,t,n){let s,i,{$$slots:p={},$$scope:l}=t;$t("TagList",p,[]);const c=rt(),u=lt({query:ft,client:c,variables:{limit:100}});Lt(u,"getAllTags"),jt(a,u,r=>n(10,i=r));let{tags:e=[]}=t,{editable:o=!1}=t,{popupTriggerEvent:d="click"}=t;const h={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let v=[];const k=()=>n(3,v=e.map(r=>r.name));ct(k);const P=r=>{const _=i.data?.getTags?.find(q=>q.id==r.value);n(0,e=[...e,{id:r.value,name:_?.name,description:_?.description}]),k()},E=r=>{const _=e.findIndex(q=>q.name===r);n(0,e=[...e.slice(0,_),...e.slice(_+1)]),k()};let g="";const $=["tags","editable","popupTriggerEvent"];Object.keys(t).forEach(r=>{!~$.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function R(r){g=r,n(4,g)}function V(r){v=r,n(3,v)}const T=r=>E(r.detail.chipValue),f=r=>v.indexOf(r.label)<0;function w(r){g=r,n(4,g)}const S=r=>P(r.detail);return a.$$set=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,o=r.editable),"popupTriggerEvent"in r&&n(2,d=r.popupTriggerEvent)},a.$capture_state=()=>({GetTagsDocument:ft,queryStore:lt,getContextClient:rt,Autocomplete:wt,InputChip:bt,popup:N,onMount:ct,TagDisplay:Et,client:c,getAllTags:u,tags:e,editable:o,popupTriggerEvent:d,popupSettings:h,tagList:v,loadTagList:k,addTag:P,removeTag:E,inputTag:g,allTags:s,$getAllTags:i}),a.$inject_state=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,o=r.editable),"popupTriggerEvent"in r&&n(2,d=r.popupTriggerEvent),"tagList"in r&&n(3,v=r.tagList),"inputTag"in r&&n(4,g=r.inputTag),"allTags"in r&&n(5,s=r.allTags)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&1024&&n(5,s=i.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id}))||[])},[e,o,d,v,g,s,u,h,P,E,i,R,V,T,f,w,S]}class Vt extends dt{constructor(t){super(t),mt(this,t,St,tt,ht,{tags:0,editable:1,popupTriggerEvent:2}),I("SvelteRegisterComponent",{component:this,tagName:"TagList",options:t,id:tt.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Vt as T,Et as a};
//# sourceMappingURL=TagList.DjzppSCS.js.map
