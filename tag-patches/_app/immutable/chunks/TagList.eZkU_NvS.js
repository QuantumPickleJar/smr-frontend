import{S as dt,i as mt,s as ht,d as R,v as $t,ap as N,e as D,W as st,b as M,g as L,h as A,M as vt,X as it,j as $,k as J,N as E,m as S,l as kt,n as x,Q as H,ad as Tt,Y as ot,aq as Dt,u as at,F as rt,G as lt,a1 as Lt,a2 as St,a as ct,ar as wt,as as bt,p as et,t as j,q as nt,r as k,y as F,I as z,U as pt,J as Q,L as U,O as W,T as G,R as X,f as ut,V as jt}from"./vendor.7Y6b5Kh7.js";import{a as ft}from"./graphql.NreK-VdG.js";const O="src/lib/components/utils/TagDisplay.svelte";function Y(a){let t,n,s="#",i=a[0].name+"",p,l,c,u,e,o,g=a[0].description+"",T,w,y,P;const C={c:function(){t=D("div"),n=D("span"),n.textContent=s,p=st(i),u=M(),e=D("div"),o=D("p"),T=st(g),this.h()},l:function(d){t=L(d,"DIV",{class:!0,title:!0});var m=A(t);n=L(m,"SPAN",{class:!0,"data-svelte-h":!0}),vt(n)!=="svelte-sdcp3o"&&(n.textContent=s),p=it(m,i),m.forEach($),u=J(d),e=L(d,"DIV",{class:!0,"data-popup":!0,style:!0});var V=A(e);o=L(V,"P",{});var h=A(o);T=it(h,g),h.forEach($),V.forEach($),this.h()},h:function(){E(n,"class","text-orange-500"),S(n,O,17,2,456),E(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none"),E(t,"title",l=a[1]==="click"?"Click for tag information":""),S(t,O,13,0,285),S(o,O,24,2,878),E(e,"class","card variant-filled-surface p-4"),E(e,"data-popup",w=`popupHoverFor${a[0].id}`),kt(e,"z-index","1000"),S(e,O,23,0,770)},m:function(d,m){x(d,t,m),H(t,n),H(t,p),x(d,u,m),x(d,e,m),H(e,o),H(o,T),y||(P=Tt(c=N.call(null,t,a[2])),y=!0)},p:function(d,[m]){m&1&&i!==(i=d[0].name+"")&&ot(p,i),m&2&&l!==(l=d[1]==="click"?"Click for tag information":"")&&E(t,"title",l),c&&Dt(c.update)&&m&4&&c.update.call(null,d[2]),m&1&&g!==(g=d[0].description+"")&&ot(T,g),m&1&&w!==(w=`popupHoverFor${d[0].id}`)&&E(e,"data-popup",w)},i:at,o:at,d:function(d){d&&($(t),$(u),$(e)),y=!1,P()}};return R("SvelteRegisterBlock",{block:C,id:Y.name,type:"component",source:"",ctx:a}),C}function Pt(a,t,n){let s,{$$slots:i={},$$scope:p}=t;$t("TagDisplay",i,[]);let{tag:l}=t,{popupTriggerEvent:c="click"}=t;a.$$.on_mount.push(function(){l===void 0&&!("tag"in t||a.$$.bound[a.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const u=["tag","popupTriggerEvent"];return Object.keys(t).forEach(e=>{!~u.indexOf(e)&&e.slice(0,2)!=="$$"&&e!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${e}'`)}),a.$$set=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(1,c=e.popupTriggerEvent)},a.$capture_state=()=>({popup:N,tag:l,popupTriggerEvent:c,popupHover:s}),a.$inject_state=e=>{"tag"in e&&n(0,l=e.tag),"popupTriggerEvent"in e&&n(1,c=e.popupTriggerEvent),"popupHover"in e&&n(2,s=e.popupHover)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&3&&n(2,s={event:c,target:`popupHoverFor${l.id}`,placement:"bottom-start"})},[l,c,s]}class Et extends dt{constructor(t){super(t),mt(this,t,Pt,Y,ht,{tag:0,popupTriggerEvent:1}),R("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:t,id:Y.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const _="src/lib/components/utils/TagList.svelte";function gt(a,t,n){const s=a.slice();return s[19]=t[n],s}function yt(a){let t,n="Tags",s,i,p,l,c,u,e,o,g,T,w,y;function P(h){a[11](h)}function C(h){a[12](h)}let v={name:"tags",chips:"variant-filled-primary"};a[4]!==void 0&&(v.input=a[4]),a[3]!==void 0&&(v.value=a[3]),p=new bt({props:v,$$inline:!0}),F.push(()=>z(p,"input",P)),F.push(()=>z(p,"value",C)),p.$on("remove",a[13]);function d(h){a[15](h)}let m={options:a[5].filter(a[14])};a[4]!==void 0&&(m.input=a[4]),o=new wt({props:m,$$inline:!0}),F.push(()=>z(o,"input",d)),o.$on("selection",a[16]);const V={c:function(){t=D("div"),t.textContent=n,s=M(),i=D("div"),Q(p.$$.fragment),u=M(),e=D("div"),Q(o.$$.fragment),this.h()},l:function(f){t=L(f,"DIV",{class:!0,"data-svelte-h":!0}),vt(t)!=="svelte-14odz2i"&&(t.textContent=n),s=J(f),i=L(f,"DIV",{});var b=A(i);U(p.$$.fragment,b),b.forEach($),u=J(f),e=L(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var I=A(e);U(o.$$.fragment,I),I.forEach($),this.h()},h:function(){E(t,"class","mb-2"),S(t,_,73,4,1638),S(i,_,75,4,1672),E(e,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),E(e,"tabindex","-1"),E(e,"data-popup","popupAutocomplete"),S(e,_,84,4,1915)},m:function(f,b){x(f,t,b),x(f,s,b),x(f,i,b),W(p,i,null),x(f,u,b),x(f,e,b),W(o,e,null),T=!0,w||(y=Tt(N.call(null,i,a[7])),w=!0)},p:function(f,b){const I={};!l&&b&16&&(l=!0,I.input=f[4],G(()=>l=!1)),!c&&b&8&&(c=!0,I.value=f[3],G(()=>c=!1)),p.$set(I);const r={};b&40&&(r.options=f[5].filter(f[14])),!g&&b&16&&(g=!0,r.input=f[4],G(()=>g=!1)),o.$set(r)},i:function(f){T||(k(p.$$.fragment,f),k(o.$$.fragment,f),T=!0)},o:function(f){j(p.$$.fragment,f),j(o.$$.fragment,f),T=!1},d:function(f){f&&($(t),$(s),$(i),$(u),$(e)),X(p),X(o),w=!1,y()}};return R("SvelteRegisterBlock",{block:V,id:yt.name,type:"else",source:"(59:2) {:else}",ctx:a}),V}function xt(a){let t,n,s=a[0].length>0&&K(a);const i={c:function(){s&&s.c(),t=ut()},l:function(l){s&&s.l(l),t=ut()},m:function(l,c){s&&s.m(l,c),x(l,t,c),n=!0},p:function(l,c){l[0].length>0?s?(s.p(l,c),c&1&&k(s,1)):(s=K(l),s.c(),k(s,1),s.m(t.parentNode,t)):s&&(et(),j(s,1,1,()=>{s=null}),nt())},i:function(l){n||(k(s),n=!0)},o:function(l){j(s),n=!1},d:function(l){l&&$(t),s&&s.d(l)}};return R("SvelteRegisterBlock",{block:i,id:xt.name,type:"if",source:"(51:2) {#if !editable}",ctx:a}),i}function K(a){let t,n,s=pt(a[0]),i=[];for(let c=0;c<s.length;c+=1)i[c]=Z(gt(a,s,c));const p=c=>j(i[c],1,1,()=>{i[c]=null}),l={c:function(){t=D("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l:function(u){t=L(u,"DIV",{class:!0});var e=A(t);for(let o=0;o<i.length;o+=1)i[o].l(e);e.forEach($),this.h()},h:function(){E(t,"class","text-md flex flex-row flex-wrap gap-1"),S(t,_,66,6,1454)},m:function(u,e){x(u,t,e);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null);n=!0},p:function(u,e){if(e&5){s=pt(u[0]);let o;for(o=0;o<s.length;o+=1){const g=gt(u,s,o);i[o]?(i[o].p(g,e),k(i[o],1)):(i[o]=Z(g),i[o].c(),k(i[o],1),i[o].m(t,null))}for(et(),o=s.length;o<i.length;o+=1)p(o);nt()}},i:function(u){if(!n){for(let e=0;e<s.length;e+=1)k(i[e]);n=!0}},o:function(u){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)j(i[e]);n=!1},d:function(u){u&&$(t),jt(i,u)}};return R("SvelteRegisterBlock",{block:l,id:K.name,type:"if",source:"(52:4) {#if tags.length > 0}",ctx:a}),l}function Z(a){let t,n;t=new Et({props:{tag:a[19],popupTriggerEvent:a[2]},$$inline:!0});const s={c:function(){Q(t.$$.fragment)},l:function(p){U(t.$$.fragment,p)},m:function(p,l){W(t,p,l),n=!0},p:function(p,l){const c={};l&1&&(c.tag=p[19]),l&4&&(c.popupTriggerEvent=p[2]),t.$set(c)},i:function(p){n||(k(t.$$.fragment,p),n=!0)},o:function(p){j(t.$$.fragment,p),n=!1},d:function(p){X(t,p)}};return R("SvelteRegisterBlock",{block:s,id:Z.name,type:"each",source:"(54:8) {#each tags as tag}",ctx:a}),s}function tt(a){let t,n,s,i;const p=[xt,yt],l=[];function c(e,o){return e[1]?1:0}n=c(a),s=l[n]=p[n](a);const u={c:function(){t=D("div"),s.c(),this.h()},l:function(o){t=L(o,"DIV",{class:!0});var g=A(t);s.l(g),g.forEach($),this.h()},h:function(){E(t,"class","tags"),S(t,_,63,0,1385)},m:function(o,g){x(o,t,g),l[n].m(t,null),i=!0},p:function(o,[g]){let T=n;n=c(o),n===T?l[n].p(o,g):(et(),j(l[T],1,1,()=>{l[T]=null}),nt(),s=l[n],s?s.p(o,g):(s=l[n]=p[n](o),s.c()),k(s,1),s.m(t,null))},i:function(o){i||(k(s),i=!0)},o:function(o){j(s),i=!1},d:function(o){o&&$(t),l[n].d()}};return R("SvelteRegisterBlock",{block:u,id:tt.name,type:"component",source:"",ctx:a}),u}function Ct(a,t,n){let s,i,{$$slots:p={},$$scope:l}=t;$t("TagList",p,[]);const c=rt(),u=lt({query:ft,client:c,variables:{limit:100}});Lt(u,"getAllTags"),St(a,u,r=>n(10,i=r));let{tags:e=[]}=t,{editable:o=!1}=t,{popupTriggerEvent:g="click"}=t;const T={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let w=[];const y=()=>n(3,w=e.map(r=>r.name));ct(y);const P=r=>{const B=i.data?.getTags?.find(q=>q.id==r.value);n(0,e=[...e,{id:r.value,name:B?.name,description:B?.description}]),y()},C=r=>{const B=e.findIndex(q=>q.name===r);n(0,e=[...e.slice(0,B),...e.slice(B+1)]),y()};let v="";const d=["tags","editable","popupTriggerEvent"];Object.keys(t).forEach(r=>{!~d.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function m(r){v=r,n(4,v)}function V(r){w=r,n(3,w)}const h=r=>C(r.detail.chipValue),f=r=>w.indexOf(r.label)<0;function b(r){v=r,n(4,v)}const I=r=>P(r.detail);return a.$$set=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,o=r.editable),"popupTriggerEvent"in r&&n(2,g=r.popupTriggerEvent)},a.$capture_state=()=>({GetTagsDocument:ft,queryStore:lt,getContextClient:rt,Autocomplete:wt,InputChip:bt,popup:N,onMount:ct,TagDisplay:Et,client:c,getAllTags:u,tags:e,editable:o,popupTriggerEvent:g,popupSettings:T,tagList:w,loadTagList:y,addTag:P,removeTag:C,inputTag:v,allTags:s,$getAllTags:i}),a.$inject_state=r=>{"tags"in r&&n(0,e=r.tags),"editable"in r&&n(1,o=r.editable),"popupTriggerEvent"in r&&n(2,g=r.popupTriggerEvent),"tagList"in r&&n(3,w=r.tagList),"inputTag"in r&&n(4,v=r.inputTag),"allTags"in r&&n(5,s=r.allTags)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&1024&&n(5,s=i.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id}))||[])},[e,o,g,w,v,s,u,T,P,C,i,m,V,h,f,b,I]}class Vt extends dt{constructor(t){super(t),mt(this,t,Ct,tt,ht,{tags:0,editable:1,popupTriggerEvent:2}),R("SvelteRegisterComponent",{component:this,tagName:"TagList",options:t,id:tt.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(t){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Vt as T,Et as a};
//# sourceMappingURL=TagList.eZkU_NvS.js.map
