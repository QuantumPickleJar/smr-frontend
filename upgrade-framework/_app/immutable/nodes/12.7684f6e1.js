import{S as ft,i as lt,d as b,s as dt,bg as U,r as $t,a9 as gt,v as pt,aI as A,aJ as F,af as mt,ag as ht,aL as H,bh as W,aY as J,P as bt,k as j,a0 as L,x as C,aa as G,a2 as E,ba as vt,q as p,a1 as q,y as M,z as O,ab as S,a3 as P,a8 as xt,B as I,a7 as y,l as x,a4 as _,p as m,t as h,n as X,ad as yt,a6 as B,m as Z,ac as tt,L as w}from"../chunks/vendor.00e9f6c0.js";import{r as Y,E as K}from"../chunks/graphql.769656ab.js";import{T as et}from"../chunks/Toast.1e1b5627.js";import{G as nt}from"../chunks/GuideForm.88de1de9.js";import{M as it}from"../chunks/MetaDescriptors.caed9a58.js";const kt=async({params:o})=>({...o}),Bt=Object.freeze(Object.defineProperty({__proto__:null,load:kt},Symbol.toStringTag,{value:"Module"})),{console:Q}=bt,N="src/routes/guide/[guideId]/edit/+page.svelte";function z(o){let t,i;t=new it({props:{description:"Editing guide '"+o[2].data.getGuide.short_description+"'",title:"Edit guide '"+o[2].data.getGuide.name+"'"},$$inline:!0});const s={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&4&&(f.description="Editing guide '"+e[2].data.getGuide.short_description+"'"),n&4&&(f.title="Edit guide '"+e[2].data.getGuide.name+"'"),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return b("SvelteRegisterBlock",{block:s,id:z.name,type:"if",source:"(44:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:o}),s}function ot(o){let t,i;t=new nt({props:{onSubmit:o[4],initialValues:o[2].data.getGuide,submitText:"Save"},$$inline:!0});const s={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&4&&(f.initialValues=e[2].data.getGuide),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return b("SvelteRegisterBlock",{block:s,id:ot.name,type:"else",source:"(59:4) {:else}",ctx:o}),s}function rt(o){let t,i,s=o[2].error.message+"",r;const e={c:function(){t=C("p"),i=G("Oh no... "),r=G(s),this.h()},l:function(f){t=M(f,"P",{});var d=O(t);i=S(d,"Oh no... "),r=S(d,s),d.forEach(p),this.h()},h:function(){I(t,N,57,6,1691)},m:function(f,d){x(f,t,d),y(t,i),y(t,r)},p:function(f,d){d&4&&s!==(s=f[2].error.message+"")&&tt(r,s)},i:w,o:w,d:function(f){f&&p(t)}};return b("SvelteRegisterBlock",{block:e,id:rt.name,type:"if",source:"(57:27) ",ctx:o}),e}function at(o){let t,i;const s={c:function(){t=C("p"),i=G("Loading..."),this.h()},l:function(e){t=M(e,"P",{});var n=O(t);i=S(n,"Loading..."),n.forEach(p),this.h()},h:function(){I(t,N,55,6,1639)},m:function(e,n){x(e,t,n),y(t,i)},p:w,i:w,o:w,d:function(e){e&&p(t)}};return b("SvelteRegisterBlock",{block:s,id:at.name,type:"if",source:"(55:4) {#if $guide.fetching}",ctx:o}),s}function st(o){let t,i,s,r;const e=[at,rt,ot],n=[];function f($,l){return $[2].fetching?0:$[2].error?1:2}t=f(o),i=n[t]=e[t](o);const d={c:function(){i.c(),s=j()},l:function(l){i.l(l),s=j()},m:function(l,c){n[t].m(l,c),x(l,s,c),r=!0},p:function(l,c){let v=t;t=f(l),t===v?n[t].p(l,c):(Z(),h(n[v],1,1,()=>{n[v]=null}),X(),i=n[t],i?i.p(l,c):(i=n[t]=e[t](l),i.c()),m(i,1),i.m(s.parentNode,s))},i:function(l){r||(m(i),r=!0)},o:function(l){h(i),r=!1},d:function(l){n[t].d(l),l&&p(s)}};return b("SvelteRegisterBlock",{block:d,id:st.name,type:"slot",source:"(54:2) <Content>",ctx:o}),d}function ct(o){let t,i;t=new W({props:{$$slots:{default:[st]},$$scope:{ctx:o}},$$inline:!0});const s={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&516&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return b("SvelteRegisterBlock",{block:s,id:ct.name,type:"slot",source:"(53:0) <Card>",ctx:o}),s}function ut(o){let t,i;const s={c:function(){t=C("span"),i=G(o[1]),this.h()},l:function(e){t=M(e,"SPAN",{});var n=O(t);i=S(n,o[1]),n.forEach(p),this.h()},h:function(){I(t,N,65,2,1896)},m:function(e,n){x(e,t,n),y(t,i)},p:function(e,n){n&2&&tt(i,e[1])},d:function(e){e&&p(t)}};return b("SvelteRegisterBlock",{block:s,id:ut.name,type:"slot",source:"(65:0) <Toast bind:running={errorToast}>",ctx:o}),s}function V(o){let t,i,s,r,e,n,f,d,$,l,c=!o[2].fetching&&!o[2].error&&o[2].data.getGuide&&z(o);n=new U({props:{$$slots:{default:[ct]},$$scope:{ctx:o}},$$inline:!0});function v(u){o[6](u)}let R={$$slots:{default:[ut]},$$scope:{ctx:o}};o[0]!==void 0&&(R.running=o[0]),d=new et({props:R,$$inline:!0}),$t.push(()=>gt(d,"running",v));const T={c:function(){c&&c.c(),t=j(),i=L(),s=C("h1"),r=G("Edit Guide"),e=L(),E(n.$$.fragment),f=L(),E(d.$$.fragment),this.h()},l:function(a){const g=vt("svelte-2z35li",document.head);c&&c.l(g),t=j(),g.forEach(p),i=q(a),s=M(a,"H1",{class:!0});var k=O(s);r=S(k,"Edit Guide"),k.forEach(p),e=q(a),P(n.$$.fragment,a),f=q(a),P(d.$$.fragment,a),this.h()},h:function(){xt(s,"class","text-4xl my-4 font-bold"),I(s,N,50,0,1535)},m:function(a,g){c&&c.m(document.head,null),y(document.head,t),x(a,i,g),x(a,s,g),y(s,r),x(a,e,g),_(n,a,g),x(a,f,g),_(d,a,g),l=!0},p:function(a,[g]){!a[2].fetching&&!a[2].error&&a[2].data.getGuide?c?(c.p(a,g),g&4&&m(c,1)):(c=z(a),c.c(),m(c,1),c.m(t.parentNode,t)):c&&(Z(),h(c,1,1,()=>{c=null}),X());const k={};g&516&&(k.$$scope={dirty:g,ctx:a}),n.$set(k);const D={};g&514&&(D.$$scope={dirty:g,ctx:a}),!$&&g&1&&($=!0,D.running=a[0],yt(()=>$=!1)),d.$set(D)},i:function(a){l||(m(c),m(n.$$.fragment,a),m(d.$$.fragment,a),l=!0)},o:function(a){h(c),h(n.$$.fragment,a),h(d.$$.fragment,a),l=!1},d:function(a){c&&c.d(a),p(t),a&&p(i),a&&p(s),a&&p(e),B(n,a),a&&p(f),B(d,a)}};return b("SvelteRegisterBlock",{block:T,id:V.name,type:"component",source:"",ctx:o}),T}function wt(o,t,i){let s,{$$slots:r={},$$scope:e}=t;pt("Page",r,[]);let{data:n}=t;const{guideId:f}=n,d=A();let $="",l=!1;const c=F({query:Y,client:d,variables:{guide:f}});mt(c,"guide"),ht(o,c,u=>i(2,s=u));const v=u=>{d.mutation(K,{guideId:f,guide:u}).toPromise().then(a=>{a.error?(console.error(a.error.message),i(1,$="Error editing guide: "+a.error.message),i(0,l=!0)):H(J+"/guide/"+a.data.updateGuide.id)})};o.$$.on_mount.push(function(){n===void 0&&!("data"in t||o.$$.bound[o.$$.props.data])&&Q.warn("<Page> was created without expected prop 'data'")});const R=["data"];Object.keys(t).forEach(u=>{!~R.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&Q.warn(`<Page> was created with unknown prop '${u}'`)});function T(u){l=u,i(0,l)}return o.$$set=u=>{"data"in u&&i(5,n=u.data)},o.$capture_state=()=>({getContextClient:A,queryStore:F,EditGuideDocument:K,GetGuideDocument:Y,Toast:et,goto:H,GuideForm:nt,Card:U,Content:W,base:J,MetaDescriptors:it,data:n,guideId:f,client:d,errorMessage:$,errorToast:l,guide:c,onSubmit:v,$guide:s}),o.$inject_state=u=>{"data"in u&&i(5,n=u.data),"errorMessage"in u&&i(1,$=u.errorMessage),"errorToast"in u&&i(0,l=u.errorToast)},t&&"$$inject"in t&&o.$inject_state(t.$$inject),o.$$.update=()=>{o.$$.dirty&1&&(l||i(1,$=""))},[l,$,s,c,v,n,T]}class Rt extends ft{constructor(t){super(t),lt(this,t,wt,V,dt,{data:5}),b("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:V.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Rt as component,Bt as universal};
//# sourceMappingURL=12.7684f6e1.js.map
