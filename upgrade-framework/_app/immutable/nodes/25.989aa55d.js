import{S as Ce,i as Ie,d as N,s as Me,bg as $e,r as me,a9 as ge,af as Ne,ag as Ve,v as Ae,aI as ae,aL as ne,aY as re,bh as pe,aO as de,P as je,a2 as _,a0 as D,x as w,aa as H,ba as De,a3 as z,q as m,a1 as U,y as E,z as T,ab as G,a8 as S,B as P,a4 as O,l as C,a7 as y,ad as he,p as I,t as M,a6 as q,L as Q,am as Ue,k as oe,m as _e,n as ze,ac as X,C as Oe}from"../chunks/vendor.7dfe5cde.js";import{W as ie}from"../chunks/graphql.769656ab.js";import{T as ve}from"../chunks/Toast.eb1d0767.js";import{o as qe,d as Le,e as Fe,s as He,c as ce,v as le,r as ue,V as Y,z as Ge,T as xe}from"../chunks/forms.34aa40f2.js";import{t as fe}from"../chunks/forms.a1d1b2e9.js";import{a as W}from"../chunks/user.cc89ee85.js";import{M as ye}from"../chunks/MetaDescriptors.b51c6b62.js";const{console:Ke}=je,B="src/routes/settings/+page.svelte";function be(o){let e,t,s,r,n,a,l,v,f,u,d,g,R,$,i,p,b,c,L,j,Z;f=new Y({props:{for:"avatar",$$slots:{default:[ke,({messages:x})=>({10:x}),({messages:x})=>x?1024:0]},$$scope:{ctx:o}},$$inline:!0});function Te(x){o[7](x)}let ee={label:"Username",required:!0};o[5].username!==void 0&&(ee.value=o[5].username),g=new xe({props:ee,$$inline:!0}),me.push(()=>ge(g,"value",Te)),i=new Y({props:{for:"username",$$slots:{default:[we,({messages:x})=>({10:x}),({messages:x})=>x?1024:0]},$$scope:{ctx:o}},$$inline:!0}),c=new de({props:{type:"submit",variant:"outlined",$$slots:{default:[Ee]},$$scope:{ctx:o}},$$inline:!0});const te={c:function(){e=w("form"),t=w("div"),s=w("div"),r=w("label"),n=H("Avatar:"),a=D(),l=w("input"),v=D(),_(f.$$.fragment),u=D(),d=w("div"),_(g.$$.fragment),$=D(),_(i.$$.fragment),p=D(),b=w("div"),_(c.$$.fragment),this.h()},l:function(h){e=E(h,"FORM",{});var k=T(e);t=E(k,"DIV",{class:!0});var V=T(t);s=E(V,"DIV",{class:!0});var A=T(s);r=E(A,"LABEL",{for:!0});var K=T(r);n=G(K,"Avatar:"),K.forEach(m),a=U(A),l=E(A,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),v=U(A),z(f.$$.fragment,A),A.forEach(m),u=U(V),d=E(V,"DIV",{class:!0});var F=T(d);z(g.$$.fragment,F),$=U(F),z(i.$$.fragment,F),F.forEach(m),p=U(V),b=E(V,"DIV",{});var se=T(b);z(c.$$.fragment,se),se.forEach(m),V.forEach(m),k.forEach(m),this.h()},h:function(){S(r,"for","avatar"),P(r,B,75,12,2574),S(l,"id","avatar"),S(l,"class","base-input"),S(l,"name","avatar"),S(l,"type","file"),S(l,"accept","image/png,image/jpeg,image/gif"),S(l,"placeholder","Avatar"),P(l,B,76,12,2622),S(s,"class","grid grid-flow-row gap-2"),P(s,B,74,10,2523),S(d,"class","grid grid-flow-row gap-2"),P(d,B,88,10,3033),P(b,B,95,10,3353),S(t,"class","grid grid-flow-row gap-6"),P(t,B,73,8,2474),P(e,B,72,6,2450)},m:function(h,k){C(h,e,k),y(e,t),y(t,s),y(s,r),y(r,n),y(s,a),y(s,l),y(s,v),O(f,s,null),y(t,u),y(t,d),O(g,d,null),y(d,$),O(i,d,null),y(t,p),y(t,b),O(c,b,null),L=!0,j||(Z=Oe(o[4].call(null,e)),j=!0)},p:function(h,k){const V={};k&3072&&(V.$$scope={dirty:k,ctx:h}),f.$set(V);const A={};!R&&k&32&&(R=!0,A.value=h[5].username,he(()=>R=!1)),g.$set(A);const K={};k&3072&&(K.$$scope={dirty:k,ctx:h}),i.$set(K);const F={};k&2048&&(F.$$scope={dirty:k,ctx:h}),c.$set(F)},i:function(h){L||(I(f.$$.fragment,h),I(g.$$.fragment,h),I(i.$$.fragment,h),I(c.$$.fragment,h),L=!0)},o:function(h){M(f.$$.fragment,h),M(g.$$.fragment,h),M(i.$$.fragment,h),M(c.$$.fragment,h),L=!1},d:function(h){h&&m(e),q(f),q(g),q(i),q(c),j=!1,Z()}};return N("SvelteRegisterBlock",{block:te,id:be.name,type:"else",source:"(72:4) {:else}",ctx:o}),te}function Se(o){let e,t;const s={c:function(){e=w("p"),t=H("Please log in"),this.h()},l:function(n){e=E(n,"P",{});var a=T(e);t=G(a,"Please log in"),a.forEach(m),this.h()},h:function(){P(e,B,70,6,2411)},m:function(n,a){C(n,e,a),y(e,t)},p:Q,i:Q,o:Q,d:function(n){n&&m(e)}};return N("SvelteRegisterBlock",{block:s,id:Se.name,type:"if",source:"(70:4) {#if $user === null}",ctx:o}),s}function ke(o){let e,t=(o[10]||"")+"",s;const r={c:function(){e=w("span"),s=H(t),this.h()},l:function(a){e=E(a,"SPAN",{class:!0});var l=T(e);s=G(l,t),l.forEach(m),this.h()},h:function(){S(e,"class","validation-message"),P(e,B,84,14,2916)},m:function(a,l){C(a,e,l),y(e,s)},p:function(a,l){l&1024&&t!==(t=(a[10]||"")+"")&&X(s,t)},d:function(a){a&&m(e)}};return N("SvelteRegisterBlock",{block:r,id:ke.name,type:"slot",source:'(84:12) <ValidationMessage for=\\"avatar\\" let:messages={message}>',ctx:o}),r}function we(o){let e,t=(o[10]||"")+"",s;const r={c:function(){e=w("span"),s=H(t),this.h()},l:function(a){e=E(a,"SPAN",{class:!0});var l=T(e);s=G(l,t),l.forEach(m),this.h()},h:function(){S(e,"class","validation-message"),P(e,B,91,14,3236)},m:function(a,l){C(a,e,l),y(e,s)},p:function(a,l){l&1024&&t!==(t=(a[10]||"")+"")&&X(s,t)},d:function(a){a&&m(e)}};return N("SvelteRegisterBlock",{block:r,id:we.name,type:"slot",source:'(91:12) <ValidationMessage for=\\"username\\" let:messages={message}>',ctx:o}),r}function Ee(o){let e;const t={c:function(){e=H("Save")},l:function(r){e=G(r,"Save")},m:function(r,n){C(r,e,n)},d:function(r){r&&m(e)}};return N("SvelteRegisterBlock",{block:t,id:Ee.name,type:"slot",source:'(97:12) <Button type=\\"submit\\" variant=\\"outlined\\">',ctx:o}),t}function Pe(o){let e,t,s,r;const n=[Se,be],a=[];function l(f,u){return f[2]===null?0:1}e=l(o),t=a[e]=n[e](o);const v={c:function(){t.c(),s=oe()},l:function(u){t.l(u),s=oe()},m:function(u,d){a[e].m(u,d),C(u,s,d),r=!0},p:function(u,d){let g=e;e=l(u),e===g?a[e].p(u,d):(_e(),M(a[g],1,1,()=>{a[g]=null}),ze(),t=a[e],t?t.p(u,d):(t=a[e]=n[e](u),t.c()),I(t,1),t.m(s.parentNode,s))},i:function(u){r||(I(t),r=!0)},o:function(u){M(t),r=!1},d:function(u){a[e].d(u),u&&m(s)}};return N("SvelteRegisterBlock",{block:v,id:Pe.name,type:"slot",source:"(69:2) <Content>",ctx:o}),v}function Be(o){let e,t;e=new pe({props:{$$slots:{default:[Pe]},$$scope:{ctx:o}},$$inline:!0});const s={c:function(){_(e.$$.fragment)},l:function(n){z(e.$$.fragment,n)},m:function(n,a){O(e,n,a),t=!0},p:function(n,a){const l={};a&2084&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i:function(n){t||(I(e.$$.fragment,n),t=!0)},o:function(n){M(e.$$.fragment,n),t=!1},d:function(n){q(e,n)}};return N("SvelteRegisterBlock",{block:s,id:Be.name,type:"slot",source:"(68:0) <Card>",ctx:o}),s}function Re(o){let e,t;const s={c:function(){e=w("span"),t=H(o[3]),this.h()},l:function(n){e=E(n,"SPAN",{});var a=T(e);t=G(a,o[3]),a.forEach(m),this.h()},h:function(){P(e,B,105,2,3540)},m:function(n,a){C(n,e,a),y(e,t)},p:function(n,a){a&8&&X(t,n[3])},d:function(n){n&&m(e)}};return N("SvelteRegisterBlock",{block:s,id:Re.name,type:"slot",source:"(105:0) <Toast bind:running={errorToast}>",ctx:o}),s}function J(o){let e,t,s,r,n,a,l,v,f,u;e=new ye({props:{description:"Change your user settings",title:"Settings"},$$inline:!0}),a=new $e({props:{$$slots:{default:[Be]},$$scope:{ctx:o}},$$inline:!0});function d($){o[8]($)}let g={$$slots:{default:[Re]},$$scope:{ctx:o}};o[0]!==void 0&&(g.running=o[0]),v=new ve({props:g,$$inline:!0}),me.push(()=>ge(v,"running",d));const R={c:function(){_(e.$$.fragment),t=D(),s=w("h1"),r=H("Settings"),n=D(),_(a.$$.fragment),l=D(),_(v.$$.fragment),this.h()},l:function(i){const p=De("svelte-1ae5i2c",document.head);z(e.$$.fragment,p),p.forEach(m),t=U(i),s=E(i,"H1",{class:!0});var b=T(s);r=G(b,"Settings"),b.forEach(m),n=U(i),z(a.$$.fragment,i),l=U(i),z(v.$$.fragment,i),this.h()},h:function(){S(s,"class","text-4xl my-4 font-bold"),P(s,B,65,0,2310)},m:function(i,p){O(e,document.head,null),C(i,t,p),C(i,s,p),y(s,r),C(i,n,p),O(a,i,p),C(i,l,p),O(v,i,p),u=!0},p:function(i,[p]){const b={};p&2084&&(b.$$scope={dirty:p,ctx:i}),a.$set(b);const c={};p&2056&&(c.$$scope={dirty:p,ctx:i}),!f&&p&1&&(f=!0,c.running=i[0],he(()=>f=!1)),v.$set(c)},i:function(i){u||(I(e.$$.fragment,i),I(a.$$.fragment,i),I(v.$$.fragment,i),u=!0)},o:function(i){M(e.$$.fragment,i),M(a.$$.fragment,i),M(v.$$.fragment,i),u=!1},d:function(i){q(e),i&&m(t),i&&m(s),i&&m(n),q(a,i),i&&m(l),q(v,i)}};return N("SvelteRegisterBlock",{block:R,id:J.name,type:"component",source:"",ctx:o}),R}function Qe(o,e,t){let s,r,n=Q,a=()=>(n(),n=Ue($,c=>t(5,r=c)),$);Ne(W,"user"),Ve(o,W,c=>t(2,s=c)),o.$$.on_destroy.push(()=>n());let{$$slots:l={},$$scope:v}=e;Ae("Page",l,[]);let f="",u=!1;const d=ae(),g=qe({avatar:Le(Fe().refine(c=>"name"in c&&"size"in c&&"type"in c)),username:He().min(3).max(32)});let R,$;const i=[];Object.keys(e).forEach(c=>{!~i.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Ke.warn(`<Page> was created with unknown prop '${c}'`)});function p(c){o.$$.not_equal(r.username,c)&&(r.username=c,$.set(r))}function b(c){u=c,t(0,u),t(2,s),t(1,$)}return o.$capture_state=()=>({getContextClient:ae,UpdateUserDocument:ie,Toast:ve,goto:ne,createForm:ce,validator:le,reporter:ue,ValidationMessage:Y,trimNonSchema:fe,user:W,zod:Ge,base:re,MetaDescriptors:ye,Card:$e,Content:pe,Textfield:xe,Button:de,errorMessage:f,errorToast:u,client:d,userSchema:g,form:R,data:$,$user:s,$data:r}),o.$inject_state=c=>{"errorMessage"in c&&t(3,f=c.errorMessage),"errorToast"in c&&t(0,u=c.errorToast),"form"in c&&t(4,R=c.form),"data"in c&&a(t(1,$=c.data))},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{if(o.$$.dirty&6&&s&&!$){const c=ce({initialValues:{username:s.username},extend:[le({schema:g}),ue],onSubmit:L=>{console.log("submitted",L),d.mutation(ie,{user:fe(L,g),userId:s.id}).toPromise().then(j=>{j.error?(console.error(j.error.message),t(3,f="Error editing user: "+j.error.message),t(0,u=!0)):ne(re+"/user/"+j.data.updateUser.id)})}});t(4,R=c.form),a(t(1,$=c.data))}o.$$.dirty&1&&(u||t(3,f=""))},[u,$,s,f,R,r,g,p,b]}class st extends Ce{constructor(e){super(e),Ie(this,e,Qe,J,Me,{userSchema:6}),N("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:J.name})}get userSchema(){return this.$$.ctx[6]}set userSchema(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{st as component};
//# sourceMappingURL=25.989aa55d.js.map
